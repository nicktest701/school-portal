import{r as c,S as L,b as M,m as y,d as R,j as e,P as O,e as A,x as D,$ as U,k as d,A as q,l as C,T as r,a0 as S,B as v,H as Y,g as _,h as H,u as Q,c as G,C as V,aC as $}from"./index-B8PQHtjc.js";import{C as K}from"./CustomizedMaterialTable-BQoTtwVw.js";import{C as f}from"./CustomFormControl-Duiznp8E.js";import{t as J}from"./initialValues-Dm2HlPlg.js";import{a as X,b as Z}from"./teacherAPI-DE1r2ugK.js";import{C as ee}from"./CustomDatePicker-_ngoDY-2.js";import{T as ae,N as te}from"./nationality-Dhsqpti8.js";import{C as ie}from"./CustomImageChooser-CGe9XgpC.js";import{A as w}from"./Autocomplete-Dw57Ihk7.js";import{T as ne}from"./teacherColumn-BYJUIpnE.js";import{E as re}from"./images-B5fNBSni.js";import{t as B}from"./teacher_ico-BYF6mhgw.js";import{T as oe,a as se,b as P,c as W}from"./TabPanel-WHfZdNAn.js";import{P as le}from"./PersonRounded-DGWhQpwP.js";import"./Toolbar-YM__bEFh.js";import"./Chip-DmEpgF7y.js";import"./useThemeProps-CEPKeDia.js";import"./Skeleton-DWRiBFRT.js";import"./ButtonGroup-ZC3qSltg.js";import"./ListItemText-DzMM1D1F.js";import"./InputAdornment-DAOlZ4uj.js";import"./index-BqG4A_N5.js";import"./DialogActions-BmNk8sop.js";import"./ListItem-CQImyTSy.js";import"./ListItemSecondaryAction-DOVMjMKm.js";import"./listItemButtonClasses-DySKLRoc.js";import"./Grid2-B2FVLpOz.js";import"./Link-kLE4_HTq.js";import"./ListItemButton-Di0YOqWQ.js";import"./Check-JB41DPzl.js";import"./DeleteOutline-BlPFLwFk.js";import"./AdapterMoment-BOypM_74.js";import"./generateUtilityClasses-BPC_uuYP.js";import"./createTheme-DxYQS8Dz.js";import"./createStyled-CJd69Mvg.js";import"./CircleRounded-YWo57tpF.js";const N=({setTab:g})=>{const{schoolSessionDispatch:l}=c.useContext(L),b=M(),[o,u]=c.useState(null),[p,h]=c.useState(y()),[m]=c.useState(J),{isPending:x,mutateAsync:z}=R({mutationFn:X}),I=(i,t)=>{i.dateofbirth=y(p).format("L"),z(i,{onSuccess:a=>{b.invalidateQueries(["teachers"]),l(_(a)),t.resetForm(),u(null),g("1")},onError:a=>{l(H(a))}})};return e.jsxs(e.Fragment,{children:[e.jsxs(O,{sx:{paddingY:2,backgroundColor:"#fff"},children:[e.jsx(A,{title:"New Facilitator",subtitle:" Simply fill in essential details about the new teacher, including their personal information, qualifications, and contact details, to ensure smooth integration into our educational community.",img:null,color:"primary.main"}),e.jsx(D,{initialValues:m,onSubmit:I,enableReinitialize:!0,validationSchema:U,children:({values:i,errors:t,touched:a,setFieldValue:j,handleChange:s,handleSubmit:k,handleReset:E})=>{const F=n=>{j("profile",n.target.files[0]),u(URL.createObjectURL(n.target.files[0]))};return e.jsxs(d,{padding:2,spacing:5,children:[e.jsx(d,{alignSelf:"center",children:e.jsx(ie,{handleImageUpload:F,children:e.jsx(q,{srcSet:o,sx:{width:100,height:100,alignSelf:"center"}})})}),e.jsxs(d,{spacing:3,children:[e.jsx(C,{variant:"h5",color:"secondary.main",bgcolor:"primary.main",fontWeight:"bold",p:1,paragraph:!0,children:"Personal information"}),e.jsxs(f,{children:[e.jsx(r,{label:"Firstname",type:"text",fullWidth:!0,size:"small",value:i.firstname,onChange:s("firstname"),error:!!(a.firstname&&t.firstname),helperText:a.firstname&&t.firstname}),e.jsx(r,{label:"Surname",fullWidth:!0,size:"small",value:i.surname,onChange:s("surname"),error:!!(a.surname&&t.surname),helperText:a.surname&&t.surname})]}),e.jsx(r,{label:"Username",fullWidth:!0,size:"small",value:i.username,onChange:s("username"),error:!!(a.username&&t.username),helperText:a.username&&t.username}),e.jsxs(f,{children:[e.jsx(ee,{label:"Date of Birth",date:p,setDate:h,disableFuture:!0,error:!!(a.dateofbirth&&t.dateofbirth),helperText:a.dateofbirth&&t.dateofbirth,value:i.dateofbirth,handleChange:s("dateofbirth")}),e.jsxs(r,{label:"Gender",select:!0,fullWidth:!0,size:"small",value:i.gender,onChange:s("gender"),error:!!(a.gender&&t.gender),helperText:a.gender&&t.gender,children:[e.jsx(S,{value:"male",children:"Male"}),e.jsx(S,{value:"female",children:"Female"})]})]})]}),e.jsxs(d,{spacing:3,children:[e.jsx(C,{variant:"h5",color:"secondary.main",bgcolor:"primary.main",fontWeight:"bold",p:1,paragraph:!0,children:"Contact Details"}),e.jsxs(f,{children:[e.jsx(r,{label:"Email",fullWidth:!0,size:"small",row:3,maxRows:3,value:i.email,onChange:s("email"),error:!!(a.email&&t.email),helperText:a.email&&t.email}),e.jsx(r,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:i.phonenumber,onChange:s("phonenumber"),error:!!(a.phonenumber&&t.phonenumber),helperText:a.phonenumber&&t.phonenumber})]}),e.jsx(r,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,value:i.address,onChange:s("address"),error:!!(a.address&&t.address),helperText:a.address&&t.address}),e.jsxs(f,{children:[e.jsx(w,{freeSolo:!0,fullWidth:!0,size:"small",options:ae,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:n=>n||"",value:i.residence,onChange:(n,T)=>j("residence",T),renderInput:n=>e.jsx(r,{...n,label:"Residence",fullWidth:!0,size:"small",error:!!(a.residence&&t.residence),helperText:a.residence&&t.residence})}),e.jsx(w,{freeSolo:!0,fullWidth:!0,size:"small",loadingText:"Please wait....",options:te,noOptionsText:"No Nationality available",getOptionLabel:n=>n||"",value:i.nationality,onChange:(n,T)=>j("nationality",T),renderInput:n=>e.jsx(r,{...n,label:"Nationality",fullWidth:!0,size:"small",error:!!(a.nationality&&t.nationality),helperText:a.nationality&&t.nationality})})]})]}),e.jsxs(d,{direction:"row",justifyContent:"flex-end",spacing:2,paddingY:4,children:[e.jsx(v,{sx:{minWidth:{xs:100,sm:150}},onClick:E,children:"Cancel"}),e.jsx(v,{loading:x,variant:"contained",color:"primary",sx:{minWidth:{xs:100,sm:150}},onClick:k,children:"Save"})]})]})}})]}),x&&e.jsx(Y,{value:"Please Wait.."})]})};N.propTypes={};const He=()=>{var h;const[g,l]=c.useState("1"),b=Q(),o=G({queryKey:["teachers"],queryFn:Z}),u=((h=o==null?void 0:o.data)==null?void 0:h.length)===0,p=m=>{b(`/teacher/${m==null?void 0:m._id}`)};return e.jsxs(V,{children:[e.jsx(A,{title:"Facilitator Portal",subtitle:"Explore Our Faculty: Meet the Dedicated Educators Shaping Tomorrow's Leaders",img:B,color:"primary.main"}),e.jsxs(oe,{value:g,children:[e.jsxs(se,{onChange:(m,x)=>l(x),sx:{bgcolor:"whitesmoke"},children:[e.jsx(P,{value:"1",label:"Facilitator",icon:e.jsx(le,{}),iconPosition:"start"}),u&&e.jsx(P,{value:"2",label:"New ",icon:e.jsx($,{}),iconPosition:"start"})]}),e.jsx(W,{value:"1",sx:{px:0},children:e.jsx(K,{title:"Teachers",icon:B,isPending:o.isPending,columns:ne,data:o.data?o.data:[],actions:[],onRowClick:p,showAddButton:!0,addButtonImg:re.teacher,addButtonText:"New Teacher",addButtonMessage:"ðŸ˜‘ Add your first teacher by clicking on the button below !",onAddButtonClicked:()=>l("2"),options:{search:!0}})}),e.jsx(W,{value:"2",sx:{px:0},children:e.jsx(N,{setTab:l})})]})]})};export{He as default};

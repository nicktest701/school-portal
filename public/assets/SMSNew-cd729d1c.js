import{Q as T,j as e,r as c,S as k,h as B,F as V,a4 as M,aC as z,aD as R,aE as I,aF as m,aG as d,m as q,T as u,v as E,aH as W,aI as F,w as L,x as w,aJ as H,aK as S,ak as A,q as f,D as P,ac as G,ad as N,ae as y,af as C}from"./index-e0c0d8c9.js";import{q as Q,b as Y}from"./initialValues-cd101ecd.js";const J=T(e.jsx("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-.4 4.25-6.54 4.09c-.65.41-1.47.41-2.12 0L4.4 8.25c-.25-.16-.4-.43-.4-.72 0-.67.73-1.07 1.3-.72L12 11l6.7-4.19c.57-.35 1.3.05 1.3.72 0 .29-.15.56-.4.72"}),"MailRounded"),K=T(e.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),O=()=>{const{schoolSessionDispatch:o}=c.useContext(k),[a,x]=c.useState("sms"),r=c.useMemo(()=>Q(a),[a]),{mutateAsync:h}=B(F),g=(n,l)=>{n.rate="quick",h(n,{onSettled:()=>{l.setSubmitting(!1)},onSuccess:s=>{o(L(s))},onError:s=>{o(w(s))}})};return e.jsx(V,{initialValues:r.init,onSubmit:g,validationSchema:r.val,enableReinitialize:!0,children:({values:n,errors:l,touched:s,isSubmitting:i,handleChange:t,handleSubmit:j})=>e.jsxs(M,{maxWidth:"md",children:[e.jsxs(z,{children:[e.jsx(R,{id:"message-type",children:"Select type"}),e.jsxs(I,{row:!0,"aria-labelledby":"message-type",name:"message-type",value:a,onChange:(p,b)=>x(b),children:[e.jsx(m,{value:"sms",control:e.jsx(d,{}),label:"SMS"}),e.jsx(m,{value:"email",control:e.jsx(d,{}),label:"Email"}),e.jsx(m,{value:"both",control:e.jsx(d,{}),label:"Both"})]})]}),e.jsxs(q,{spacing:2,justifyContent:"center",alignItems:"center",paddingY:2,children:[(a==="sms"||a==="both")&&e.jsx(u,{label:"Recipient's Phone No",required:!0,inputMode:"tel",size:"small",type:"tel",fullWidth:!0,value:n.phonenumber||"",onChange:t("phonenumber"),hidden:a==="email",error:!!(s.phonenumber&&l.phonenumber),helperText:s.phonenumber&&l.phonenumber}),(a==="email"||a==="both")&&e.jsx(u,{label:"Recipient's Email Address",inputMode:"email",type:"email",size:"small",required:!0,fullWidth:!0,hidden:a==="sms",value:n.email||"",onChange:t("email"),error:!!(s.email&&l.email),helperText:s.email&&l.email}),e.jsx(u,{label:"Message Title",required:!0,fullWidth:!0,size:"small",value:n.title||"",onChange:t("title"),error:!!(s.title&&l.title),helperText:s.title&&l.title}),e.jsx(u,{sx:{textAlign:"left"},label:"Message",required:!0,size:"small",multiline:!0,rows:4,fullWidth:!0,value:n.message||"",onChange:t("message"),error:!!(s.message&&l.message),helperText:s.message&&l.message})]}),e.jsx(E,{loading:i,variant:"contained",onClick:j,endIcon:e.jsx(W,{}),children:"Send Message"})]})})},U=()=>{const{schoolSessionDispatch:o}=c.useContext(k),[a,x]=c.useState("sms"),[r,h]=c.useState("students"),{mutateAsync:g,isLoading:n}=B(F),l=(s,i)=>{s.rate="bulk",s.group=r,s.type=a,g(s,{onSettled:()=>{i.setSubmitting(!1)},onSuccess:t=>{o(L(t))},onError:t=>{o(w(t))}})};return e.jsx(V,{initialValues:Y,onSubmit:l,validationSchema:H,enableReinitialize:!0,children:({values:s,errors:i,touched:t,isSubmitting:j,handleChange:p,handleSubmit:b})=>e.jsxs(M,{maxWidth:"md",children:[e.jsxs(z,{children:[e.jsx(R,{id:"message-type",children:"Select type"}),e.jsxs(I,{row:!0,"aria-labelledby":"message-type",name:"message-type",value:a,onChange:(v,D)=>x(D),children:[e.jsx(m,{value:"sms",control:e.jsx(d,{}),label:"SMS"}),e.jsx(m,{value:"email",control:e.jsx(d,{}),label:"Email"}),e.jsx(m,{value:"both",control:e.jsx(d,{}),label:"Both"})]})]}),e.jsxs(q,{spacing:2,justifyContent:"center",alignItems:"center",paddingY:2,children:[e.jsxs(u,{label:"Select group",select:!0,fullWidth:!0,value:r,size:"small",onChange:v=>h(v.target.value),children:[e.jsx(S,{value:"students",children:"Students"}),e.jsx(S,{value:"parents",children:"Parents"}),e.jsx(S,{value:"teachers",children:"Teachers"})]}),e.jsx(u,{label:"Message Title",required:!0,size:"small",fullWidth:!0,value:s.title||"",onChange:p("title"),error:!!(t.title&&i.title),helperText:t.title&&i.title}),e.jsx(u,{sx:{textAlign:"left"},label:"Message",required:!0,multiline:!0,rows:4,size:"small",fullWidth:!0,value:s.message||"",onChange:p("message"),error:!!(t.message&&i.message),helperText:t.message&&i.message})]}),e.jsx(E,{loading:j||n,variant:"contained",onClick:b,endIcon:e.jsx(W,{}),sx:{alignSelf:"flex-end"},children:"Send Message"})]})})},_=()=>{const[o,a]=c.useState("1");return e.jsxs(e.Fragment,{children:[e.jsx(A,{color:"#012e54"}),e.jsxs(M,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:2,paddingY:1},children:[e.jsx(J,{color:"inherit",sx:{width:50,height:50}}),e.jsx(f,{variant:"h6",children:"SMS, Mails & Notifications"}),e.jsx(f,{children:"Send single and bulk SMS amd emails to students,teachers, parents,etc"}),e.jsx(P,{flexItem:!0})]}),e.jsxs(G,{value:o,children:[e.jsxs(N,{onChange:(x,r)=>a(r),centered:!0,scrollButtons:"auto",children:[e.jsx(y,{label:"Quick Message",value:"1",icon:e.jsx(K,{}),iconPosition:"start"}),e.jsx(y,{label:"Bulk Messages",value:"2",icon:null})]}),e.jsx(C,{value:"1",children:e.jsx(O,{})}),e.jsx(C,{value:"2",children:e.jsx(U,{})})]})]})};export{_ as default};

import{j as r,l as s,A as p,p as I,m as o,_ as C,D as N,r as y,a0 as R,o as T,a as B,c as w,e as P,M as H,B as u,U as v}from"./index-ce442eb1.js";import{a as E}from"./currentFeeAPI-8639b338.js";import{C as S}from"./CustomizedMaterialTable-06b57d17.js";import{R as L}from"./index-792040d2.js";import{c as b}from"./sessionColumns-a7ba1da8.js";import{B as M}from"./Back-78662289.js";import{G as D}from"./GlobalSpinner-9c6fc1be.js";import{P as G}from"./PrintRounded-1304a952.js";import"./TabPanel-47a179c1.js";import"./Toolbar-8b116404.js";import"./Chip-15117b24.js";import"./Autocomplete-87c4b1e1.js";import"./Skeleton-b715010d.js";import"./ButtonGroup-ca857561.js";import"./ListItemText-b107adf9.js";import"./InputAdornment-92a613d9.js";import"./DialogActions-c9d7df2e.js";import"./ListItemSecondaryAction-660d9daa.js";import"./useMediaQuery-5bcb3f64.js";import"./ListItem-2727fabf.js";import"./listItemButtonClasses-c7063ebe.js";import"./ListItemButton-97ec9750.js";import"./Check-4cc8eef7.js";import"./DeleteOutline-78b9d3f1.js";import"./images-ee905b8b.js";import"./Delete-fb41f478.js";import"./currencyFormatter-1910a788.js";import"./CircleRounded-06f2dceb.js";import"./Edit-009e8578.js";const l="/assets/history_ico-167fe80a.svg",e=JSON.parse(localStorage.getItem("@school_info"));function O({student:i}){return r.jsx("div",{children:r.jsxs(s,{spacing:1,sx:{maxWidth:"8.5in",minHeight:"11in",margin:"auto",padding:"8px"},children:[r.jsxs(s,{direction:"row",justifyContent:"flex-start",alignItems:"center",columnGap:2,pb:2,children:[e!=null&&e.badge?r.jsx(p,{alt:"school logo",loading:"lazy",srcSet:`https://school-portal-aivn.onrender.com/api/frebbys/v1/images/users/${e==null?void 0:e.badge}`,sx:{width:40,height:40}}):r.jsx(I,{sx:{width:40,height:40}}),r.jsxs(s,{justifyContent:"flex-start",alignItems:"flex-start",children:[r.jsx(o,{variant:"h6",children:C.startCase(e==null?void 0:e.name)}),r.jsx(o,{variant:"caption",children:e==null?void 0:e.address}),r.jsx(o,{variant:"caption",children:e==null?void 0:e.location}),r.jsx(o,{variant:"caption",fontStyle:"italic",children:e==null?void 0:e.motto})]})]}),r.jsx(N,{}),r.jsx(o,{paragraph:!0,sx:{textAlign:"center",textDecoration:"underline",color:"primary",width:"100%",padding:"4px"},variant:"h6",children:"Fees Report"}),r.jsxs(s,{justifyContent:"center",alignItems:"center",spacing:1,pt:2,children:[r.jsx(p,{src:(i==null?void 0:i.profile)===""||(i==null?void 0:i.profile)===void 0||(i==null?void 0:i.profile)===null?null:i==null?void 0:i.profile,sx:{width:40,height:40,alignSelf:"center"}}),r.jsx(o,{children:i==null?void 0:i.fullName}),r.jsx(o,{variant:"caption",children:i==null?void 0:i.levelType})]}),r.jsx("div",{style:{flexGrow:1},children:r.jsx(S,{title:"Fees History",icon:l,addButtonImg:l,addButtonMessage:"No Fees History Found",exportFileName:i==null?void 0:i.fullName,columns:b,data:i==null?void 0:i.payment,actions:[],options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})}),r.jsx(o,{style:{fontSize:"10px",fontStyle:"italic"},children:"Powered by FrebbyTech Consults (0543772591)"})]})})}const U=()=>{var m,x,g,d,h,f,j;const{userState:{session:i}}=y.useContext(R),{state:n}=T(),[t]=B(),c=y.useRef(),a=w({queryKey:["student-fee-history",t.get("_id"),t.get("level_id")],queryFn:()=>E({sessionId:i.sessionId,termId:i==null?void 0:i.termId,studentId:t.get("_id"),levelId:t.get("level_id"),feeId:t.get("fid")}),enabled:!!t.get("_id")&&!!t.get("level_id")});return r.jsxs(r.Fragment,{children:[r.jsx(M,{to:n==null?void 0:n.prevPath,color:"primary.main"}),r.jsx(P,{title:((m=a==null?void 0:a.data)==null?void 0:m.fullName)||"",subtitle:(x=a==null?void 0:a.data)==null?void 0:x.levelType,color:"primary.main",icon:r.jsx(p,{srcSet:((g=a==null?void 0:a.data)==null?void 0:g.profile)===void 0||((d=a==null?void 0:a.data)==null?void 0:d.profile)===""?null:(h=a==null?void 0:a.data)==null?void 0:h.profile,sx:{width:70,height:70}})}),r.jsx(H,{children:r.jsx(r.Fragment,{children:r.jsx(S,{title:"Fees History",subtitle:"Showing details of student fees transactions",search:!0,icon:l,addButtonImg:l,addButtonMessage:"No Fees History Found",isLoading:a.isLoading,exportFileName:(f=a==null?void 0:a.data)==null?void 0:f.fullName,columns:b,data:(j=a==null?void 0:a.data)==null?void 0:j.payment,actions:[],handleRefresh:a.refetch,autoCompleteComponent:r.jsx(s,{direction:"row",spacing:1,children:r.jsx(L,{trigger:()=>r.jsx(u,{startIcon:r.jsx(G,{}),variant:"contained",children:"Print Report"}),content:()=>c.current})}),options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})})}),r.jsx("div",{ref:c,className:"print-container",children:r.jsx(O,{student:a==null?void 0:a.data})}),a.isLoading&&r.jsx(D,{})]})};U.propTypes={open:v.bool,setOpen:v.func};export{U as default};

import{c as f,j as e,ad as c,ae as u,P as x,S as N,A as W,T as v,af as Z,H as ee,r as q,a0 as te,G as se,v as ae,C as oe,D as re,J as ie,B as _}from"./index-bb65b4bf.js";import{u as h,w as ne,C as le}from"./CustomizedMaterialTable-266061d1.js";import{S as de}from"./studentColumns-c5a50072.js";import{c as ce}from"./ExaminationAPI-b9866df6.js";import{s as ue}from"./student_ico-5882123b.js";import{E as me}from"./images-0c291668.js";import{C as pe}from"./CustomTitle-ed47c53b.js";import{e as xe}from"./exams_ico-2188bf14.js";import{B as he}from"./Back-0ebcc4f3.js";import{u as ve}from"./useMediaQuery-5f0ec7e9.js";import{B as fe}from"./ButtonGroup-83f2640f.js";import"./TabPanel-175e39ff.js";import"./Toolbar-36d77a55.js";import"./MenuItem-1edcf8db.js";import"./listItemTextClasses-35ff90f6.js";import"./Chip-fa36c3a1.js";import"./Autocomplete-95da27f3.js";import"./Skeleton-6cff8ea8.js";import"./ListItemText-33ae0292.js";import"./InputAdornment-321f8206.js";import"./CardContent-25ef3451.js";import"./ListItemSecondaryAction-c66bb893.js";import"./Grid-6a14669c.js";import"./ListItem-befde9c4.js";import"./listItemButtonClasses-9702db06.js";import"./ListItemButton-bf3e0355.js";import"./Check-7b95876f.js";import"./DeleteOutline-80e9f63f.js";import"./Delete-97505065.js";import"./Add-66663708.js";import"./gradeColor-6983157e.js";import"./CircleRounded-3db5a545.js";import"./score_ico-e1082ac1.js";import"./ArrowBackRounded-54858719.js";const je=f(e.jsx("path",{d:"M20 2H4v20h16zM6 4h5v8l-2.5-1.5L6 12z"}),"BookSharp"),ge=f(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),Se=f(e.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}),"List"),_e=f(e.jsx("path",{d:"M16 4H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99h16c1.1 0 2-.9 2-2v-8zM4 18.01V6h11v5h5v7.01z"}),"NoteOutlined");var C={},Ce=u;Object.defineProperty(C,"__esModule",{value:!0});var V=C.default=void 0,Me=Ce(c()),be=e;V=C.default=(0,Me.default)((0,be.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutlineOutlined");var M={},$e=u;Object.defineProperty(M,"__esModule",{value:!0});var A=M.default=void 0,ke=$e(c()),ye=e;A=M.default=(0,ke.default)((0,ye.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOffOutlined");var b={},Oe=u;Object.defineProperty(b,"__esModule",{value:!0});var F=b.default=void 0,Ie=Oe(c()),Re=e;F=b.default=(0,Ie.default)((0,Re.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined");var $={},we=u;Object.defineProperty($,"__esModule",{value:!0});var G=$.default=void 0,ze=we(c()),He=e;G=$.default=(0,ze.default)((0,He.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.6-6-6-6m3 7H9v-2h6z"}),"DoNotDisturbOnTotalSilenceOutlined");var k={},Ee=u;Object.defineProperty(k,"__esModule",{value:!0});var D=k.default=void 0,Pe=Ee(c()),Te=e;D=k.default=(0,Pe.default)((0,Te.jsx)("path",{d:"M15 7v12.97l-4.21-1.81-.79-.34-.79.34L5 19.97V7zm4-6H8.99C7.89 1 7 1.9 7 3h10c1.1 0 2 .9 2 2v13l2 1V3c0-1.1-.9-2-2-2m-4 4H5c-1.1 0-2 .9-2 2v16l7-3 7 3V7c0-1.1-.9-2-2-2"}),"BookmarksOutlined");function n({title:m,value:j,icon:l,color:i}){return e.jsxs(N,{direction:"row",spacing:2,sx:{bgcolor:"white",px:2,py:4,borderRadius:2,boxShadow:"20px 20px 60px #d9d9d9,-20px -20px 60px #ffffff"},children:[e.jsx(W,{sx:{width:50,height:50,color:`${i}.dark`,bgcolor:`${i}.lighter`},children:l}),e.jsxs(N,{spacing:1,children:[e.jsx(v,{variant:"body2",children:m}),e.jsx(v,{variant:"h5",children:j})]})]})}n.propTypes={title:x.string,value:x.number,icon:x.node,color:x.string};const ft=({type:m})=>{var y,O,I,R,w,z,H;const j=Z(),l=ve(j.breakpoints.up("md")),i=ee(),{userState:{session:p}}=q.useContext(te),{levelId:a,level:r}=se(),t=ae({queryKey:["exams-details",a],queryFn:()=>ce({sessionId:p.sessionId,termId:p.termId,levelId:a}),enabled:!!a&&!!p.sessionId&&!!p.termId}),U=s=>{i(`/examination/level/${a}/student?eid=${s==null?void 0:s._id}&sid=${s==null?void 0:s.studentId}`,{state:{prevPath:`/examination/level/${a}/${r}`}})},Q=[...de,{field:null,title:"",width:"30%",render:()=>e.jsx(ge,{sx:{width:30,height:30}})}],d={width:28,height:28},J=()=>{i(`/examination/level/${a}/${r}/upload`,{state:{prevPath:`/examination/level/${a}/${r}`}})},K=()=>{i(`/${m}/reports/${a}`)},X=q.useCallback(()=>{var T,B;const s=["Index Number","Student","Class  Score","Exams  Score","Total  Score"],E=(B=(T=t==null?void 0:t.data)==null?void 0:T.students)==null?void 0:B.map(o=>({indexnumber:o==null?void 0:o.indexnumber,student:o==null?void 0:o.fullName})),g=h.json_to_sheet(E),P=h.book_new();h.book_append_sheet(P,g,r||"Subject"),h.sheet_add_aoa(g,[s],{origin:"A1"});const Y=E.reduce((o,S)=>{var L;return Math.max(o,(L=S==null?void 0:S.student)==null?void 0:L.length)},10);g["!cols"]=[{wch:Y}],ne(P,`${r||"Subject"}.xlsx`,{compression:!0})},[(y=t==null?void 0:t.data)==null?void 0:y.students]);return e.jsxs(e.Fragment,{children:[e.jsx(he,{to:m==="course"?"/course/level":"/examination",color:"primary.main"}),e.jsxs(oe,{sx:{display:"flex",flexDirection:{xs:"column-reverse",sm:"row"},justifyContent:"space-between",alignItems:"center",gap:2,bgcolor:"#fff",my:2},children:[e.jsx(pe,{title:"Examination Portal",subtitle:"Track,manage and control academic and class activities",img:xe,backColor:"#012e54"}),e.jsx(v,{sx:{display:{xs:"none",md:"inline-flex"}},variant:"h5",paragraph:!0,whiteSpace:"nowrap",children:r})]}),e.jsx(v,{variant:"h5",py:2,children:"Exams Summary"}),e.jsx(re,{}),e.jsxs(ie,{sx:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gap:2,py:6},children:[e.jsx(n,{title:"Students",value:(O=t.data)==null?void 0:O.noOfStudents,icon:e.jsx(V,{sx:d}),color:"info"}),e.jsx(n,{title:"Highest Marks",value:(I=t.data)==null?void 0:I.highestMarks,icon:e.jsx(D,{sx:d}),color:"success"}),e.jsx(n,{title:"Lowest Marks",value:(R=t.data)==null?void 0:R.lowestMarks,icon:e.jsx(G,{sx:d}),color:"warning"}),e.jsx(n,{title:"Pass Students",value:(w=t.data)==null?void 0:w.passStudents,icon:e.jsx(F,{sx:d}),color:"success"}),e.jsx(n,{title:"Failed Students",value:(z=t.data)==null?void 0:z.failStudents,icon:e.jsx(A,{sx:d}),color:"error"})]}),e.jsx(le,{title:r??"Students",icon:ue,isLoading:t.isLoading,columns:Q,search:!0,data:(H=t==null?void 0:t.data)==null?void 0:H.students,autoCompleteComponent:e.jsxs(fe,{children:[e.jsx(_,{startIcon:e.jsx(_e,{}),onClick:X,children:l?" Download Assessment Sheet":""}),e.jsx(_,{startIcon:e.jsx(je,{}),onClick:J,children:l?"Import Results":""}),e.jsx(_,{startIcon:e.jsx(Se,{}),onClick:K,children:l?" View Students Report":""})]}),actions:[],handleRefresh:t.refetch,addButtonImg:me.student,addButtonMessage:"ðŸ˜‘ No Students results available !!!!",onRowClick:s=>U(s)})]})};export{ft as default};

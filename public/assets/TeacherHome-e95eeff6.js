import{r as c,f as k,g as F,h as C,i as M,j as e,J as R,n as O,X as D,S as d,A as U,Y,T as y,Z as x,b as n,B as _,q,s as H,t as Q,H as G,v as V,C as J}from"./index-bb65b4bf.js";import{C as X}from"./CustomizedMaterialTable-266061d1.js";import{t as Z}from"./initialValues-beb81292.js";import{a as $,b as K}from"./teacherAPI-256d27ef.js";import{C as ee}from"./CustomDatePicker-05a8aa06.js";import{T as te,N as ae}from"./nationality-728e96f8.js";import{C as W}from"./CustomTitle-ed47c53b.js";import{M as S}from"./MenuItem-1edcf8db.js";import{A as v}from"./Autocomplete-95da27f3.js";import{T as ie}from"./teacherColumn-af594c43.js";import{E as oe}from"./images-0c291668.js";import{t as B}from"./teacher_ico-786b69d1.js";import{T as ne,a as se,b as w,c as A}from"./TabPanel-175e39ff.js";import{P as re}from"./PersonRounded-3189a4ee.js";import{A as le}from"./Add-66663708.js";import"./Toolbar-36d77a55.js";import"./Chip-fa36c3a1.js";import"./Skeleton-6cff8ea8.js";import"./ButtonGroup-83f2640f.js";import"./ListItemText-33ae0292.js";import"./listItemTextClasses-35ff90f6.js";import"./InputAdornment-321f8206.js";import"./CardContent-25ef3451.js";import"./ListItemSecondaryAction-c66bb893.js";import"./Grid-6a14669c.js";import"./useMediaQuery-5f0ec7e9.js";import"./ListItem-befde9c4.js";import"./listItemButtonClasses-9702db06.js";import"./ListItemButton-bf3e0355.js";import"./Check-7b95876f.js";import"./DeleteOutline-80e9f63f.js";import"./Delete-97505065.js";import"./CircleRounded-3db5a545.js";import"./score_ico-e1082ac1.js";const N=({setTab:f})=>{const{schoolSessionDispatch:l}=c.useContext(k),g=F(),[s,u]=c.useState(null),[p,h]=c.useState(C()),[m]=c.useState(Z),{isLoading:b,mutateAsync:z}=M({mutationFn:$}),I=(i,a)=>{i.dateofbirth=C(p).format("L"),z(i,{onSuccess:t=>{g.invalidateQueries(["teachers"]),l(H(t)),a.resetForm(),u(null),f("1")},onError:t=>{l(Q(t))}})};return e.jsx(e.Fragment,{children:e.jsxs(R,{sx:{paddingY:2,backgroundColor:"#fff"},children:[e.jsx(W,{title:"New Facilitator",subtitle:" Simply fill in essential details about the new teacher, including their personal information, qualifications, and contact details, to ensure smooth integration into our educational community.",img:null,color:"primary.main"}),e.jsx(O,{initialValues:m,onSubmit:I,enableReinitialize:!0,validationSchema:D,children:({values:i,errors:a,touched:t,setFieldValue:j,handleChange:r,handleSubmit:L,handleReset:P})=>{const E=o=>{j("profile",o.target.files[0]),u(URL.createObjectURL(o.target.files[0]))};return e.jsxs(d,{padding:2,spacing:5,children:[e.jsxs(d,{sx:{position:"relative",height:100},children:[e.jsx(U,{srcSet:s,sx:{width:100,height:100,alignSelf:"center"}}),e.jsx(Y,{handleImageUpload:E})]}),e.jsxs(d,{spacing:3,children:[e.jsx(y,{variant:"h5",color:"secondary.main",bgcolor:"primary.main",fontWeight:"bold",p:1,paragraph:!0,children:"Personal information"}),e.jsxs(x,{children:[e.jsx(n,{label:"Firstname",type:"text",fullWidth:!0,size:"small",value:i.firstname,onChange:r("firstname"),error:!!(t.firstname&&a.firstname),helperText:t.firstname&&a.firstname}),e.jsx(n,{label:"Surname",fullWidth:!0,size:"small",value:i.surname,onChange:r("surname"),error:!!(t.surname&&a.surname),helperText:t.surname&&a.surname})]}),e.jsx(n,{label:"Username",fullWidth:!0,size:"small",value:i.username,onChange:r("username"),error:!!(t.username&&a.username),helperText:t.username&&a.username}),e.jsxs(x,{children:[e.jsx(ee,{label:"Date of Birth",date:p,setDate:h,disableFuture:!0,error:!!(t.dateofbirth&&a.dateofbirth),helperText:t.dateofbirth&&a.dateofbirth,value:i.dateofbirth,handleChange:r("dateofbirth")}),e.jsxs(n,{label:"Gender",select:!0,fullWidth:!0,size:"small",value:i.gender,onChange:r("gender"),error:!!(t.gender&&a.gender),helperText:t.gender&&a.gender,children:[e.jsx(S,{value:"male",children:"Male"}),e.jsx(S,{value:"female",children:"Female"})]})]})]}),e.jsxs(d,{spacing:3,children:[e.jsx(y,{variant:"h5",color:"secondary.main",bgcolor:"primary.main",fontWeight:"bold",p:1,paragraph:!0,children:"Contact Details"}),e.jsxs(x,{children:[e.jsx(n,{label:"Email",fullWidth:!0,size:"small",row:3,maxRows:3,value:i.email,onChange:r("email"),error:!!(t.email&&a.email),helperText:t.email&&a.email}),e.jsx(n,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:i.phonenumber,onChange:r("phonenumber"),error:!!(t.phonenumber&&a.phonenumber),helperText:t.phonenumber&&a.phonenumber})]}),e.jsx(n,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,value:i.address,onChange:r("address"),error:!!(t.address&&a.address),helperText:t.address&&a.address}),e.jsxs(x,{children:[e.jsx(v,{freeSolo:!0,fullWidth:!0,size:"small",options:te,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:o=>o||"",value:i.residence,onChange:(o,T)=>j("residence",T),renderInput:o=>e.jsx(n,{...o,label:"Residence",fullWidth:!0,size:"small",error:!!(t.residence&&a.residence),helperText:t.residence&&a.residence})}),e.jsx(v,{freeSolo:!0,fullWidth:!0,size:"small",loadingText:"Please wait....",options:ae,noOptionsText:"No Nationality available",getOptionLabel:o=>o||"",value:i.nationality,onChange:(o,T)=>j("nationality",T),renderInput:o=>e.jsx(n,{...o,label:"Nationality",fullWidth:!0,size:"small",error:!!(t.nationality&&a.nationality),helperText:t.nationality&&a.nationality})})]})]}),e.jsxs(d,{direction:"row",justifyContent:"flex-end",spacing:2,paddingY:4,children:[e.jsx(_,{sx:{minWidth:{xs:100,sm:150}},onClick:P,children:"Cancel"}),e.jsx(q,{loading:b,variant:"contained",color:"primary",sx:{minWidth:{xs:100,sm:150}},onClick:L,children:"Save"})]})]})}})]})})};N.propTypes={};const _e=()=>{var h;const[f,l]=c.useState("1"),g=G(),s=V(["teachers"],()=>K()),u=((h=s==null?void 0:s.data)==null?void 0:h.length)===0,p=m=>{g(`/teacher/${m==null?void 0:m._id}`)};return e.jsxs(J,{children:[e.jsx(W,{title:"Facilitator Portal",subtitle:"Explore Our Faculty: Meet the Dedicated Educators Shaping Tomorrow's Leaders",img:B,color:"primary.main"}),e.jsxs(ne,{value:f,children:[e.jsxs(se,{onChange:(m,b)=>l(b),sx:{bgcolor:"whitesmoke"},children:[e.jsx(w,{value:"1",label:"Facilitator",icon:e.jsx(re,{}),iconPosition:"start"}),u&&e.jsx(w,{value:"2",label:"New ",icon:e.jsx(le,{}),iconPosition:"start"})]}),e.jsx(A,{value:"1",sx:{px:0},children:e.jsx(X,{title:"Teachers",icon:B,isLoading:s.isLoading,columns:ie,data:s.data?s.data:[],actions:[],onRowClick:p,showAddButton:!0,addButtonImg:oe.teacher,addButtonText:"New Teacher",addButtonMessage:"ðŸ˜‘ Add your first teacher by clicking on the button below !",onAddButtonClicked:()=>l("2"),options:{search:!0}})}),e.jsx(A,{value:"2",sx:{px:0},children:e.jsx(N,{setTab:l})})]})]})};export{_e as default};

import{j as i,k as c,A as n,o as H,l as o,_ as M,D as z,r as y,a0 as V,n as I,a as b,c as B,e as C,M as N,B as R,U as v}from"./index-DrgqF6h7.js";import{a as T}from"./currentFeeAPI-Dph8Aqgk.js";import{C as S}from"./CustomizedMaterialTable-sErZg5Gy.js";import{R as P}from"./index-Hbn9YzuZ.js";import{c as w}from"./sessionColumns-0BrYivn4.js";import{B as u}from"./Back-CADpxW16.js";import{G as E}from"./GlobalSpinner-BW4FoSxW.js";import{P as F}from"./PrintRounded-BUxwgtkK.js";import"./TabPanel-Bl8roboH.js";import"./useThemeProps-DLRF2U3R.js";import"./Toolbar-Bzx_LBRC.js";import"./Chip-BcLQNplL.js";import"./Autocomplete-D4vPEd6T.js";import"./Skeleton-BUD-o5ar.js";import"./ButtonGroup-DQMwsk7A.js";import"./ListItemText-Bwh_rzOL.js";import"./InputAdornment-EcTjtcuD.js";import"./index-_n9xtSlI.js";import"./DialogActions-Cx2GHHEW.js";import"./ListItem-yCsexoBs.js";import"./ListItemSecondaryAction-mmiMbVqP.js";import"./listItemButtonClasses-CLhmtlXH.js";import"./ListItemButton-BUsfko6u.js";import"./Check-CEGAxChF.js";import"./DeleteOutline-DM92K-00.js";import"./images-B5fNBSni.js";import"./currencyFormatter-DjBDW3hY.js";import"./CircleRounded-Bh8WmZqU.js";const l="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%3e%3cpath%20fill='%2364B5F6'%20d='M14%2012c0%201.104-.896%202-2%202H7c-1.104%200-2-.896-2-2V7c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V12zM26%2012c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2V7c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V12zM38%2012c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2V7c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V12zM14%2024c0%201.104-.896%202-2%202H7c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V24zM26%2024c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V24zM38%2024c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V24zM14%2036c0%201.104-.896%202-2%202H7c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V36zM26%2036c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V36zM38%2036c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V36z'/%3e%3cpath%20fill='%239C27B0'%20d='M43,33c0,5.523-4.477,10-10,10s-10-4.477-10-10s4.477-10,10-10S43,27.477,43,33'/%3e%3cg%3e%3cpath%20fill='%23F3E5F5'%20d='M29%2027H31V39H29zM35%2027H37V39H35z'/%3e%3cpath%20fill='%23F3E5F5'%20d='M27%2035H39V37H27zM27%2029H39V31H27z'/%3e%3c/g%3e%3c/svg%3e",e=JSON.parse(localStorage.getItem("@school_info"));function k({student:a}){return i.jsx("div",{children:i.jsxs(c,{spacing:1,sx:{maxWidth:"8.5in",minHeight:"11in",margin:"auto",padding:"8px"},children:[i.jsxs(c,{direction:"row",justifyContent:"flex-start",alignItems:"center",columnGap:2,pb:2,children:[e!=null&&e.badge?i.jsx(n,{alt:"school logo",loading:"lazy",srcSet:`/images/users/${e==null?void 0:e.badge}`,sx:{width:40,height:40}}):i.jsx(H,{sx:{width:40,height:40}}),i.jsxs(c,{justifyContent:"flex-start",alignItems:"flex-start",children:[i.jsx(o,{variant:"h6",children:M.startCase(e==null?void 0:e.name)}),i.jsx(o,{variant:"caption",children:e==null?void 0:e.address}),i.jsx(o,{variant:"caption",children:e==null?void 0:e.location}),i.jsx(o,{variant:"caption",fontStyle:"italic",children:e==null?void 0:e.motto})]})]}),i.jsx(z,{}),i.jsx(o,{paragraph:!0,sx:{textAlign:"center",textDecoration:"underline",color:"primary",width:"100%",padding:"4px"},variant:"h6",children:"Fees Report"}),i.jsxs(c,{justifyContent:"center",alignItems:"center",spacing:1,pt:2,children:[i.jsx(n,{src:(a==null?void 0:a.profile)===""||(a==null?void 0:a.profile)===void 0||(a==null?void 0:a.profile)===null?null:a==null?void 0:a.profile,sx:{width:40,height:40,alignSelf:"center"}}),i.jsx(o,{children:a==null?void 0:a.fullName}),i.jsx(o,{variant:"caption",children:a==null?void 0:a.levelType})]}),i.jsx("div",{style:{flexGrow:1},children:i.jsx(S,{title:"Fees History",icon:l,addButtonImg:l,addButtonMessage:"No Fees History Found",exportFileName:a==null?void 0:a.fullName,columns:w,data:a==null?void 0:a.payment,actions:[],options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})}),i.jsx(o,{style:{fontSize:"10px",fontStyle:"italic"},children:"Powered by FrebbyTech Consults (0543772591)"})]})})}const L=()=>{var m,h,x,g,d,f,j;const{userState:{session:a}}=y.useContext(V),{state:s}=I(),[t]=b(),p=y.useRef(),r=B({queryKey:["student-fee-history",t.get("_id"),t.get("level_id")],queryFn:()=>T({sessionId:a.sessionId,termId:a==null?void 0:a.termId,studentId:t.get("_id"),levelId:t.get("level_id"),feeId:t.get("fid")}),enabled:!!t.get("_id")&&!!t.get("level_id")});return i.jsxs(i.Fragment,{children:[i.jsx(u,{to:s==null?void 0:s.prevPath,color:"primary.main"}),i.jsx(C,{title:((m=r==null?void 0:r.data)==null?void 0:m.fullName)||"",subtitle:(h=r==null?void 0:r.data)==null?void 0:h.levelType,color:"primary.main",icon:i.jsx(n,{srcSet:((x=r==null?void 0:r.data)==null?void 0:x.profile)===void 0||((g=r==null?void 0:r.data)==null?void 0:g.profile)===""?null:(d=r==null?void 0:r.data)==null?void 0:d.profile,sx:{width:70,height:70}})}),i.jsx(N,{children:i.jsx(i.Fragment,{children:i.jsx(S,{title:"Fees History",subtitle:"Showing details of student fees transactions",search:!0,icon:l,addButtonImg:l,addButtonMessage:"No Fees History Found",isLoading:r.isLoading,exportFileName:(f=r==null?void 0:r.data)==null?void 0:f.fullName,columns:w,data:(j=r==null?void 0:r.data)==null?void 0:j.payment,actions:[],handleRefresh:r.refetch,autoCompleteComponent:i.jsx(c,{direction:"row",spacing:1,children:i.jsx(P,{trigger:()=>i.jsx(R,{startIcon:i.jsx(F,{}),variant:"contained",children:"Print Report"}),content:()=>p.current})}),options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})})}),i.jsx("div",{ref:p,className:"print-container",children:i.jsx(k,{student:r==null?void 0:r.data})}),r.isLoading&&i.jsx(E,{})]})};L.propTypes={open:v.bool,setOpen:v.func};export{L as default};

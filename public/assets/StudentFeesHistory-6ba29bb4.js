import{j as e,m as o,V as c,Z as T,q as l,_ as b,D as S,G as C,cl as I,R as v,r as t,U as w,an as H,g as D,i as B,C as u,t as P,Y as E,B as F,cm as L,l as M}from"./index-5b8f5a53.js";import{f as O}from"./currentFeeAPI-5ac33c46.js";const n="/assets/history_ico-167fe80a.svg",s=JSON.parse(localStorage.getItem("@school_info"));function U({student:i}){return e.jsx("div",{children:e.jsxs(o,{spacing:1,sx:{maxWidth:"8.5in",minHeight:"11in",margin:"auto",padding:"8px"},children:[e.jsxs(o,{direction:"row",justifyContent:"flex-start",alignItems:"center",columnGap:2,pb:2,children:[s!=null&&s.badge?e.jsx(c,{alt:"school logo",loading:"lazy",srcSet:`/images/users/${s==null?void 0:s.badge}`,sx:{width:40,height:40}}):e.jsx(T,{sx:{width:40,height:40}}),e.jsxs(o,{justifyContent:"flex-start",alignItems:"flex-start",children:[e.jsx(l,{variant:"h6",children:b.startCase(s==null?void 0:s.name)}),e.jsx(l,{variant:"caption",children:s==null?void 0:s.address}),e.jsx(l,{variant:"caption",children:s==null?void 0:s.location}),e.jsx(l,{variant:"caption",fontStyle:"italic",children:s==null?void 0:s.motto})]})]}),e.jsx(S,{}),e.jsx(l,{paragraph:!0,sx:{textAlign:"center",textDecoration:"underline",color:"primary",width:"100%",padding:"4px"},variant:"h6",children:"Fees Report"}),e.jsxs(o,{justifyContent:"center",alignItems:"center",spacing:1,pt:2,children:[e.jsx(c,{src:(i==null?void 0:i.profile)===""||(i==null?void 0:i.profile)===void 0||(i==null?void 0:i.profile)===null?null:i==null?void 0:i.profile,sx:{width:40,height:40,alignSelf:"center"}}),e.jsx(l,{children:i==null?void 0:i.fullName}),e.jsx(l,{variant:"caption",children:i==null?void 0:i.levelType})]}),e.jsx("div",{style:{flexGrow:1},children:e.jsx(C,{title:"Fees History",icon:n,addButtonImg:n,addButtonMessage:"No Fees History Found",exportFileName:i==null?void 0:i.fullName,columns:I,data:i==null?void 0:i.payment,actions:[],options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})}),e.jsx(l,{style:{fontSize:"10px",fontStyle:"italic"},children:"Powered by FrebbyTech Consults (0543772591)"})]})})}const W=()=>{var g,h,m,d,j,y,f;const{userState:{session:i}}=t.useContext(w),x=t.useRef(),{studentState:{viewStudentFeeHistory:{open:N,data:r}},studentDispatch:R}=t.useContext(H),a=D({queryKey:["student-fee-history",r==null?void 0:r.id,r==null?void 0:r.level],queryFn:()=>O({sessionId:i.sessionId,termId:i==null?void 0:i.termId,studentId:r==null?void 0:r.id,levelId:r==null?void 0:r.level,feeId:r==null?void 0:r.feeId}),enabled:!!(r!=null&&r.id)&&!!(r!=null&&r.level)}),p=()=>{R({type:"viewStudentFeeHistory",payload:{open:!1,data:{}}})};return e.jsxs(B,{maxWidth:"md",fullWidth:!0,open:N,onClose:p,children:[e.jsx(u,{title:"Student Fee Payment ",onClose:p}),e.jsx(P,{children:e.jsx(E,{trigger:()=>e.jsx(F,{startIcon:e.jsx(L,{}),variant:"contained",children:"Print Report"}),content:()=>x.current})}),e.jsxs(M,{children:[a.isLoading&&e.jsx(l,{children:"Please Wait....."}),e.jsxs(o,{justifyContent:"center",alignItems:"center",spacing:2,children:[e.jsx(c,{srcSet:((g=a==null?void 0:a.data)==null?void 0:g.profile)===void 0||((h=a==null?void 0:a.data)==null?void 0:h.profile)===""?null:(m=a==null?void 0:a.data)==null?void 0:m.profile,sx:{width:70,height:70}}),e.jsx(l,{variant:"h5",children:(d=a==null?void 0:a.data)==null?void 0:d.fullName}),e.jsx(l,{variant:"caption",children:(j=a==null?void 0:a.data)==null?void 0:j.levelType}),e.jsx(S,{})]}),e.jsx(e.Fragment,{children:e.jsx(C,{title:"Fees History",icon:n,addButtonImg:n,addButtonMessage:"No Fees History Found",isLoading:a.isLoading,exportFileName:(y=a==null?void 0:a.data)==null?void 0:y.fullName,columns:I,data:(f=a==null?void 0:a.data)==null?void 0:f.payment,actions:[],handleRefresh:a.refetch,options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})})]}),e.jsx("div",{ref:x,className:"print-container",children:e.jsx(U,{student:a==null?void 0:a.data})})]})};W.propTypes={open:v.bool,setOpen:v.func};export{W as S};

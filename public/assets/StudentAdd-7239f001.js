import{O as Ce,j as e,r as T,U as ot,S as fe,g as tt,a0 as ue,bp as Tt,i as Pe,z as St,l as Ie,m as P,n as R,T as g,t as we,B as G,an as Y,F as be,bq as Ct,v as $,q as I,b5 as B,aW as Pt,aI as Q,b6 as ge,b7 as Se,br as It,V as H,bs as nt,bt as wt,aD as zt,aE as vt,u as lt,h as pt,C as dt,Y as Wt,_ as je,a as f,w as mt,x as ct,f as yt,bu as xt,bv as At,bw as Dt,bx as Bt,a9 as Nt,by as Lt,E as Rt,$ as Ft,aS as Ot,bz as Et,aq as kt,aB as Mt,bA as Vt,bB as _t,a2 as qt,bC as Gt,bD as Ut,G as Ht,J as Yt,K as at,A as $t,aa as Kt,ad as it}from"./index-5b8f5a53.js";import{g as Xt}from"./termAPI-9f54dd5f.js";import{M as K}from"./MedicalAllergy-c4b3733f.js";import{p as Qt,a as Jt}from"./studentAPI-52d9bd23.js";import{A as Zt}from"./ArrowForwardRounded-82c05fc9.js";import{S as en}from"./School-75c2090c.js";import{N as tn}from"./NoteRounded-a4f6fc26.js";import{A as rt}from"./AnimatedContainer-c7efad6f.js";import{I as nn}from"./studentColumns-2ede27bc.js";const an=Ce(e.jsx("path",{d:"M20 21v-3h3v-2h-3v-3h-2v3h-3v2h3v3zm-4.97.5H5.66c-.72 0-1.38-.38-1.73-1l-2.36-4.1c-.36-.62-.35-1.38.01-2L7.92 3.49c.36-.61 1.02-.99 1.73-.99h4.7c.71 0 1.37.38 1.73.99l4.48 7.71c-.5-.13-1.02-.2-1.56-.2-.28 0-.56.02-.84.06L14.35 4.5h-4.7L3.31 15.41l2.35 4.09h7.89c.35.77.85 1.45 1.48 2M13.34 15c-.22.63-.34 1.3-.34 2H7.25l-.73-1.27 4.58-7.98h1.8l2.53 4.42c-.56.42-1.05.93-1.44 1.51l-2-3.49L9.25 15z"}),"AddToDrive"),ze=Ce(e.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),rn=Ce(e.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0z"}),"CheckRounded");function sn({open:y,setOpen:s}){const{userState:{session:c}}=T.useContext(ot),{schoolSessionDispatch:b}=T.useContext(fe),[t,a]=T.useState({_id:"",levelType:"",students:[]}),[i,r]=T.useState({termId:"",sessionId:"",label:""}),n=tt({queryKey:["terms"],queryFn:()=>Xt(),enabled:!!(c!=null&&c.sessionId),select:x=>x.filter(({to:l})=>ue(new Date(c.to))>ue(new Date(l))).map(({termId:l,sessionId:p,academicYear:h,term:w})=>({termId:l,sessionId:p,label:`${h},${w}`}))}),o=tt({queryKey:["previous-levels",i==null?void 0:i.termId],queryFn:()=>Tt(i),enabled:!!(i!=null&&i.termId),select:x=>x.map(({_id:u,level:l,students:p})=>({_id:u,levelType:`${l.name}${l.type}`,students:p}))}),j=()=>{var x;((x=t==null?void 0:t.students)==null?void 0:x.length)!==0&&b({type:"openAddStudentFileDialog",payload:{data:t==null?void 0:t.students,type:"previous"}})};return e.jsxs(Pe,{open:y,maxWidth:"xs",fullWidth:!0,children:[e.jsx(St,{children:" Students from Session"}),e.jsx(Ie,{children:e.jsxs(P,{spacing:2,paddingY:2,children:[e.jsx(R,{size:"small",options:n.data??[],noOptionsText:"No session available",disableClearable:!0,fullWidth:!0,value:i,onChange:(x,u)=>{a({_id:"",levelType:"",students:[]}),r(u)},isOptionEqualToValue:(x,u)=>x.termId===u.termId||u.termId===""||u.termId===null||u.termId===void 0,getOptionLabel:x=>x.label||"",renderInput:x=>e.jsx(g,{...x,label:"Select School Session"})}),e.jsx(R,{size:"small",options:(o==null?void 0:o.data)??[],noOptionsText:"No level available",disableClearable:!0,fullWidth:!0,value:t,onChange:(x,u)=>a(u),isOptionEqualToValue:(x,u)=>x._id===u._id||u._id===""||u._id===null||u._id===void 0,getOptionLabel:x=>x.levelType||"",renderInput:x=>e.jsx(g,{...x,label:"Select Level"})})]})}),e.jsxs(we,{children:[e.jsx(G,{onClick:()=>s(!1),children:"Cancel"}),e.jsx(G,{variant:"contained",onClick:j,disabled:!(t!=null&&t._id),children:"Load Students"})]})]})}const ht=({setMode:y})=>{const{studentState:{newStudent:{personal:s}},studentDispatch:c}=T.useContext(Y),[b,t]=T.useState(ue(s==null?void 0:s.dateofbirth)),a=(i,r)=>{i.dateofbirth=ue(b).format("L"),c({type:"addNewStudent",payload:{personal:{...i,isCompleted:!0}}}),r.setSubmitting(!1),y("photo-info")};return e.jsx(be,{initialValues:s,onSubmit:a,enableReinitialize:!0,validationSchema:Ct,children:({values:i,errors:r,touched:n,setFieldValue:o,handleChange:j,handleSubmit:x,isSubmitting:u})=>e.jsxs(P,{py:2,spacing:2,children:[e.jsx(P,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{loading:u,variant:"contained",color:"primary",onClick:x,endIcon:e.jsx(ze,{}),children:"Continue"})}),e.jsx(I,{variant:"h5",color:"primary.main",bgcolor:"whitesmoke",p:1,sx:{fontWeight:"bold"},children:"Personal Details"}),e.jsx(g,{label:"Student ID",type:"text",sx:{maxWidth:300},size:"small",value:i.indexnumber,onChange:j("indexnumber"),error:!!(n.indexnumber&&r.indexnumber),helperText:n.indexnumber&&r.indexnumber}),e.jsxs(B,{children:[e.jsx(g,{label:"Firstname",type:"text",fullWidth:!0,size:"small",value:i.firstname,onChange:j("firstname"),error:!!(n.firstname&&r.firstname),helperText:n.firstname&&r.firstname}),e.jsx(g,{label:"Surname",fullWidth:!0,size:"small",value:i.surname,onChange:j("surname"),error:!!(n.surname&&r.surname),helperText:n.surname&&r.surname}),e.jsx(g,{label:"Othername",fullWidth:!0,size:"small",value:i.othername,onChange:j("othername"),error:!!(n.othername&&r.othername),helperText:n.othername&&r.othername})]}),e.jsxs(B,{children:[e.jsx(Pt,{label:"Date of Birth",date:b,setDate:t,disableFuture:!0,error:!!(n.dateofbirth&&r.dateofbirth),helperText:n.dateofbirth&&r.dateofbirth}),e.jsxs(g,{label:"Gender",select:!0,fullWidth:!0,size:"small",value:i.gender,onChange:j("gender"),error:!!(n.gender&&r.gender),helperText:n.gender&&r.gender,children:[e.jsx(Q,{value:"male",children:"Male"}),e.jsx(Q,{value:"female",children:"Female"})]})]}),e.jsxs(B,{children:[e.jsx(g,{label:"Email",fullWidth:!0,size:"small",row:3,maxRows:3,value:i.email,onChange:j("email"),error:!!(n.email&&r.email),helperText:n.email&&r.email}),e.jsx(g,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:i.phonenumber,onChange:j("phonenumber"),error:!!(n.phonenumber&&r.phonenumber),helperText:n.phonenumber&&r.phonenumber})]}),e.jsx(g,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,value:i.address,onChange:j("address"),error:!!(n.address&&r.address),helperText:n.address&&r.address}),e.jsxs(B,{children:[e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:ge,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:l=>l||"",value:i.residence,onChange:(l,p)=>o("residence",p),renderInput:l=>e.jsx(g,{...l,label:"Residence",fullWidth:!0,size:"small",error:!!(n.residence&&r.residence),helperText:n.residence&&r.residence})}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",loadingText:"Please wait....",options:Se,noOptionsText:"No Nationality available",getOptionLabel:l=>l||"",value:i.nationality,onChange:(l,p)=>o("nationality",p),renderInput:l=>e.jsx(g,{...l,label:"Nationality",fullWidth:!0,size:"small",error:!!(n.nationality&&r.nationality),helperText:n.nationality&&r.nationality})})]})]})})};ht.propTypes={};const ut=({setMode:y})=>{const{studentState:{newStudent:{parent:s}},studentDispatch:c}=T.useContext(Y),b=(t,a)=>{c({type:"addNewStudent",payload:{parent:{...t,isCompleted:!0}}}),a.setSubmitting(!1),y("medical-info")};return e.jsx(be,{initialValues:s,onSubmit:b,enableReinitialize:!0,validationSchema:It,children:({values:t,errors:a,touched:i,setFieldValue:r,handleChange:n,handleSubmit:o,isSubmitting:j})=>{var x,u,l,p,h,w,N,V,_,M,d,m,L,F,q,v,z,O,E,k,J,Z,ee,te,ne,ae,ie,re,se,oe,le,pe,de,me,ce,ye,xe,Te,U,ve,We,Ae,De,Be,Ne,Le,Re,Fe,Oe,Ee,ke,Me,Ve,_e,qe,Ge,Ue,He,Ye,$e,Ke,Xe,Qe,Je,Ze,et;return e.jsxs(P,{py:2,spacing:1,children:[e.jsxs("div",{style:{maxHeight:350,overflowY:"auto"},children:[e.jsxs(P,{py:2,spacing:1,children:[e.jsxs(P,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Parent/Guardian Information"}),e.jsx(H,{sx:{width:30,height:30,bgcolor:"primary.main"},children:"1"})]}),e.jsxs(B,{children:[e.jsx(g,{label:"Firstname",type:"text",fullWidth:!0,size:"small",value:(x=t==null?void 0:t.parent1)==null?void 0:x.firstname,onChange:n("parent1.firstname"),error:!!((u=i.parent1)!=null&&u.firstname&&((l=a.parent1)!=null&&l.firstname)),helperText:((p=i.parent1)==null?void 0:p.firstname)&&((h=a.parent1)==null?void 0:h.firstname)}),e.jsx(g,{label:"Surname",fullWidth:!0,size:"small",value:(w=t==null?void 0:t.parent1)==null?void 0:w.surname,onChange:n("parent1.surname"),error:!!((N=i.parent1)!=null&&N.surname&&((V=a.parent1)!=null&&V.surname)),helperText:((_=i.parent1)==null?void 0:_.surname)&&((M=a.parent1)==null?void 0:M.surname)})]}),e.jsxs(B,{children:[e.jsxs(g,{label:"Gender",select:!0,fullWidth:!0,size:"small",value:(d=t==null?void 0:t.parent1)==null?void 0:d.gender,onChange:n("parent1.gender"),error:!!((m=i.parent1)!=null&&m.gender&&((L=a.parent1)!=null&&L.gender)),helperText:((F=i.parent1)==null?void 0:F.gender)&&((q=a.parent1)==null?void 0:q.gender),children:[e.jsx(Q,{value:"male",children:"Male"}),e.jsx(Q,{value:"female",children:"Female"})]}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:nt,loadingText:"Please wait....",noOptionsText:"No Relationship available",getOptionLabel:S=>S||"",value:(v=t==null?void 0:t.parent1)==null?void 0:v.relationship,onInputChange:(S,C)=>r("parent1.relationship",C),renderInput:S=>{var C,W,A,D;return e.jsx(g,{...S,label:"Relationship",fullWidth:!0,size:"small",error:!!((C=i.parent1)!=null&&C.relationship&&((W=a.parent1)!=null&&W.relationship)),helperText:((A=i.parent1)==null?void 0:A.relationship)&&((D=a.parent1)==null?void 0:D.relationship)})}})]}),e.jsxs(B,{children:[e.jsx(g,{label:"Email",fullWidth:!0,size:"small",row:3,maxRows:3,value:(z=t==null?void 0:t.parent1)==null?void 0:z.email,onChange:n("parent1.email"),error:!!((O=i.parent1)!=null&&O.email&&((E=a.parent1)!=null&&E.email)),helperText:((k=i.parent1)==null?void 0:k.email)&&((J=a.parent1)==null?void 0:J.email)}),e.jsx(g,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:(Z=t==null?void 0:t.parent1)==null?void 0:Z.phonenumber,onChange:n("parent1.phonenumber"),error:!!((ee=i.parent1)!=null&&ee.phonenumber&&((te=a.parent1)!=null&&te.phonenumber)),helperText:((ne=i.parent1)==null?void 0:ne.phonenumber)&&((ae=a.parent1)==null?void 0:ae.phonenumber)})]}),e.jsx(g,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,multiline:!0,value:(ie=t==null?void 0:t.parent1)==null?void 0:ie.address,onChange:n("parent1.address"),error:!!((re=i.parent1)!=null&&re.address&&((se=a.parent1)!=null&&se.address)),helperText:((oe=i.parent1)==null?void 0:oe.address)&&((le=a.parent1)==null?void 0:le.address)}),e.jsxs(B,{children:[e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:ge,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:S=>S||"",value:(pe=t==null?void 0:t.parent1)==null?void 0:pe.residence,onChange:(S,C)=>r("parent1.residence",C),renderInput:S=>{var C,W,A,D;return e.jsx(g,{...S,label:"Residence",fullWidth:!0,size:"small",error:!!((C=i.parent1)!=null&&C.residence&&((W=a.parent1)!=null&&W.residence)),helperText:((A=i.parent1)==null?void 0:A.residence)&&((D=a.parent1)==null?void 0:D.residence)})}}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",loadingText:"Please wait....",options:Se,noOptionsText:"No Nationality available",getOptionLabel:S=>S||"",value:(de=t==null?void 0:t.parent1)==null?void 0:de.nationality,onChange:(S,C)=>r("parent1.nationality",C),renderInput:S=>{var C,W,A,D;return e.jsx(g,{...S,label:"Nationality",fullWidth:!0,size:"small",error:!!((C=i.parent1)!=null&&C.nationality&&((W=a.parent1)!=null&&W.nationality)),helperText:((A=i.parent1)==null?void 0:A.nationality)&&((D=a.parent1)==null?void 0:D.nationality)})}})]})]}),e.jsxs(P,{py:2,spacing:1,children:[e.jsxs(P,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Parent/Guardian Information"}),e.jsx(H,{sx:{width:30,height:30,bgcolor:"primary.main"},children:"2"})]}),e.jsxs(B,{children:[e.jsx(g,{label:"Firstname",type:"text",fullWidth:!0,size:"small",value:(me=t==null?void 0:t.parent2)==null?void 0:me.firstname,onChange:n("parent2.firstname"),error:!!((ce=i.parent2)!=null&&ce.firstname&&((ye=a.parent2)!=null&&ye.firstname)),helperText:((xe=i.parent2)==null?void 0:xe.firstname)&&((Te=a.parent2)==null?void 0:Te.firstname)}),e.jsx(g,{label:"Surname",fullWidth:!0,size:"small",value:(U=t==null?void 0:t.parent2)==null?void 0:U.surname,onChange:n("parent2.surname"),error:!!((ve=i.parent2)!=null&&ve.surname&&((We=a.parent2)!=null&&We.surname)),helperText:((Ae=i.parent2)==null?void 0:Ae.surname)&&((De=a.parent2)==null?void 0:De.surname)})]}),e.jsxs(B,{children:[e.jsxs(g,{label:"Gender",select:!0,fullWidth:!0,size:"small",value:(Be=t==null?void 0:t.parent2)==null?void 0:Be.gender,onChange:n("parent2.gender"),error:!!((Ne=i.parent2)!=null&&Ne.gender&&((Le=a.parent2)!=null&&Le.gender)),helperText:((Re=i.parent2)==null?void 0:Re.gender)&&((Fe=a.parent2)==null?void 0:Fe.gender),children:[e.jsx(Q,{value:"male",children:"Male"}),e.jsx(Q,{value:"female",children:"Female"})]}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:nt,loadingText:"Please wait....",noOptionsText:"No Relationship available",getOptionLabel:S=>S||"",value:(Oe=t==null?void 0:t.parent2)==null?void 0:Oe.relationship,onInputChange:(S,C)=>r("parent2.relationship",C),renderInput:S=>{var C,W,A,D;return e.jsx(g,{...S,label:"Relationship",fullWidth:!0,size:"small",error:!!((C=i.parent2)!=null&&C.relationship&&((W=a.parent2)!=null&&W.relationship)),helperText:((A=i.parent2)==null?void 0:A.relationship)&&((D=a.parent2)==null?void 0:D.relationship)})}})]}),e.jsxs(B,{children:[e.jsx(g,{label:"Email",fullWidth:!0,size:"small",row:3,maxRows:3,value:(Ee=t==null?void 0:t.parent2)==null?void 0:Ee.email,onChange:n("parent2.email"),error:!!((ke=i.parent2)!=null&&ke.email&&((Me=a.parent2)!=null&&Me.email)),helperText:((Ve=i.parent2)==null?void 0:Ve.email)&&((_e=a.parent2)==null?void 0:_e.email)}),e.jsx(g,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:(qe=t==null?void 0:t.parent2)==null?void 0:qe.phonenumber,onChange:n("parent2.phonenumber"),error:!!((Ge=i.parent2)!=null&&Ge.phonenumber&&((Ue=a.parent2)!=null&&Ue.phonenumber)),helperText:((He=i.parent2)==null?void 0:He.phonenumber)&&((Ye=a.parent2)==null?void 0:Ye.phonenumber)})]}),e.jsx(g,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,multiline:!0,value:($e=t==null?void 0:t.parent2)==null?void 0:$e.address,onChange:n("parent2.address"),error:!!((Ke=i.parent2)!=null&&Ke.address&&((Xe=a.parent2)!=null&&Xe.address)),helperText:((Qe=i.parent2)==null?void 0:Qe.address)&&((Je=a.parent2)==null?void 0:Je.address)}),e.jsxs(B,{children:[e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:ge,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:S=>S||"",value:(Ze=t==null?void 0:t.parent2)==null?void 0:Ze.residence,onChange:(S,C)=>r("parent2.residence",C),renderInput:S=>{var C,W,A,D;return e.jsx(g,{...S,label:"Residence",fullWidth:!0,size:"small",error:!!((C=i.parent2)!=null&&C.residence&&((W=a.parent2)!=null&&W.residence)),helperText:((A=i.parent2)==null?void 0:A.residence)&&((D=a.parent2)==null?void 0:D.residence)})}}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",loadingText:"Please wait....",options:Se,noOptionsText:"No Nationality available",getOptionLabel:S=>S||"",value:(et=t==null?void 0:t.parent2)==null?void 0:et.nationality,onChange:(S,C)=>r("parent2.nationality",C),renderInput:S=>{var C,W,A,D;return e.jsx(g,{...S,label:"Nationality",fullWidth:!0,size:"small",error:!!((C=i.parent2)!=null&&C.nationality&&((W=a.parent2)!=null&&W.nationality)),helperText:((A=i.parent2)==null?void 0:A.nationality)&&((D=a.parent2)==null?void 0:D.nationality)})}})]})]})]}),e.jsx(P,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{loading:j,variant:"contained",color:"primary",onClick:o,children:"Save & Continue"})})]})}})},gt=({setMode:y})=>{const{studentState:{newStudent:{medical:s}},studentDispatch:c}=T.useContext(Y),b=(t,a)=>{c({type:"addNewStudent",payload:{medical:{...t,isCompleted:!0}}}),a.setSubmitting(!1),y("academic-info")};return e.jsx(be,{initialValues:s,onSubmit:b,enableReinitialize:!0,validationSchema:wt,children:({values:t,errors:a,touched:i,handleChange:r,handleSubmit:n,isSubmitting:o})=>{var j,x,u,l,p,h,w,N,V,_,M,d,m,L,F;return e.jsxs(P,{padding:2,spacing:1,children:[e.jsx(P,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{loading:o,variant:"contained",color:"primary",onClick:n,endIcon:e.jsx(ze,{}),children:"Continue"})}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Medical Records"}),e.jsx(I,{variant:"body2",color:"primary.main",children:"(Kindly note that this section, even though required, will not affect your child’s admission into the school)."}),e.jsxs(P,{width:{xs:"100%",md:"80%"},py:5,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(K,{title:"1. Heart Disease",value:t.heartDisease,setValue:r("heartDisease")}),e.jsx(K,{title:"2. Visual Impairment",value:t.visualImpairment,setValue:r("visualImpairment")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(K,{title:"3. Asthma",value:t.asthma,setValue:r("asthma")}),e.jsx(K,{title:"4. Hearing Impairment",value:t.hearingImpairment,setValue:r("hearingImpairment")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(K,{title:"5. Siezures",value:t.siezures,setValue:r("siezures")}),e.jsx(K,{title:"6. Physical Disability",value:t.physicalDisability,setValue:r("physicalDisability")})]})]}),e.jsxs(P,{py:2,spacing:1,children:[e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Emergency Contact"}),e.jsxs(B,{children:[e.jsx(g,{label:"Fullname",type:"text",fullWidth:!0,size:"small",value:(j=t==null?void 0:t.emergencyContact)==null?void 0:j.fullname,onChange:r("emergencyContact.fullname"),error:!!((x=i==null?void 0:i.emergencyContact)!=null&&x.fullname&&((u=a==null?void 0:a.emergencyContact)!=null&&u.fullname)),helperText:((l=i==null?void 0:i.emergencyContact)==null?void 0:l.fullname)&&((p=a==null?void 0:a.emergencyContact)==null?void 0:p.fullname)}),e.jsx(g,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:(h=t==null?void 0:t.emergencyContact)==null?void 0:h.phonenumber,onChange:r("emergencyContact.phonenumber"),error:!!((w=i==null?void 0:i.emergencyContact)!=null&&w.phonenumber&&((N=a==null?void 0:a.emergencyContact)!=null&&N.phonenumber)),helperText:((V=i==null?void 0:i.emergencyContact)==null?void 0:V.phonenumber)&&((_=a==null?void 0:a.emergencyContact)==null?void 0:_.phonenumber)})]}),e.jsx(B,{children:e.jsx(g,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,value:(M=t==null?void 0:t.emergencyContact)==null?void 0:M.address,onChange:r("emergencyContact.address"),error:!!((d=i==null?void 0:i.emergencyContact)!=null&&d.address&&((m=a==null?void 0:a.emergencyContact)!=null&&m.address)),helperText:((L=i==null?void 0:i.emergencyContact)==null?void 0:L.address)&&((F=a==null?void 0:a.emergencyContact)==null?void 0:F.address)})})]})]})}})};gt.propTypes={};function X({title:y,value:s}){return e.jsxs(P,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:3,children:[e.jsx(I,{textAlign:"right",fontSize:11,children:y}),e.jsx(zt,{sx:{fontSize:11},value:s,control:e.jsx(vt,{size:"small",checked:!0}),label:s,slotProps:{typography:{sx:{fontSize:11}}}})]})}function on({open:y,setOpen:s,setMode:c}){var F,q,v,z,O,E,k,J,Z,ee,te,ne,ae,ie,re,se,oe,le,pe,de,me,ce,ye,xe;const b=lt(),t=JSON.parse(localStorage.getItem("@school_info")),{studentState:{newStudent:{personal:a,photo:i,medical:r,parent:n,academic:o},studentDispatch:j}}=T.useContext(Y),{schoolSessionDispatch:x}=T.useContext(fe),u=T.useRef(),[l,p]=T.useState(""),[h,w]=T.useState(!1),{mutateAsync:N,isLoading:V}=pt({mutationFn:Qt}),_=()=>{a.profile=i==null?void 0:i.profile,N({personal:a,medical:r,parent:n,academic:o},{onSettled:()=>{b.invalidateQueries(["students-by-current-level"]),b.invalidateQueries(["all-students"])},onSuccess:U=>{U&&(x(mt("New Student Added")),w(!0),p(U),localStorage.removeItem("@student"))},onError:U=>{x(ct(U))}})},M=()=>{l?(c("personal-info"),s(!1),j({type:"addNewStudent",payload:{}})):s(!1)},d={fontSize:11,color:"primary"},m={fontSize:10},L={width:"100%",borderBottom:"1px solid black",backgroundColor:"black",color:"#fff",padding:"2px"};return e.jsxs(Pe,{open:y,fullWidth:!0,maxWidth:"md",onClose:()=>s(!1),children:[e.jsx(dt,{title:"Admission Form",onClose:M}),e.jsxs(we,{children:[e.jsx(Wt,{trigger:()=>e.jsx(G,{variant:"outlined",children:"Print Form"}),content:()=>u.current,documentTitle:"Admission"}),e.jsx($,{loading:V,variant:"contained",color:"primary",onClick:_,children:"Save Data"})]}),e.jsx(Ie,{children:e.jsxs(P,{className:"admission-form",ref:u,spacing:1,sx:{maxWidth:"8.5in",minHeight:"11in",margin:"auto",padding:"16px",border:"1px solid lightgray",position:"relative",backgroundSize:"contain",backgroundPosition:"center center !important"},children:[l&&e.jsx("small",{style:{position:"absolute",bottom:"0",right:0,paddingRight:"8px",paddingBottom:"8px"},children:l}),e.jsxs(P,{direction:"row",justifyContent:"center",alignItems:"flex-start",columnGap:2,children:[t!=null&&t.badge?e.jsx(H,{alt:"school logo",loading:"lazy",srcSet:`/images/users/${t==null?void 0:t.badge}`,sx:{width:70,height:70}}):e.jsx(e.Fragment,{}),e.jsxs(P,{justifyContent:"center",alignItems:"flex-end",width:"100%",children:[e.jsx(I,{variant:"h6",children:je.startCase(t==null?void 0:t.name)}),e.jsx(I,{variant:"caption",children:t==null?void 0:t.address}),e.jsx(I,{variant:"caption",children:t==null?void 0:t.location}),e.jsx(I,{variant:"caption",fontStyle:"italic",children:t==null?void 0:t.motto}),e.jsx(I,{variant:"h6",sx:{alignSelf:"flex-start"},children:"Admission Form"})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:e.jsx(H,{variant:"square",src:i==null?void 0:i.profile,sx:{alignSelf:"center",width:80,height:80}})}),e.jsxs("div",{style:{paddingBottom:"8px"},children:[e.jsx("legend",{style:L,children:"Personal Data"}),e.jsx(f,{secondary:"Student ID",primary:a==null?void 0:a.indexnumber,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Full Name",primary:`${a==null?void 0:a.surname} ${a==null?void 0:a.firstname} ${a==null?void 0:a.othername}`,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Date of Birth",primary:ue(new Date(a==null?void 0:a.dateofbirth)).format("LL"),primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Gender",primary:a==null?void 0:a.gender,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Email Address",primary:a==null?void 0:a.email,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Phone Number",primary:a==null?void 0:a.phonenumber,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Residence",primary:a==null?void 0:a.residence,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Nationality",primary:a==null?void 0:a.nationality,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Address",primary:a==null?void 0:a.address,primaryTypographyProps:d,secondaryTypographyProps:m})]})]}),e.jsxs("div",{style:{paddingBottom:"8px"},children:[e.jsx("legend",{style:L,children:"Parent/Guardian Information"}),e.jsxs(P,{children:[e.jsx(I,{color:"primary.main",sx:{fontWeight:"bold",fontSize:11},children:"Parent 1 / Guardian 1"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Surname",primary:(F=n==null?void 0:n.parent1)==null?void 0:F.surname,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"First Name",primary:(q=n==null?void 0:n.parent1)==null?void 0:q.firstname,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Relationship",primary:(v=n==null?void 0:n.parent1)==null?void 0:v.relationship,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Gender",primary:(z=n==null?void 0:n.parent1)==null?void 0:z.gender,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Email Address",primary:(O=n==null?void 0:n.parent1)==null?void 0:O.email,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Phone Number",primary:(E=n==null?void 0:n.parent1)==null?void 0:E.phonenumber,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Residence",primary:(k=n==null?void 0:n.parent1)==null?void 0:k.residence,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Nationality",primary:(J=n==null?void 0:n.parent1)==null?void 0:J.nationality,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Address",primary:(Z=n==null?void 0:n.parent1)==null?void 0:Z.address,primaryTypographyProps:d,secondaryTypographyProps:m})]})]}),e.jsxs(P,{children:[e.jsx(I,{color:"primary.main",sx:{fontWeight:"bold",fontSize:11},children:"Parent 2 / Guardian 2"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Surname",primary:(ee=n==null?void 0:n.parent2)==null?void 0:ee.surname,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"First Name",primary:(te=n==null?void 0:n.parent2)==null?void 0:te.firstname,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Relationship",primary:(ne=n==null?void 0:n.parent2)==null?void 0:ne.relationship,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Gender",primary:(ae=n==null?void 0:n.parent2)==null?void 0:ae.gender,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Email Address",primary:(ie=n==null?void 0:n.parent2)==null?void 0:ie.email,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Phone Number",primary:(re=n==null?void 0:n.parent2)==null?void 0:re.phonenumber,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Residence",primary:(se=n==null?void 0:n.parent2)==null?void 0:se.residence,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Nationality",primary:(oe=n==null?void 0:n.parent2)==null?void 0:oe.nationality,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Address",primary:(le=n==null?void 0:n.parent2)==null?void 0:le.address,primaryTypographyProps:d,secondaryTypographyProps:m})]})]})]}),e.jsxs("div",{style:{paddingBottom:"8px"},children:[e.jsx("legend",{style:L,children:"Medical Records"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(X,{title:"1. Heart Disease",value:r.heartDisease}),e.jsx(X,{title:"2. Asthma",value:r.asthma}),e.jsx(X,{title:"3. Siezures",value:r.siezures}),e.jsx(X,{title:"4. Visual Impairment",value:r.visualImpairment}),e.jsx(X,{title:"5. Hearing Impairment",value:r.hearingImpairment}),e.jsx(X,{title:"6. Physical Disability",value:r.physicalDisability})]}),e.jsx(I,{color:"primary.main",sx:{fontWeight:"bold",fontSize:11},children:"Emergency Contact"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Fullname",primary:(pe=r==null?void 0:r.emergencyContact)==null?void 0:pe.fullname,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Phone Number",primary:(de=r==null?void 0:r.emergencyContact)==null?void 0:de.phonenumber,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Address",primary:(me=r==null?void 0:r.emergencyContact)==null?void 0:me.address,primaryTypographyProps:d,secondaryTypographyProps:m})]})]}),e.jsxs("div",{style:{paddingBottom:"8px"},children:[e.jsx("legend",{style:L,children:"Academic Records"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Current Level",primary:(ce=o==null?void 0:o.level)==null?void 0:ce.type,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Previous School Name",primary:(ye=o==null?void 0:o.previousSchool)==null?void 0:ye.name,primaryTypographyProps:d,secondaryTypographyProps:m}),e.jsx(f,{secondary:"Location",primary:(xe=o==null?void 0:o.previousSchool)==null?void 0:xe.location,primaryTypographyProps:d,secondaryTypographyProps:m})]})]})]})})]})}const jt=({setMode:y})=>{var u;const{studentState:{newStudent:{academic:s}},studentDispatch:c}=T.useContext(Y),[b,t]=T.useState(!1),[a,i]=T.useState((u=s==null?void 0:s.previousSchool)==null?void 0:u.report),{levelsOption:r}=yt(),{getRootProps:n,getInputProps:o,open:j}=xt({noClick:!0,noKeyboard:!0,maxFiles:1,accept:{"image/*":[".jpeg",".png",".webp"],"application/pdf":[".pdf"]},multiple:!1,onDrop:l=>{if(!je.isEmpty(l)){const p=new FileReader;p.onload=function(h){const w=h.target.result;i(w)},p.readAsDataURL(l[0])}}}),x=(l,p)=>{l.previousSchool.report=a,c({type:"addNewStudent",payload:{academic:{...l,isCompleted:!0}}}),p.setSubmitting(!1),t(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(be,{initialValues:s,onSubmit:x,enableReinitialize:!0,validationSchema:At,children:({values:l,errors:p,touched:h,setFieldValue:w,handleChange:N,handleSubmit:V,isSubmitting:_})=>{var M,d,m,L,F,q;return e.jsxs(P,{py:2,spacing:1,children:[e.jsx(P,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{loading:_,variant:"contained",color:"primary",onClick:V,endIcon:e.jsx(ze,{}),children:"Continue"})}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Academic Records"}),e.jsx(B,{children:e.jsx(R,{fullWidth:!0,size:"small",options:r,noOptionsText:"No Level available",getOptionLabel:v=>v.type||"",isOptionEqualToValue:(v,z)=>z._id===void 0||z._id===""||z._id===v._id,value:l.level,onChange:(v,z)=>w("level",z),renderInput:v=>{var z,O,E,k;return e.jsx(g,{...v,label:"Current Level",fullWidth:!0,size:"small",error:!!((z=h==null?void 0:h.level)!=null&&z.type&&((O=p==null?void 0:p.level)!=null&&O.type)),helperText:((E=h==null?void 0:h.level)==null?void 0:E.type)&&((k=p==null?void 0:p.level)==null?void 0:k.type)})}})}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Previous School Records"}),e.jsxs(B,{children:[e.jsx(g,{label:"School Name",type:"text",fullWidth:!0,size:"small",value:(M=l==null?void 0:l.previousSchool)==null?void 0:M.name,onChange:N("previousSchool.name"),error:!!((d=h==null?void 0:h.previousSchool)!=null&&d.name&&((m=p==null?void 0:p.previousSchool)!=null&&m.name)),helperText:((L=h==null?void 0:h.previousSchool)==null?void 0:L.name)&&((F=p==null?void 0:p.previousSchool)==null?void 0:F.name)}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:ge,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:v=>v||"",value:(q=l==null?void 0:l.previousSchool)==null?void 0:q.location,onInputChange:(v,z)=>w("previousSchool.location",z),renderInput:v=>{var z,O,E,k;return e.jsx(g,{...v,label:"Location",fullWidth:!0,size:"small",error:!!((z=h==null?void 0:h.previousSchool)!=null&&z.location&&((O=p==null?void 0:p.previousSchool)!=null&&O.location)),helperText:((E=h==null?void 0:h.previousSchool)==null?void 0:E.location)&&((k=p==null?void 0:p.previousSchool)==null?void 0:k.location)})}})]}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"A copy of the most recent school report"}),e.jsx(P,{padding:2,spacing:1,...n({className:"dropzone"}),style:{border:"1px dashed black"},children:e.jsxs(P,{spacing:2,justifyContent:"center",alignItems:"center",paddingY:1,children:[e.jsx(H,{variant:"square",src:a,sx:{width:120,height:120},children:e.jsx(Dt,{})}),e.jsxs(P,{children:[e.jsx("input",{...o()}),e.jsx(I,{textAlign:"center",paragraph:!0,children:"Drag & drop your report here"}),e.jsx(G,{variant:"outlined",onClick:j,startIcon:e.jsx(an,{}),children:"Upload Report"})]}),!je.isEmpty(a)&&e.jsx("iframe",{style:{width:"100%",height:"5in"},src:a})]})})]})}}),e.jsx(on,{open:b,setOpen:t,setMode:y})]})};jt.propTypes={};const ft=({setMode:y})=>{const{studentState:{newStudent:{photo:s}},studentDispatch:c}=T.useContext(Y),[b,t]=T.useState(s==null?void 0:s.profile),{getRootProps:a,getInputProps:i,open:r}=xt({noClick:!0,noKeyboard:!0,maxFiles:1,accept:{"image/*":[".jpeg",".png"]},maxSize:2e5,multiple:!1,onDrop:o=>{if(!je.isEmpty(o)){const j=new FileReader;j.onload=function(x){const u=x.target.result;t(u)},j.readAsDataURL(o[0])}}});T.useEffect(()=>{var j;const o=JSON.parse(localStorage.getItem("@student"));if(o){t((j=o==null?void 0:o.photo)==null?void 0:j.profile);return}},[]);const n=()=>{c({type:"addNewStudent",payload:{photo:{profile:b,isCompleted:!0}}}),y("parent-info")};return e.jsxs(P,{padding:2,spacing:1,...a({className:"dropzone"}),style:{border:"1px dashed black"},children:[e.jsx(P,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{variant:"contained",size:"small",onClick:n,endIcon:e.jsx(Zt,{}),children:"Continue"})}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Upload Photo"}),e.jsxs(P,{spacing:2,justifyContent:"center",alignItems:"center",paddingY:1,children:[e.jsx(H,{variant:"square",src:b,sx:{width:120,height:120}}),e.jsxs(P,{children:[e.jsx("input",{...i()}),e.jsx(I,{textAlign:"center",paragraph:!0,children:"Drag & drop your photo here"}),e.jsx(G,{variant:"outlined",onClick:r,startIcon:e.jsx(Bt,{}),children:"Upload Image"})]})]})]})};ft.propTypes={};function he({initValue:y,title:s,isCompleted:c,showProgress:b}){return e.jsxs(e.Fragment,{children:[e.jsxs(P,{justifyContent:"center",alignItems:"çenter",children:[e.jsx(H,{sx:{alignSelf:"center",mb:1,bgcolor:c?"success.main":null},children:c?e.jsx(rn,{}):y}),e.jsx("small",{children:s})]}),b&&e.jsx(Nt,{variant:"determinate",sx:{width:80,borderRadius:1,bgcolor:c?"success.main":null},color:c?"success":"primary",value:c?100:0})]})}const ln=()=>{var s,c,b,t,a;const{studentState:{newStudent:y}}=T.useContext(Y);return e.jsxs(Lt,{sx:{width:"100%",display:"flex",justifyContent:"center",py:2},children:[e.jsx(he,{initValue:1,title:"Personal Details",showProgress:!0,isCompleted:(s=y==null?void 0:y.personal)==null?void 0:s.isCompleted}),e.jsx(he,{initValue:2,title:"Upload Photo",showProgress:!0,isCompleted:(c=y==null?void 0:y.photo)==null?void 0:c.isCompleted}),e.jsx(he,{initValue:3,title:"Guardian Information",showProgress:!0,isCompleted:(b=y==null?void 0:y.parent)==null?void 0:b.isCompleted}),e.jsx(he,{initValue:4,title:"Medical Records",showProgress:!0,isCompleted:(t=y==null?void 0:y.medical)==null?void 0:t.isCompleted}),e.jsx(he,{initValue:5,title:"Academic Records",showProgress:!1,isCompleted:(a=y==null?void 0:y.academic)==null?void 0:a.isCompleted})]})},st="text/csv",pn="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",dn="application/vnd.ms-excel",bt=()=>{const{schoolSessionDispatch:y}=T.useContext(fe),[s,c]=T.useState("personal-info"),[b,t]=T.useState(!1),a="Are you sure you want to leave this page? Your changes may not be saved.";T.useEffect(()=>{const n=o=>{o.preventDefault(),o.returnValue=a};return window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}},[]);function i(n){const o=n.target.files[0];try{const j=new FileReader;o.type===st?j.readAsBinaryString(o):j.readAsArrayBuffer(o),j.onload=function(x){let u=[];(o.type===pn||o.type===dn)&&(u=Gt(x.target.result)),o.type===st&&(u=Ut(x.target.result)),u.length!==0&&y({type:"openAddStudentFileDialog",payload:{data:u,type:"file"}})}}catch{}}const r=()=>{let n=s;switch(s){case"photo-info":n="personal-info";break;case"parent-info":n="photo-info";break;case"medical-info":n="parent-info";break;case"academic-info":n="medical-info";break;default:n="photo-info"}return n};return e.jsxs(e.Fragment,{children:[e.jsxs(e.Fragment,{children:[e.jsx(Rt,{title:"New Student",subtitle:"  Track,manage and control academic and class activities",icon:e.jsx(en,{sx:{width:30,height:30}}),color:"primary.main"}),e.jsx(ln,{}),e.jsxs(Ft,{children:[s!=="personal-info"&&e.jsx(Ot,{onClick:()=>c(r()),children:e.jsx(Et,{})}),e.jsxs(kt,{size:"small",sx:{display:"flex",justifyContent:"flex-end",pt:2},children:[e.jsx(G,{children:e.jsxs(Mt,{htmlFor:"studentFile",title:"Import students",sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,color:"primary.main",fontSize:11,cursor:"pointer"},children:[e.jsx(tn,{}),e.jsx(I,{variant:"caption",children:"From file"}),e.jsx(Vt,{type:"file",id:"studentFile",name:"studentFile",hidden:!0,inputProps:{accept:".xlsx,.xls,.csv"},onChange:i,onClick:n=>{n.target.value=null,n.currentTarget.value=null}})]})}),e.jsx(G,{startIcon:e.jsx(_t,{}),onClick:()=>t(!0),children:"From Previous Sessions"})]})]}),e.jsxs(qt,{sx:{py:2,border:"1px solid lightgray"},children:[s==="personal-info"&&e.jsx(ht,{mode:s,setMode:c}),s==="photo-info"&&e.jsx(ft,{mode:s,setMode:c}),s==="parent-info"&&e.jsx(ut,{mode:s,setMode:c}),s==="medical-info"&&e.jsx(gt,{mode:s,setMode:c}),s==="academic-info"&&e.jsx(jt,{setMode:c})]})]}),e.jsx(sn,{open:b,setOpen:t})]})};bt.propTypes={};function mn(){var p;const{userState:{session:y}}=T.useContext(ot),s=lt(),[c,b]=T.useState(""),[t,a]=T.useState({_id:"",type:""}),{schoolSessionState:i,schoolSessionDispatch:r}=T.useContext(fe),n=i.addStudentFileData,{levelsOption:o}=yt(),j=()=>{at.fire({title:"Exiting",text:"Do you want to exit?",showCancelButton:!0}).then(({isConfirmed:h})=>{h&&r({type:"closeAddStudentFileDialog"})})},{mutateAsync:x,isLoading:u}=pt({mutationFn:Jt}),l=()=>{if(b(""),t._id===""){b("Please select a level!");return}const h={students:n==null?void 0:n.data,session:{sessionId:y.sessionId,termId:y.termId,levelId:t._id},type:n.type};at.fire({title:"Importing students",text:`Do you want to import students in ${t.type}?`,showCancelButton:!0}).then(({isConfirmed:w})=>{w&&x(h,{onSettled:()=>{s.invalidateQueries(["all-students"])},onSuccess:N=>{r(mt(N)),r({type:"closeAddStudentFileDialog"})},onError:N=>{r(ct(N))}})})};return e.jsxs(Pe,{open:n.open,fullScreen:!0,fullWidth:!0,children:[e.jsx(dt,{title:"Students",subtitle:"import students from file or previous academic year",onClose:j}),e.jsxs(we,{sx:{paddingX:3},children:[e.jsx(G,{onClick:j,children:"Cancel"}),e.jsx($,{variant:"contained",loading:u,onClick:l,children:"Import Students"})]}),e.jsx(R,{size:"small",options:o,noOptionsText:"No Level available",getOptionLabel:h=>h.type||"",isOptionEqualToValue:(h,w)=>w._id===void 0||w._id===""||w._id===h._id,value:t,onChange:(h,w)=>a(w),renderInput:h=>e.jsx(g,{...h,label:"Select Level",size:"small",error:!!c,helperText:c,required:!0,FormHelperTextProps:{sx:{color:"error.main"}}}),sx:{width:250,marginLeft:3}}),e.jsx(Ie,{children:((p=n.data)==null?void 0:p.length)===0?e.jsx(I,{children:"No data available"}):e.jsx(Ht,{title:(t==null?void 0:t.type)||"Students",icon:Yt.student,columns:nn,data:n==null?void 0:n.data,options:{pageSize:10,pageSizeOptions:[10,20,30,50]},actions:[]})})]})}const cn=()=>{const[y,s]=T.useState("1"),[c,b]=T.useState({severity:"",text:""});return e.jsxs(e.Fragment,{children:[c.text&&e.jsx($t,{severity:c.severity,onClose:()=>b({text:""}),children:c.text}),e.jsx(e.Fragment,{children:e.jsxs(Kt,{value:y,children:[e.jsx(it,{value:"1",children:e.jsx(rt,{children:e.jsx(bt,{setTab:s,msg:c,setMsg:b})})}),e.jsx(it,{value:"2",children:e.jsx(rt,{children:e.jsx(ut,{setTab:s,msg:c,setMsg:b})})})]})}),e.jsx(mn,{})]})};cn.propTypes={};export{cn as default};

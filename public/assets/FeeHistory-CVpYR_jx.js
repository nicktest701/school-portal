import{r as d,a1 as S,a as f,c,fG as u,j as t,e as y,k as o,T,A as p,l as x,fT as _}from"./index-B8PQHtjc.js";import{f as b}from"./currentFeeAPI-CpZ1DJJI.js";import{S as A}from"./StudentFeeReportListItem-3cmnK17A.js";import{E as C}from"./images-B5fNBSni.js";import{A as E}from"./Autocomplete-Dw57Ihk7.js";import"./v4-C6aID195.js";import"./ListItemButton-Di0YOqWQ.js";import"./listItemButtonClasses-DySKLRoc.js";import"./ListItemText-DzMM1D1F.js";import"./Chip-DmEpgF7y.js";const P="/assets/fees-empty2-aQTanjIR.png",I=()=>{var l,m;const h=d.useId(),{userState:{session:n}}=d.useContext(S),[N,g]=f(),[e,j]=d.useState({_id:"",profile:"",fullName:""}),r=c(["all-students",n],()=>u(n),{enabled:!!n.sessionId}),i=c(["all-fees-history",e==null?void 0:e._id],()=>b(e==null?void 0:e._id),{enabled:!!(e!=null&&e._id),onSettled:()=>{g(a=>(a.set("_id",e==null?void 0:e._id),a))}});return t.jsxs(t.Fragment,{children:[t.jsx(y,{title:"Fees History",subtitle:"Manage Student fee payment history",img:C.assessment,color:"primary.main"}),t.jsx(o,{paddingY:4,children:t.jsx(E,{fullWidth:!0,disableClearable:!0,clearText:" ",options:(r==null?void 0:r.data)??[],loading:r.isPending,loadingText:"Loading Students.Please Wait...",noOptionsText:"No Student found",isOptionEqualToValue:(a,s)=>(s==null?void 0:s._id)===void 0||(s==null?void 0:s._id)===""||a.id===(s==null?void 0:s._id),getOptionLabel:a=>(a==null?void 0:a.fullName)||"",value:e,onChange:(a,s)=>{j(s)},renderInput:a=>t.jsx(T,{...a,placeholder:"Search for student"})})}),i!=null&&i.data?t.jsxs(t.Fragment,{children:[t.jsx(o,{justifyContent:"center",paddingY:2,spacing:1,alignItems:"center",children:t.jsxs(t.Fragment,{children:[t.jsx(p,{src:e==null?void 0:e.profile,sx:{width:80,height:80}}),t.jsx(x,{sx:{textTransform:"capitalize"},children:e==null?void 0:e.fullName})]})}),t.jsx(_,{style:{width:"100%",minHeight:"300px"},autoHide:!0,children:(m=(l=i==null?void 0:i.data)==null?void 0:l.fees)==null?void 0:m.map(a=>{var s;return t.jsx(A,{item:a,studentId:(s=i==null?void 0:i.data)==null?void 0:s.studentId},h)})})]}):t.jsxs(o,{spacing:2,justifyContent:"center",alignItems:"center",children:[t.jsx(p,{src:P,sx:{width:200,height:200}}),t.jsx(x,{variant:"body2",children:"No Records available"})]})]})};export{I as default};

import{p as k,j as e,V as R,r as o,_ as l,aq as f,l as c,ar as b,P as i,bt as w,a1 as E,c as M,C as z,e as B,D as v,I as u}from"./index-B8PQHtjc.js";import{C}from"./CustomizedMaterialTable-BQoTtwVw.js";import{R as D}from"./studentColumns-mOrPrRKB.js";import{B as L}from"./BarChartRounded-Bzu6AZ7z.js";import{B as I,D as A}from"./index-BMIYSj3N.js";import{C as j,S as m}from"./Skeleton-DWRiBFRT.js";import{g as F}from"./studentAPI-DyXUet_8.js";import{s as h}from"./student_ico-BGUw5C9J.js";import{E as T}from"./images-B5fNBSni.js";import{D as x}from"./DashboardCard-JF-6co28.js";import{P as g}from"./Person-mhly5Vw0.js";import"./TabPanel-WHfZdNAn.js";import"./useThemeProps-CEPKeDia.js";import"./Toolbar-YM__bEFh.js";import"./Chip-DmEpgF7y.js";import"./Autocomplete-Dw57Ihk7.js";import"./ButtonGroup-ZC3qSltg.js";import"./ListItemText-DzMM1D1F.js";import"./InputAdornment-DAOlZ4uj.js";import"./index-BqG4A_N5.js";import"./DialogActions-BmNk8sop.js";import"./ListItem-CQImyTSy.js";import"./ListItemSecondaryAction-DOVMjMKm.js";import"./listItemButtonClasses-DySKLRoc.js";import"./Grid2-B2FVLpOz.js";import"./Link-kLE4_HTq.js";import"./ListItemButton-Di0YOqWQ.js";import"./Check-JB41DPzl.js";import"./DeleteOutline-BlPFLwFk.js";import"./gradeColor-B1MTvGsq.js";import"./CircleRounded-YWo57tpF.js";const H=k(e.jsx("path",{d:"M11 3.18v17.64c0 .64-.59 1.12-1.21.98C5.32 20.8 2 16.79 2 12s3.32-8.8 7.79-9.8c.62-.14 1.21.34 1.21.98m2.03 0v6.81c0 .55.45 1 1 1h6.79c.64 0 1.12-.59.98-1.22-.85-3.76-3.8-6.72-7.55-7.57-.63-.14-1.22.34-1.22.98m0 10.83v6.81c0 .64.59 1.12 1.22.98 3.76-.85 6.71-3.82 7.56-7.58.14-.62-.35-1.22-.98-1.22h-6.79c-.56.01-1.01.46-1.01 1.01"}),"PieChartRounded"),N=k(e.jsx("path",{d:"M21 5c0-1.1-.9-2-2-2h-9v5h11zM3 19c0 1.1.9 2 2 2h3V10H3zM3 5v3h5V3H5c-1.1 0-2 .9-2 2m14.65 4.35-2.79 2.79c-.32.32-.1.86.35.86H17v2c0 1.1-.9 2-2 2h-2v-1.79c0-.45-.54-.67-.85-.35l-2.79 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.31.31.85.09.85-.35V19h2c2.21 0 4-1.79 4-4v-2h1.79c.45 0 .67-.54.35-.85l-2.79-2.79c-.19-.2-.51-.2-.7-.01"}),"PivotTableChartRounded"),P=({data:a})=>{var n;const[t,s]=o.useState([]),[r,d]=o.useState([]);return o.useEffect(()=>{a&&(s(l.map(a,"term")),d(l.map(a,"student")))},[a]),e.jsxs(f,{elevation:1,children:[e.jsx(j,{avatar:e.jsx(L,{}),title:`Students for ${a&&((n=a[0])==null?void 0:n.academicYear)}`,subheader:e.jsx(c,{fontSize:12,fontStyle:"italic",children:"Total number of active students in each term."})}),e.jsx(b,{children:e.jsx(i,{sx:{minWidth:100,width:"100%",height:200},children:e.jsx(I,{data:{labels:t,datasets:[{label:"No of Students",data:r,backgroundColor:[" rgb(1, 46, 84)","rgb(255, 192, 159)"],barThickness:10,borderRadius:10}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:2,autoPadding:!0},scales:{x:{ticks:{display:!0},grid:{display:!1}},y:{ticks:{display:!1},grid:{display:!1}}},plugins:{legend:{},datalabels:{display:!0,color:"white",anchor:"center",align:"end",font:{size:"14px"},backgroundColor:"#000",formatter:p=>p}}}})})})]})};P.propTypes={data:R.array};const O=({females:a,males:t})=>{const{palette:s}=w();return e.jsxs(f,{elevation:1,children:[e.jsx(j,{avatar:e.jsx(N,{}),title:"Males & Females",subheader:e.jsx(c,{fontSize:12,fontStyle:"italic",children:"Total number of males and females."})}),e.jsx(b,{children:e.jsx(i,{sx:{minWidth:100,width:"100%",height:200},children:e.jsx(A,{datasetIdKey:"id",data:{labels:["Males","Females"],datasets:[{data:[t,a],backgroundColor:[s.primary.main,s.secondary.main],borderRadius:10}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:2},scales:{x:{ticks:{display:!1},grid:{display:!1}},y:{ticks:{display:!1},grid:{display:!1}}},plugins:{legend:{position:"bottom"},datalabels:{display:!0,color:"white",anchor:"center",align:"end",font:{size:"14px"},backgroundColor:"#000",formatter:r=>r}}}})})})]})},_=({data:a})=>{const[t,s]=o.useState([]),[r,d]=o.useState([]);return o.useEffect(()=>{a&&(s(l.map(a,"level")),d(l.map(a,"students")))},[a]),e.jsxs(f,{elevation:1,children:[e.jsx(j,{avatar:e.jsx(H,{}),title:"Students",subheader:e.jsx(c,{fontSize:12,fontStyle:"italic",children:"Total number of active students at each level."})}),e.jsx(b,{children:e.jsx(i,{sx:{minWidth:100,width:"100%",height:200},children:e.jsx(I,{datasetIdKey:"id",data:{labels:t,datasets:[{label:"Levels",data:r,backgroundColor:["rgb(255, 192, 159)"," rgb(1, 46, 84)"],barThickness:10,borderRadius:10}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:2},scales:{x:{ticks:{},grid:{display:!1}},y:{ticks:{display:!1},grid:{display:!1}}},plugins:{legend:{},datalabels:{display:!0,color:"white",anchor:"center",align:"end",font:{size:"14px"},backgroundColor:"#000",formatter:n=>n}}}})})})]})},V=()=>e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",backgroundColor:"transparent",gap:3,paddingY:4},children:[e.jsx(m,{variant:"rounded",height:200}),e.jsx(m,{variant:"rounded",height:200}),e.jsx(m,{variant:"rounded",height:200}),e.jsx(m,{variant:"rounded",height:200})]}),ye=()=>{var s,r,d,n,p,y,S;const{userState:{session:a}}=o.useContext(E),t=M({queryKey:["student-details",a==null?void 0:a.sessionId,a==null?void 0:a.termId],queryFn:()=>F({sessionId:a.sessionId,termId:a.termId}),enabled:!!a.sessionId&&!!a.termId,initialData:{recentStudents:[],noOfStudentsInEachLevel:[],noOfStudentsForEachTerm:[],students:0,males:0,females:0}});return e.jsxs(z,{maxWidth:"xl",children:[e.jsx(B,{title:"Student Portal",subtitle:"Add, edit, and view student records to keep accurate and up-to-date information on all students.",img:h,color:"primary.main"}),e.jsx(c,{variant:"h5",py:2,children:"Student Details Summary"}),e.jsx(v,{}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(120px,1fr))",gap:2,pt:2},children:[e.jsx(x,{title:"Students",value:(s=t.data)==null?void 0:s.students,icon:e.jsx(u,{sx:{bgcolor:"secondary.lighter"},children:e.jsx(g,{sx:{width:20,height:20,color:"secondary.darker"}})})}),e.jsx(x,{title:"Males",value:(r=t.data)==null?void 0:r.males,icon:e.jsx(u,{sx:{bgcolor:"warning.lighter"},children:e.jsx(g,{sx:{width:20,height:20,color:"warning.darker"}})})}),e.jsx(x,{title:"Females",value:(d=t.data)==null?void 0:d.females,icon:e.jsx(u,{sx:{bgcolor:"info.lighter"},children:e.jsx(g,{sx:{width:20,height:20,color:"info.darker"}})})})]}),e.jsx(c,{variant:"h5",py:2,children:"Chart History"}),e.jsx(v,{}),t.isPending&&e.jsx(V,{}),e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(180px,1fr))",gap:2,py:2},children:[e.jsx(P,{data:(n=t==null?void 0:t.data)==null?void 0:n.noOfStudentsForEachTerm}),e.jsx(O,{...t==null?void 0:t.data})]}),e.jsx(i,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(1fr,1fr))"},children:e.jsx(_,{data:(p=t==null?void 0:t.data)==null?void 0:p.noOfStudentsInEachLevel})}),e.jsxs(i,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:"center",justifyContent:"center",pt:3,gap:2},children:[e.jsx(C,{title:"Recently Added Students",icon:h,isPending:t.isPending,columns:[{title:"Level",field:"level"},{title:"Students",field:"students"}],options:{paginationPosition:"bottom",pageSize:3,selection:!1,toolbar:!1,paging:!1},data:((y=t==null?void 0:t.data)==null?void 0:y.noOfStudentsInEachLevel)??[],actions:[],handleRefresh:t.refetch,addButtonImg:T.student,addButtonMessage:"ðŸ˜‘ No Students recently added !!!!",style:{border:"none",boxShadow:"0px 1px 5px rgba(0,0,0,0.07)"}}),e.jsx(C,{title:"Recently Added Students",icon:h,isPending:t.isPending,columns:D,options:{paginationPosition:"bottom",pageSize:3,selection:!1,toolbar:!1,paging:!1},data:l.take((S=t.data)==null?void 0:S.recentStudents,5)??[],actions:[],handleRefresh:t.refetch,addButtonImg:T.student,addButtonMessage:"ðŸ˜‘ No Students recently added !!!!",style:{border:"none",boxShadow:"0px 1px 5px rgba(0,0,0,0.07)"}})]})]})};export{ye as default};

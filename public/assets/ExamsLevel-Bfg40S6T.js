import{p as o,j as e,V as u,k as V,A as D,l as t,bt as ee,u as se,r as G,a1 as te,i as ne,c as re,C as oe,e as ie,aJ as ae,D as F,P as n,aq as ce,ar as le,Q as q,as as de,I as he,B as C}from"./index-B8PQHtjc.js";import{u as j,w as xe,L as me,C as pe,h as ue}from"./CustomizedMaterialTable-BQoTtwVw.js";import{G as Q}from"./Group-BzuzwgJj.js";import{A as je}from"./AssignmentTurnedIn-BpA451nf.js";import{S as ge}from"./studentColumns-mOrPrRKB.js";import{c as ve}from"./ExaminationAPI-gfcTwHm9.js";import{s as fe}from"./student_ico-BGUw5C9J.js";import{E as ye}from"./images-B5fNBSni.js";import{B as Ce}from"./Back-D8wcFeGb.js";import{g as U}from"./gradeColor-B1MTvGsq.js";import{u as Se}from"./index-BqG4A_N5.js";import{R as be}from"./RefreshRounded-DD-ja5GB.js";import{G as g}from"./Grid2-B2FVLpOz.js";import{B as ke}from"./ButtonGroup-ZC3qSltg.js";import"./TabPanel-WHfZdNAn.js";import"./useThemeProps-CEPKeDia.js";import"./Toolbar-YM__bEFh.js";import"./Chip-DmEpgF7y.js";import"./Autocomplete-Dw57Ihk7.js";import"./Skeleton-DWRiBFRT.js";import"./ListItemText-DzMM1D1F.js";import"./InputAdornment-DAOlZ4uj.js";import"./DialogActions-BmNk8sop.js";import"./ListItem-CQImyTSy.js";import"./ListItemSecondaryAction-DOVMjMKm.js";import"./listItemButtonClasses-DySKLRoc.js";import"./Link-kLE4_HTq.js";import"./ListItemButton-Di0YOqWQ.js";import"./Check-JB41DPzl.js";import"./DeleteOutline-BlPFLwFk.js";import"./CircleRounded-YWo57tpF.js";const Ie=o(e.jsx("path",{d:"M20 2H4v20h16zM6 4h5v8l-2.5-1.5L6 12z"}),"BookSharp"),Me=o(e.jsx("path",{d:"M15 7v12.97l-4.21-1.81-.79-.34-.79.34L5 19.97V7zm4-6H8.99C7.89 1 7 1.9 7 3h10c1.1 0 2 .9 2 2v13l2 1V3c0-1.1-.9-2-2-2m-4 4H5c-1.1 0-2 .9-2 2v16l7-3 7 3V7c0-1.1-.9-2-2-2"}),"BookmarksOutlined"),we=o(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),ze=o(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined"),Oe=o(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.6-6-6-6m3 7H9v-2h6z"}),"DoNotDisturbOnTotalSilenceOutlined"),Pe=o(e.jsx("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOffOutlined"),Te=o(e.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}),"List"),Be=o(e.jsx("path",{d:"M16 4H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99h16c1.1 0 2-.9 2-2v-8zM4 18.01V6h11v5h5v7.01z"}),"NoteOutlined"),Ee=o(e.jsx("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutlineOutlined");function d({title:m,value:v,icon:h,color:l}){return e.jsxs(V,{direction:"row",spacing:2,sx:{bgcolor:"white",px:2,py:2,borderRadius:2,boxShadow:"20px 20px 60px #d9d9d9,-20px -20px 60px #ffffff"},children:[e.jsx(D,{sx:{width:24,height:24,color:`${l}.dark`,bgcolor:`${l}.lighter`},children:h}),e.jsxs(V,{spacing:1,children:[e.jsx(t,{variant:"body2",children:m}),e.jsx(t,{variant:"h5",children:v})]})]})}d.propTypes={title:u.string,value:u.number,icon:u.node,color:u.string};const hs=({type:m})=>{var S,b,k,I,M,w,z,O,P,T,B,E,H,R;const v=ee(),h=Se(v.breakpoints.up("md")),l=se(),{userState:{session:p}}=G.useContext(te),{levelId:i,level:a}=ne(),s=re({queryKey:["exams-details",i],queryFn:()=>ve({sessionId:p.sessionId,termId:p.termId,levelId:i}),enabled:!!i&&!!p.sessionId&&!!p.termId,initialData:{noOfStudents:0,highestMarks:0,lowestMarks:0,averageMarks:0,passStudents:0,failStudents:0,students:[],resultsCompleted:0,scorePercentage:0}}),W=r=>{l(`/examination/level/${i}/student?eid=${r==null?void 0:r._id}&sid=${r==null?void 0:r.studentId}`,{state:{prevPath:`/examination/level/${i}/${a}`}})},J=[...ge,{field:null,title:"",width:"30%",render:()=>e.jsx(ue,{sx:{width:30,height:30}})}],x={width:28,height:28},K=()=>{l(`/examination/level/${i}/${a}/upload`,{state:{prevPath:`/examination/level/${i}/${a}`}})},X=()=>{l(`/${m}/reports/${i}`)},Y=G.useCallback(()=>{var _,$;const r=["Index Number","Student","Class  Score","Exams  Score","Total  Score"],A=($=(_=s==null?void 0:s.data)==null?void 0:_.students)==null?void 0:$.map(c=>({indexnumber:c==null?void 0:c.indexnumber,student:c==null?void 0:c.fullName})),f=j.json_to_sheet(A),L=j.book_new();j.book_append_sheet(L,f,a||"Subject"),j.sheet_add_aoa(f,[r],{origin:"A1"});const Z=A.reduce((c,y)=>{var N;return Math.max(c,(N=y==null?void 0:y.student)==null?void 0:N.length)},10);f["!cols"]=[{wch:Z}],xe(L,`${a||"Subject"}-Assessment.xlsx`,{compression:!0})},[(S=s==null?void 0:s.data)==null?void 0:S.students]);return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{to:m==="course"?"/course/level":"/examination",color:"primary.main"}),e.jsxs(oe,{sx:{display:"flex",flexDirection:{size:"column-reverse",sm:"row"},justifyContent:"space-between",alignItems:"center",gap:2,bgcolor:"#fff",my:2,borderRadius:"12px"},children:[e.jsx(ie,{title:"Examination Portal",subtitle:"Track,manage and control academic and class activities",img:ae,backColor:"#012e54"}),e.jsx(t,{sx:{display:{size:"none",md:"inline-flex"}},variant:"h5",whiteSpace:"nowrap",children:a})]}),e.jsx(t,{variant:"h5",py:2,children:"Exams Summary"}),e.jsx(F,{}),e.jsxs(n,{sx:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(150px,1fr))",gap:2,py:2},children:[e.jsx(d,{title:"Students",value:(b=s.data)==null?void 0:b.noOfStudents,icon:e.jsx(Ee,{sx:x}),color:"info"}),e.jsx(d,{title:"Highest Marks",value:(k=s.data)==null?void 0:k.highestMarks,icon:e.jsx(Me,{sx:x}),color:"success"}),e.jsx(d,{title:"Lowest Marks",value:(I=s.data)==null?void 0:I.lowestMarks,icon:e.jsx(Oe,{sx:x}),color:"warning"}),e.jsx(d,{title:"Pass Students",value:(M=s.data)==null?void 0:M.passStudents,icon:e.jsx(ze,{sx:x}),color:"success"}),e.jsx(d,{title:"Failed Students",value:(w=s.data)==null?void 0:w.failStudents,icon:e.jsx(Pe,{sx:x}),color:"error"})]}),e.jsx(ce,{sx:{margin:"auto",padding:2},children:e.jsxs(le,{children:[e.jsxs(n,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",children:[e.jsxs(n,{display:"flex",alignItems:"center",gap:2,flex:1,children:[e.jsxs(n,{children:[e.jsxs(n,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(q,{variant:"determinate",value:100,size:90,thickness:3,sx:{color:"lightgray"}}),e.jsx(q,{variant:"determinate",value:(z=s==null?void 0:s.data)==null?void 0:z.scorePercentage,size:90,thickness:3,sx:{color:U((O=s==null?void 0:s.data)==null?void 0:O.scorePercentage).bg,position:"absolute",left:0}}),e.jsx(n,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(t,{variant:"h6",component:"div",color:"text.primary",children:[(P=s==null?void 0:s.data)==null?void 0:P.scorePercentage,"%"]})})]}),e.jsx(t,{children:"Performance "})]}),e.jsxs(n,{children:[e.jsxs(t,{variant:"h6",fontWeight:"bold",children:[a??"Students",e.jsx(de,{color:"success",variant:"dot",overlap:"circular",sx:{marginLeft:1},children:e.jsx(we,{color:"success"})})]}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"9052900 | ASHANTI REGION"})]})]}),e.jsx(he,{sx:{justifySelf:"flex-end"},onClick:s.refetch,children:e.jsx(be,{sx:{width:{xs:24,md:40},height:{xs:24,md:40}}})})]}),e.jsxs(n,{mt:2,children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Below is the state of school results by distinct academic year and semesters."}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Only 5 academic year/semester results out of 6 have been approved."}),e.jsx(n,{mt:2,display:"flex",alignItems:"center",gap:1,children:e.jsx(t,{variant:"body2",fontWeight:"bold",color:"primary",children:"Result Entry Progress"})}),e.jsx(me,{variant:"determinate",value:(T=s==null?void 0:s.data)==null?void 0:T.resultsCompleted,color:(E=U((B=s==null?void 0:s.data)==null?void 0:B.resultsCompleted).bg)==null?void 0:E.split(".")[0],sx:{height:8,borderRadius:1,mt:1}}),e.jsxs(t,{variant:"body2",color:"text.secondary",mt:.5,children:["Progress: ",(H=s==null?void 0:s.data)==null?void 0:H.resultsCompleted,"%"]})]}),e.jsx(F,{sx:{my:3}}),e.jsxs(g,{container:!0,spacing:2,children:[e.jsx(g,{size:4,children:e.jsxs(n,{textAlign:"center",children:[e.jsx(Q,{color:"primary"}),e.jsx(t,{variant:"h6",children:"33"}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Teachers"})]})}),e.jsx(g,{item:!0,size:4,children:e.jsxs(n,{textAlign:"center",children:[e.jsx(Q,{color:"primary"}),e.jsx(t,{variant:"h6",children:"311"}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Students"})]})}),e.jsx(g,{item:!0,size:4,children:e.jsxs(n,{textAlign:"center",children:[e.jsx(je,{color:"primary"}),e.jsx(t,{variant:"h6",children:"314"}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Assigned"})]})})]})]})}),e.jsx(pe,{title:a??"Students",icon:fe,isPending:s.isPending,columns:J,search:!0,data:(R=s==null?void 0:s.data)==null?void 0:R.students,autoCompleteComponent:e.jsx(n,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},children:e.jsxs(ke,{size:"small",children:[e.jsx(C,{startIcon:e.jsx(Be,{}),onClick:Y,children:h?" Download Assessment Sheet":""}),e.jsx(C,{startIcon:e.jsx(Ie,{}),onClick:K,children:h?"Import Results":""}),e.jsx(C,{startIcon:e.jsx(Te,{}),onClick:X,children:h?" View Students Report":""})]})}),actions:[],handleRefresh:s.refetch,addButtonImg:ye.student,addButtonMessage:"ðŸ˜‘ No Students results available !!!!",onRowClick:r=>W(r)})]})};export{hs as default};

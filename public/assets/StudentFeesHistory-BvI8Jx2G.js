import{j as i,k as c,A as n,o as H,l as o,_ as M,D as V,r as y,a1 as z,n as I,a as b,c as B,e as C,P,B as N,V as v}from"./index-B8PQHtjc.js";import{a as R}from"./currentFeeAPI-CpZ1DJJI.js";import{C as S}from"./CustomizedMaterialTable-BQoTtwVw.js";import{R as T}from"./index-DThQnLGZ.js";import{c as w}from"./sessionColumns-oq904N9H.js";import{B as u}from"./Back-D8wcFeGb.js";import{G as E}from"./GlobalSpinner-DbblD88Y.js";import{P as F}from"./PrintRounded-BrQmgzJs.js";import"./TabPanel-WHfZdNAn.js";import"./useThemeProps-CEPKeDia.js";import"./Toolbar-YM__bEFh.js";import"./Chip-DmEpgF7y.js";import"./Autocomplete-Dw57Ihk7.js";import"./Skeleton-DWRiBFRT.js";import"./ButtonGroup-ZC3qSltg.js";import"./ListItemText-DzMM1D1F.js";import"./InputAdornment-DAOlZ4uj.js";import"./index-BqG4A_N5.js";import"./DialogActions-BmNk8sop.js";import"./ListItem-CQImyTSy.js";import"./ListItemSecondaryAction-DOVMjMKm.js";import"./listItemButtonClasses-DySKLRoc.js";import"./Grid2-B2FVLpOz.js";import"./Link-kLE4_HTq.js";import"./ListItemButton-Di0YOqWQ.js";import"./Check-JB41DPzl.js";import"./DeleteOutline-BlPFLwFk.js";import"./images-B5fNBSni.js";import"./currencyFormatter-DjBDW3hY.js";import"./CircleRounded-YWo57tpF.js";const l="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%3e%3cpath%20fill='%2364B5F6'%20d='M14%2012c0%201.104-.896%202-2%202H7c-1.104%200-2-.896-2-2V7c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V12zM26%2012c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2V7c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V12zM38%2012c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2V7c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V12zM14%2024c0%201.104-.896%202-2%202H7c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V24zM26%2024c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V24zM38%2024c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V24zM14%2036c0%201.104-.896%202-2%202H7c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V36zM26%2036c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V36zM38%2036c0%201.104-.896%202-2%202h-5c-1.104%200-2-.896-2-2v-5c0-1.104.896-2%202-2h5c1.104%200%202%20.896%202%202V36z'/%3e%3cpath%20fill='%239C27B0'%20d='M43,33c0,5.523-4.477,10-10,10s-10-4.477-10-10s4.477-10,10-10S43,27.477,43,33'/%3e%3cg%3e%3cpath%20fill='%23F3E5F5'%20d='M29%2027H31V39H29zM35%2027H37V39H35z'/%3e%3cpath%20fill='%23F3E5F5'%20d='M27%2035H39V37H27zM27%2029H39V31H27z'/%3e%3c/g%3e%3c/svg%3e",a=JSON.parse(localStorage.getItem("@school_info"));function k({student:r}){return i.jsx("div",{children:i.jsxs(c,{spacing:1,sx:{maxWidth:"8.5in",minHeight:"11in",margin:"auto",padding:"8px"},children:[i.jsxs(c,{direction:"row",justifyContent:"flex-start",alignItems:"center",columnGap:2,pb:2,children:[a!=null&&a.badge?i.jsx(n,{alt:"school logo",loading:"lazy",srcSet:`/images/users/${a==null?void 0:a.badge}`,sx:{width:40,height:40}}):i.jsx(H,{sx:{width:40,height:40}}),i.jsxs(c,{justifyContent:"flex-start",alignItems:"flex-start",children:[i.jsx(o,{variant:"h6",children:M.startCase(a==null?void 0:a.name)}),i.jsx(o,{variant:"caption",children:a==null?void 0:a.address}),i.jsx(o,{variant:"caption",children:a==null?void 0:a.location}),i.jsx(o,{variant:"caption",fontStyle:"italic",children:a==null?void 0:a.motto})]})]}),i.jsx(V,{}),i.jsx(o,{paragraph:!0,sx:{textAlign:"center",textDecoration:"underline",color:"primary",width:"100%",padding:"4px"},variant:"h6",children:"Fees Report"}),i.jsxs(c,{justifyContent:"center",alignItems:"center",spacing:1,pt:2,children:[i.jsx(n,{src:(r==null?void 0:r.profile)===""||(r==null?void 0:r.profile)===void 0||(r==null?void 0:r.profile)===null?null:r==null?void 0:r.profile,sx:{width:40,height:40,alignSelf:"center"}}),i.jsx(o,{children:r==null?void 0:r.fullName}),i.jsx(o,{variant:"caption",children:r==null?void 0:r.levelType})]}),i.jsx("div",{style:{flexGrow:1},children:i.jsx(S,{title:"Fees History",icon:l,addButtonImg:l,addButtonMessage:"No Fees History Found",exportFileName:r==null?void 0:r.fullName,columns:w,data:r==null?void 0:r.payment,actions:[],options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})}),i.jsx(o,{style:{fontSize:"10px",fontStyle:"italic"},children:"Powered by FrebbyTech Consults (0543772591)"})]})})}const D=()=>{var m,h,x,g,d,f,j;const{userState:{session:r}}=y.useContext(z),{state:s}=I(),[t]=b(),p=y.useRef(),e=B({queryKey:["student-fee-history",t.get("_id"),t.get("level_id")],queryFn:()=>R({sessionId:r.sessionId,termId:r==null?void 0:r.termId,studentId:t.get("_id"),levelId:t.get("level_id"),feeId:t.get("fid")}),enabled:!!t.get("_id")&&!!t.get("level_id")});return i.jsxs(i.Fragment,{children:[i.jsx(u,{to:s==null?void 0:s.prevPath,color:"primary.main"}),i.jsx(C,{title:((m=e==null?void 0:e.data)==null?void 0:m.fullName)||"",subtitle:(h=e==null?void 0:e.data)==null?void 0:h.levelType,color:"primary.main",icon:i.jsx(n,{srcSet:((x=e==null?void 0:e.data)==null?void 0:x.profile)===void 0||((g=e==null?void 0:e.data)==null?void 0:g.profile)===""?null:(d=e==null?void 0:e.data)==null?void 0:d.profile,sx:{width:70,height:70}})}),i.jsx(P,{children:i.jsx(i.Fragment,{children:i.jsx(S,{title:"Fees History",subtitle:"Showing details of student fees transactions",search:!0,icon:l,addButtonImg:l,addButtonMessage:"No Fees History Found",isPending:e.isPending,exportFileName:(f=e==null?void 0:e.data)==null?void 0:f.fullName,columns:w,data:(j=e==null?void 0:e.data)==null?void 0:j.payment,actions:[],handleRefresh:e.refetch,autoCompleteComponent:i.jsx(c,{direction:"row",spacing:1,children:i.jsx(T,{trigger:()=>i.jsx(N,{startIcon:i.jsx(F,{}),variant:"contained",children:"Print Report"}),content:()=>p.current})}),options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})})}),i.jsx("div",{ref:p,className:"print-container",children:i.jsx(k,{student:e==null?void 0:e.data})}),e.isPending&&i.jsx(E,{})]})};D.propTypes={open:v.bool,setOpen:v.func};export{D as default};

import{j as e,$ as i,aS as o,m as p,q as x,X as D,ct as q,r as F,U as K,g as U,cu as _,V as G,a as H,a3 as l}from"./index-5b8f5a53.js";import{d as M,C as d}from"./CustomCard-ffcfa807.js";import{d as u}from"./Subject-88f70f6e.js";import{d as P}from"./Person3-db73ff94.js";import{D as c}from"./DashboardCard-a8472d98.js";import{R as N,L as O,B as Q}from"./index-4958be49.js";function V({data:s}){return e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(150px,1fr))",gap:2,py:4},children:[e.jsx(c,{title:"Levels",value:s==null?void 0:s.levels,icon:e.jsx(o,{sx:{bgcolor:"error.lighter"},children:e.jsx(M,{sx:{width:20,height:20,color:"error.darker"}})})}),e.jsx(c,{title:"Courses",value:s==null?void 0:s.courses,icon:e.jsx(o,{sx:{bgcolor:"info.lighter"},children:e.jsx(P,{sx:{width:20,height:20,color:"info.darker"}})})}),e.jsx(c,{title:"Students",value:s==null?void 0:s.students,icon:e.jsx(o,{sx:{bgcolor:"success.lighter"},children:e.jsx(u,{sx:{width:20,height:20,color:"success.darker"}})})})]})}function B({label:s,value:r,color:t,m:a}){return e.jsxs(p,{justifyContent:"space-between",alignItems:"center",spacing:3,children:[e.jsx(i,{sx:{width:100,height:100,borderRadius:"50%",bgcolor:t||"primary.main",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:a},children:e.jsx(x,{textAlign:"center",fontSize:20,color:"#fff",children:r})}),e.jsx(x,{children:s})]})}const X=({values:s,labels:r})=>{const{palette:t}=D();return e.jsx(i,{sx:{minWidth:200,height:200},children:e.jsx(N,{datasetIdKey:"id",data:{labels:r,datasets:[{data:s,borderColor:t.primary.main,backgroundColor:[t.primary.main,t.secondary.main],fill:"-2"}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:10},elements:{line:{borderWidth:3}},scales:{r:{angleLines:{display:!1}}},plugins:{legend:{display:!1,position:"bottom"}}}})})},J=({labels:s,values:r,values2:t})=>{const{palette:a}=D();return e.jsx(i,{sx:{minWidth:200,height:200},children:e.jsx(O,{datasetIdKey:"line",data:{labels:s,datasets:[{label:"Present",data:r,borderColor:a.secondary.main,tension:.3},t&&{label:"Absent",data:t,borderColor:a.primary.main,tension:.3}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:10},scales:{x:{ticks:{},grid:{display:!1}},y:{ticks:{},grid:{display:!1}}},plugins:{legend:{}}}})})},Y=({labels:s,data:r})=>{const{palette:t}=q();return e.jsx(i,{sx:{minWidth:200,height:200},children:e.jsx(Q,{data:{labels:s,datasets:[{label:"No of Students",data:r,backgroundColor:[t.primary.main,t.secondary.main],barThickness:10,borderRadius:10}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:2,autoPadding:!0},scales:{x:{ticks:{},grid:{display:!1}},y:{ticks:{},grid:{display:!1}}},plugins:{legend:{display:!1}}}})})};function Z({data:s}){return e.jsxs(i,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(150px,1fr))",gap:2,py:4},children:[e.jsx(c,{title:"Present Today",value:s==null?void 0:s.present,icon:e.jsx(o,{sx:{bgcolor:"info.lighter"},children:e.jsx(P,{sx:{width:20,height:20,color:"info.darker"}})})}),e.jsx(c,{title:"Absent Today",value:s==null?void 0:s.absent,icon:e.jsx(o,{sx:{bgcolor:"success.lighter"},children:e.jsx(u,{sx:{width:20,height:20,color:"success.darker"}})})}),e.jsx(c,{title:"Unmarked Today",value:s==null?void 0:s.unknown,icon:e.jsx(o,{sx:{bgcolor:"warning.lighter"},children:e.jsx(u,{sx:{width:20,height:20,color:"warning.darker"}})})})]})}function ie(){var m,y,j,f,C,v,b,k,w,A,T,S,W,L,R,$;const{user:s,userState:{session:r}}=F.useContext(K),t=U({queryKey:["course-dashboard-info"],queryFn:()=>_({session:r==null?void 0:r.sessionId,term:r==null?void 0:r.termId,teacher:s==null?void 0:s.id}),enabled:!!(r!=null&&r.sessionId)&&!!(r!=null&&r.termId)&&!!(s!=null&&s.id)}),a=(y=(m=t==null?void 0:t.data)==null?void 0:m.studentInEachLevel)==null?void 0:y.map(n=>n==null?void 0:n.level),z=(f=(j=t==null?void 0:t.data)==null?void 0:j.studentInEachLevel)==null?void 0:f.map(n=>n==null?void 0:n.students),g=(v=(C=t==null?void 0:t.data)==null?void 0:C.groupedWeeklyAttendance)==null?void 0:v.map(n=>n==null?void 0:n.date),E=(k=(b=t==null?void 0:t.data)==null?void 0:b.groupedWeeklyAttendance)==null?void 0:k.map(n=>n==null?void 0:n.present),h=(A=(w=t==null?void 0:t.data)==null?void 0:w.groupedWeeklyAttendance)==null?void 0:A.map(n=>n==null?void 0:n.absent);return e.jsxs(e.Fragment,{children:[e.jsx(p,{direction:"row",justifyContent:"space-between",alignItems:"center",p:2,bgcolor:"primary.main",children:e.jsxs(p,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[e.jsx(G,{loading:"lazy",srcSet:`/images/users/${s==null?void 0:s.profile}`,sx:{width:80,height:80}}),e.jsx(H,{primary:s==null?void 0:s.fullname,primaryTypographyProps:{textTransform:"capitalize",color:"#fff",fontSize:16},secondary:"We hope your having a great day!",secondaryTypographyProps:{color:"secondary.main"}})]})}),e.jsx(V,{data:t==null?void 0:t.data}),e.jsx(x,{paragraph:!0,children:"Overview"}),e.jsxs(l,{container:!0,spacing:3,py:2,children:[e.jsx(l,{item:!0,lg:4,md:4,xs:12,children:e.jsx(d,{title:"Students by Gender",children:e.jsxs(i,{sx:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",height:200},children:[e.jsx(B,{color:"primary.main",label:"Males",value:((W=(S=(T=t==null?void 0:t.data)==null?void 0:T.groupedStudents)==null?void 0:S.male)==null?void 0:W.length)??0,m:0}),e.jsx(B,{color:"secondary.main",label:"Females",value:(($=(R=(L=t==null?void 0:t.data)==null?void 0:L.groupedStudents)==null?void 0:R.female)==null?void 0:$.length)??0,m:"-12px"})]})})}),e.jsx(l,{item:!0,lg:8,md:8,xs:12,children:e.jsx(d,{title:"Students in levels",children:e.jsx(Y,{labels:a,data:z})})})]}),e.jsx(x,{children:"Attendance"}),e.jsx(Z,{data:t==null?void 0:t.data}),e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,lg:8,sm:6,xs:12,children:e.jsx(d,{title:"Total Weekly Attendance",children:e.jsx(J,{labels:g,values:E,values2:h})})}),e.jsx(l,{item:!0,lg:4,sm:6,xs:12,children:e.jsx(d,{title:"Weekly Absent",children:e.jsx(X,{labels:g,values:h})})})]})]})}export{ie as default};

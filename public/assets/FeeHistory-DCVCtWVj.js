import{r as d,a0 as S,a as f,c,fg as u,j as t,e as y,k as o,T,A as p,l as x,ft as _}from"./index-DrgqF6h7.js";import{f as b}from"./currentFeeAPI-Dph8Aqgk.js";import{S as A}from"./StudentFeeReportListItem-DzNlhR3m.js";import{E as C}from"./images-B5fNBSni.js";import{A as E}from"./Autocomplete-D4vPEd6T.js";import"./v4-C6aID195.js";import"./ListItemButton-BUsfko6u.js";import"./listItemButtonClasses-CLhmtlXH.js";import"./ListItemText-Bwh_rzOL.js";import"./Chip-BcLQNplL.js";const N="/assets/fees-empty2-aQTanjIR.png",Q=()=>{var l,m;const h=d.useId(),{userState:{session:n}}=d.useContext(S),[P,g]=f(),[e,j]=d.useState({_id:"",profile:"",fullName:""}),r=c(["all-students",n],()=>u(n),{enabled:!!n.sessionId}),i=c(["all-fees-history",e==null?void 0:e._id],()=>b(e==null?void 0:e._id),{enabled:!!(e!=null&&e._id),onSettled:()=>{g(a=>(a.set("_id",e==null?void 0:e._id),a))}});return t.jsxs(t.Fragment,{children:[t.jsx(y,{title:"Fees History",subtitle:"Manage Student fee payment history",img:C.assessment,color:"primary.main"}),t.jsx(o,{paddingY:4,children:t.jsx(E,{fullWidth:!0,disableClearable:!0,clearText:" ",options:(r==null?void 0:r.data)??[],loading:r.isLoading,loadingText:"Loading Students.Please Wait...",noOptionsText:"No Student found",isOptionEqualToValue:(a,s)=>(s==null?void 0:s._id)===void 0||(s==null?void 0:s._id)===""||a.id===(s==null?void 0:s._id),getOptionLabel:a=>(a==null?void 0:a.fullName)||"",value:e,onChange:(a,s)=>{j(s)},renderInput:a=>t.jsx(T,{...a,placeholder:"Search for student"})})}),i!=null&&i.data?t.jsxs(t.Fragment,{children:[t.jsx(o,{justifyContent:"center",paddingY:2,spacing:1,alignItems:"center",children:t.jsxs(t.Fragment,{children:[t.jsx(p,{src:e==null?void 0:e.profile,sx:{width:80,height:80}}),t.jsx(x,{sx:{textTransform:"capitalize"},children:e==null?void 0:e.fullName})]})}),t.jsx(_,{style:{width:"100%",minHeight:"300px"},autoHide:!0,children:(m=(l=i==null?void 0:i.data)==null?void 0:l.fees)==null?void 0:m.map(a=>{var s;return t.jsx(A,{item:a,studentId:(s=i==null?void 0:i.data)==null?void 0:s.studentId},h)})})]}):t.jsxs(o,{spacing:2,justifyContent:"center",alignItems:"center",children:[t.jsx(p,{src:N,sx:{width:200,height:200}}),t.jsx(x,{variant:"body2",children:"No Records available"})]})]})};export{Q as default};

import{u as j,a as B,r as h,S as T,b as I,c as _,d as l,j as o,C as F,e as O,f as c,g as d,h as m,_ as R}from"./index-DrgqF6h7.js";import{s as S}from"./session_ico-C_mTk6NS.js";import{S as L}from"./sessionColumns-0BrYivn4.js";import{d as N,a as P,b as Q,g as G}from"./termAPI-DNGsRUlD.js";import{C as q}from"./CustomizedMaterialTable-sErZg5Gy.js";import{E as Y}from"./images-B5fNBSni.js";import{G as z}from"./GlobalSpinner-BW4FoSxW.js";import"./currencyFormatter-DjBDW3hY.js";import"./CircleRounded-Bh8WmZqU.js";import"./ListItemText-Bwh_rzOL.js";import"./Chip-BcLQNplL.js";import"./TabPanel-Bl8roboH.js";import"./useThemeProps-DLRF2U3R.js";import"./Toolbar-Bzx_LBRC.js";import"./Autocomplete-D4vPEd6T.js";import"./Skeleton-BUD-o5ar.js";import"./ButtonGroup-DQMwsk7A.js";import"./InputAdornment-EcTjtcuD.js";import"./index-_n9xtSlI.js";import"./DialogActions-Cx2GHHEW.js";import"./ListItem-yCsexoBs.js";import"./ListItemSecondaryAction-mmiMbVqP.js";import"./listItemButtonClasses-CLhmtlXH.js";import"./ListItemButton-BUsfko6u.js";import"./Check-CEGAxChF.js";import"./DeleteOutline-DM92K-00.js";const be=()=>{const f=j(),[H,y]=B(),{schoolSessionDispatch:n}=h.useContext(T),a=I(),[g,b]=h.useState([]),i=_({queryKey:["terms"],queryFn:()=>G(),initialData:[]}),{mutateAsync:w}=l({mutationFn:N}),u=e=>{c.fire({title:"Removing Session",html:` <div style='text-align:left;display:flex;flex-direction:column;gap:8px;'>
    <p>  You are about to delete an entire academic term. This action is irreversible and will permanently remove all associated data,including:</p>
      <ul style='padding-block:8px;'>
 <li style='font-weight:bold;'>Class schedules</li>
<li style='font-weight:bold;'>Student enrollments</li>
<li style='font-weight:bold;'>Attendance records</li>
<li style='font-weight:bold;'>Grades and assignments</li>
</ul>

         <p>   Please proceed with caution. If you are certain you want to delete
            this academic year, click &apos;Confirm.&apos; Otherwise, click
            &apos;Cancel&apos; to keep the academic year intact.</p>
          <p style='color:var(--secondary);font-weight:bold;'>Are you sure you want to delete this academic term?</p>
        </div>`,showCancelButton:!0,backdrop:"rgba(0,0,0,0.2)"}).then(({isConfirmed:t})=>{t&&w(e,{onSettled:()=>{a.invalidateQueries(["terms"])},onSuccess:s=>{n(d(s))},onError:s=>{n(m(s))}})})},C=e=>{b(e)},{mutateAsync:x,isLoading:v}=l({mutationFn:P}),E=()=>{c.fire({title:"Removing Session",text:"You are about to remove the selected sessions. Removing session will delete all of its related content.Changes cannot be undone. Do you want to remove?",showCancelButton:!0,backdrop:!1}).then(({isConfirmed:e})=>{const t=R.map(g,"termId");e&&x(t,{onSettled:()=>{a.invalidateQueries(["terms"])},onSuccess:s=>{n(d(s))},onError:s=>{n(m(s))}})})},A=e=>{f(`/session/${e==null?void 0:e.termId}`)},p=e=>{y(t=>(t.set("_id",e==null?void 0:e.termId),t.set("edit_session",!0),t))},D=()=>{n({type:"displayAddSession",payload:!0})},{mutateAsync:M}=l({mutationFn:Q}),k=({_id:e,active:t})=>{c.fire({title:t?"Do you want to disable this session":"Do you want to enable this session",text:t?"Disabling Session":"Enabling Session",showCancelButton:!0,backdrop:!1}).then(s=>{s.isConfirmed&&M({_id:e,active:!t},{onSuccess:r=>{a.invalidateQueries(["terms"]),n(d(r))},onError:r=>{n(m(r))}})})};return o.jsxs(o.Fragment,{children:[o.jsxs(F,{children:[o.jsx(O,{title:"School Session",subtitle:"Create, update, and oversee academic sessions to ensure smooth academic operations",img:S,color:"primary.main"}),o.jsx(o.Fragment,{children:o.jsx(q,{title:"Sessions",icon:S,isLoading:i.isLoading,columns:L(k,A,p,u),data:i.data?i.data:[],actions:[],showRowShadow:!1,handleEdit:p,handleDelete:u,addButtonImg:Y.session,addButtonMessage:"ðŸ˜‘ No School Session available!.Create a new one!",showAddButton:!0,addButtonText:"New Session",onAddButtonClicked:D,handleRefresh:i.refetch,onSelectionChange:C,onDeleteClicked:E,options:{search:!0}})})]}),v&&o.jsx(z,{})]})};export{be as default};

import{K as _,j as e,r as j,az as K,ay as Q,aA as U,i as N,b as q,c as L,d as J,s as G,t as X,w as Z,ak as ee,J as te,v as z,al as E,k as x,T as P,B as b,l as o,L as se,y as re,am as ie,_ as R,W as ne,ai as O,eX as V,aj as oe,aC as ae,D as A,A as F,C as le}from"./index-DrgqF6h7.js";import{E as k}from"./ExamsScoreItem-uJPJLp-6.js";import{f as ce,g as xe}from"./ExaminationAPI-CMjpI3MV.js";import{A as de}from"./Autocomplete-D4vPEd6T.js";import{D as W}from"./DialogActions-Cx2GHHEW.js";import{R as he}from"./index-Hbn9YzuZ.js";import{R as c,E as je,a as w}from"./ReportItemUnderline-k77NKRsW.js";import{s as me,f as pe,C as ue}from"./createTheme-xb4osIQ4.js";import{u as fe,e as Se}from"./extendSxProp-DtuuWeaj.js";import{g as ge}from"./generateUtilityClasses-CIQngnWt.js";import{B as ye}from"./ButtonGroup-DQMwsk7A.js";import{R as be}from"./ReportRounded-BY8IBQY4.js";import"./gradeColor-B1MTvGsq.js";import"./ListItemButton-BUsfko6u.js";import"./listItemButtonClasses-CLhmtlXH.js";import"./ListItemText-Bwh_rzOL.js";import"./ListItemSecondaryAction-mmiMbVqP.js";import"./Chip-BcLQNplL.js";const Ce=_(e.jsx("path",{d:"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1"}),"AddRounded"),ve=["className","component"];function we(a={}){const{themeId:l,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=a,t=me("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(pe);return j.forwardRef(function(C,u){const f=fe(n),v=Se(C),{className:T,component:I="div"}=v,B=K(v,ve);return e.jsx(t,Q({as:I,ref:u,className:U(T,i?i(r):r),theme:l&&f[l]||f},B))})}const Re=ge("MuiBox",["root"]),y=we({defaultClassName:Re.root,generateClassName:ue.generate}),Ae=(a,l)=>{const n=Number(a)+Number(l);let r="",i="";return n>=75?(r="A1",i="Excellent"):n>=70?(r="B2",i="Very Good"):n>=65?(r="B3",i="Good"):n>=60?(r="C4",i="Good"):n>=55?(r="C5",i="Average"):n>=50?(r="C6",i="Average"):n>=45?(r="D7",i="Pass"):n>=40?(r="E8",i="Weak"):(r="F9",i="Fail"),{totalScore:n,grade:r,remarks:i}},Te=({open:a,setOpen:l,levelId:n})=>{const{examsId:r}=N(),i=q(),[t,m]=j.useState({severity:"",text:""}),[s,C]=j.useState([]),[u,f]=j.useState([]);L(["subjects"],()=>ie(n));const v={subject:"",classScore:0,examsScore:0},T={subject:"Subject",classScore:"Class",examsScore:"Exams",totalScore:"Total",grade:"Grade"},I=(d,h)=>{const S=Ae(d.classScore,d.examsScore),g={...d,...S},D=R.merge(R.keyBy([...u,g],"subject"));f(R.values(D)),h.resetForm()},B=d=>{f(h=>h.filter(({subject:g})=>g!==d))},{mutateAsync:Y}=J(ce),H=()=>{Y({examsId:r,scores:u},{onSettled:()=>{i.invalidateQueries(["student-records"])},onSuccess:()=>{m({severity:"info",text:"Student Scores updated successfully!!!"})}})};return e.jsxs(G,{open:a,onClose:()=>l(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(X,{title:"Student Assessment Information"}),e.jsx(Z,{initialValues:v,validationSchema:ee,onSubmit:I,children:({values:d,errors:h,touched:S,handleChange:g,handleSubmit:D,setFieldValue:$})=>e.jsxs(e.Fragment,{children:[t.text&&e.jsx(te,{sx:{marginY:1},severity:t.severity,onClose:()=>m({text:""}),children:t.text}),e.jsx(z,{children:e.jsxs(E,{container:!0,spacing:2,rowGap:2,children:[e.jsxs(E,{item:!0,xs:12,md:6,padding:2,children:[e.jsxs(x,{spacing:2,paddingY:2,children:[e.jsx(de,{freeSolo:!0,options:s,getOptionLabel:p=>p||"",value:d.subject,onChange:(p,M)=>$("subject",M),renderInput:p=>e.jsx(P,{...p,label:"Subject",size:"small",error:!!h.subject,helperText:S.subject&&h.subject})}),e.jsx(P,{type:"number",label:"Class Score",size:"small",value:d.classScore,onChange:g("classScore"),error:!!h.classScore,helperText:S.classScore&&h.classScore}),e.jsx(P,{type:"number",label:"Exams Score",size:"small",value:d.examsScore,onChange:g("examsScore"),error:!!h.examsScore,helperText:S.examsScore&&h.examsScore})]}),e.jsx(b,{variant:"contained",size:"small",onClick:D,children:"Add"})]}),e.jsx(E,{item:!0,xs:12,md:6,padding:2,children:e.jsxs(x,{children:[e.jsx(o,{variant:"caption",children:"Preview"}),e.jsx(k,{item:T,title:!0}),e.jsx(se,{sx:{maxHeight:300,overflowY:"scroll"},children:u.map(p=>e.jsx(k,{item:p,removeSubject:B},p.subject))})]})})]})}),e.jsx(W,{sx:{padding:2},children:e.jsx(re,{variant:"contained",disabled:u.length===0,onClick:H,children:"Save Results"})})]})})]})},Ie=()=>{const{palette:a}=O(),l=j.useRef(),{studentState:n,studentDispatch:r}=j.useContext(V),i=n.showCurrentStudentAcademicsReportView.show,t=n.showCurrentStudentAcademicsReportView.examsDetails,m=()=>{r({type:"showCurrentStudentAcademicsReportView",payload:{show:!1,examsDetails:{}}})};return e.jsxs(G,{open:i,onClose:m,fullWidth:!0,maxWidth:"md",TransitionComponent:oe,children:[e.jsx(ae,{children:"Report Card"}),e.jsxs(z,{ref:l,children:[e.jsx(A,{}),e.jsxs(x,{spacing:1,children:[e.jsxs(x,{justifyContent:"center",alignItems:"center",children:[e.jsx(o,{variant:"h4",children:"Christ Goodness International School"}),e.jsx(o,{sx:{fontSize:"14px"},children:"Post Office Box KS 134"}),e.jsx(o,{sx:{fontSize:"14px"},children:"Kumasi"}),e.jsx(o,{sx:{textAlign:"center",textDecoration:"underline",borderTop:`solid 5px ${a.secondary.main}`,bgcolor:"primary.main",color:"primary.contrastText",width:"100%",padding:1},children:"Report Card"})]}),e.jsx(x,{justifyContent:"center",alignItems:"center",children:e.jsx(F,{src:(t==null?void 0:t.profile)===""||(t==null?void 0:t.profile)===void 0||(t==null?void 0:t.profile)===null?null:t==null?void 0:t.profile,sx:{width:65,height:65}})}),e.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(y,{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsx(c,{title:"Full Name",text:t==null?void 0:t.fullName}),e.jsx(c,{title:"Class",text:`${t==null?void 0:t.level}`}),e.jsx(c,{title:"No. On Roll",text:t==null?void 0:t.rollNumber}),e.jsx(c,{title:"Grade",text:"35"}),e.jsx(c,{title:"Promoted",text:"Six(6)"})]})})}),e.jsxs(y,{sx:{flexGrow:1,alignItems:"center",textAlign:"center",paddingRight:4},children:[e.jsx("p",{children:"Position"}),e.jsx(o,{variant:"h5",children:"6"})]}),e.jsx(y,{children:e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsx(c,{title:"Academic Year",text:t==null?void 0:t.academicYear}),e.jsx(c,{title:"Term",text:t==null?void 0:t.term}),e.jsx(c,{title:"Vacation Date",text:t==null?void 0:t.vacationDate}),e.jsx(c,{title:"Reopening Date",text:t==null?void 0:t.reOpeningDate})]})})})]}),e.jsx(x,{children:e.jsxs("table",{style:{textAlign:"center",borderCollapse:"collapse"},border:"1",children:[e.jsx("thead",{style:{bgcolor:"primary.main",color:"secondary.main"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Subject"}),e.jsx("th",{children:" Class Score (50%)"}),e.jsx("th",{children:" Exams Score (50%)"}),e.jsx("th",{children:"Total Score (100%)"}),e.jsx("th",{children:"Position"}),e.jsx("th",{children:"Grade"}),e.jsx("th",{children:"Remarks"})]})}),e.jsx("tbody",{children:(t==null?void 0:t.scores)!==void 0?(t==null?void 0:t.scores.length)!==0&&(t==null?void 0:t.scores.map(s=>e.jsx(je,{item:s},s.subject))):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{padding:"3px 1px",fontSize:"20px"},children:"No Student Record Available"})})}),e.jsx("tfoot",{style:{textAlign:"center",textDecoration:"underline",borderTop:`solid 5px ${a.secondary.main}`,bgcolor:"primary.main",color:"primary.contrastText",width:"100%",padding:1},children:e.jsxs("tr",{children:[e.jsx("th",{children:"Overall Score"}),e.jsx("th",{}),e.jsx("th",{}),e.jsx("th",{children:R.sumBy(t==null?void 0:t.scores,"totalScore")}),e.jsx("th",{}),e.jsx("th",{}),e.jsx("th",{})]})})]})}),e.jsx(y,{children:e.jsx("table",{width:"100%",children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsxs("td",{width:"100%",style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[e.jsx(c,{title:"Attendance",text:"11"}),e.jsx(c,{title:"Out Of",text:t==null?void 0:t.totalLevelAttendance})]})}),e.jsx("tr",{children:e.jsx("td",{width:"50%",children:e.jsx(w,{title:"Conduct & Attitude",text:"Hardworking"})})}),e.jsx("tr",{children:e.jsx("td",{width:"50%",children:e.jsx(w,{title:"Interest",text:"Hardworking"})})}),e.jsx("tr",{children:e.jsx("td",{width:"100%",children:e.jsx(w,{title:"Class Teacher's Remarks",text:"Excellent Performance Keep it up!"})})}),e.jsx("tr",{children:e.jsx("td",{width:"100%",children:e.jsx(w,{title:"Headmaster's Remarks",text:"Proud of her performance."})})})]})})}),e.jsx(A,{}),e.jsxs(x,{justifyContent:"center",alignItems:"center",children:[e.jsx(o,{children:"Bill"}),e.jsxs("table",{width:"60%",border:"1",style:{borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Item"}),e.jsx("th",{children:"GHS"}),e.jsx("th",{children:"GHP"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"5px",fontSize:"14px"},children:"Tuition Fee"}),e.jsx("td",{}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"5px",fontSize:"14px"},children:"Others"}),e.jsx("td",{}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{paddingLeft:"5px",fontSize:"14px"},children:"Arreas"}),e.jsx("td",{}),e.jsx("td",{})]})]}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Total"}),e.jsx("th",{}),e.jsx("th",{})]})})]})]}),e.jsx(o,{style:{fontSize:"10px",fontStyle:"italic"},children:"Powered by FrebbyTech Consults (0543772591)"})]})]}),e.jsxs(W,{children:[e.jsx(b,{sx:{displayPrint:!1},children:"Ok"}),e.jsx(he,{pageStyle:'width:8.5in";min-height:11in"; margin:auto",padding:8px;',trigger:()=>e.jsx(b,{variant:"contained",children:"Print Report"}),content:()=>l.current})]})]})},Be=ne.memo(Ie),Qe=()=>{const{examsId:a}=N(),{palette:l}=O(),[n,r]=j.useState(""),{studentDispatch:i}=j.useContext(V),[t,m]=j.useState(!1),{data:s}=L(["student-records",a],()=>xe(a)),C=()=>{r(s==null?void 0:s.levelId),i({type:"showCurrentStudentAcademicsReportView",payload:{show:!0,examsDetails:s}})};return e.jsxs(le,{sx:{paddingY:2},maxWidth:"lg",children:[e.jsxs("div",{id:"printPage",children:[e.jsx(x,{justifyContent:"flex-end",direction:"row",children:e.jsx(o,{variant:"h3",children:"Student Examination Report"})}),e.jsx(A,{}),e.jsxs(x,{paddingY:2,justifyContent:"center",alignItems:"center",children:[e.jsx(F,{src:(s==null?void 0:s.profile)===""||(s==null?void 0:s.profile)===void 0||(s==null?void 0:s.profile)===null?null:s==null?void 0:s.profile,sx:{width:80,height:80}}),e.jsx(o,{variant:"h5",sx:{textTransform:"capitalize"},children:s==null?void 0:s.fullName}),e.jsx(o,{variant:"body2",children:s==null?void 0:s.level})]}),e.jsx(A,{}),e.jsxs(x,{children:[e.jsx(o,{variant:"h5",sx:{textAlign:"center",textDecoration:"underline",borderTop:`solid 5px ${l.secondary.main}`,bgcolor:"primary.main",color:"primary.contrastText",width:"100%",padding:1},children:"Examination Report"}),e.jsx(x,{justifyContent:"flex-end",direction:"row",paddingY:2,children:e.jsxs(ye,{children:[e.jsx(b,{startIcon:e.jsx(Ce,{}),variant:"contained",onClick:()=>m(!0),children:"New Score"}),e.jsx(b,{startIcon:e.jsx(be,{}),onClick:C,children:"View Report"})]})})]})]}),e.jsx(Be,{}),e.jsx(Te,{open:t,setOpen:m,levelId:n})]})};export{Qe as default};

import{r as d,_ as u,j as e,a1 as o,W as D,aR as x,bp as f,bq as j,R as _,V as L,Z as w,aP as l,U as q,g as N,G as A,a6 as S,q as C,D as I,aU as h,br as p,p as B,bs as F,L as R,a as c,d as T,J as H,M as O}from"./index-e0c0d8c9.js";import{R as $}from"./studentColumns-9e760bc6.js";import{d as U}from"./BarChartRounded-d57fde45.js";import{B as k,D as z}from"./index-331172f9.js";import{g as V}from"./studentAPI-fc20c9bb.js";import{D as g}from"./DashboardCard-9fc663b8.js";const W=({data:a})=>{const[t,s]=d.useState([]),[n,i]=d.useState([]);return d.useEffect(()=>{a&&(s(u.map(a,"term")),i(u.map(a,"student")))},[a]),e.jsx(o,{sx:{minWidth:100,height:100},children:e.jsx(k,{data:{labels:t,datasets:[{label:"No of Students",data:n,backgroundColor:[" rgb(1, 46, 84)","rgb(255, 192, 159)"]}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:2,autoPadding:!0},scales:{x:{ticks:{display:!1},grid:{display:!1}},y:{ticks:{display:!1},grid:{display:!1}}},plugins:{legend:{}}}})})},M=({data:a})=>{var t;return e.jsxs(x,{elevation:1,children:[e.jsx(f,{avatar:e.jsx(U,{}),title:`Students for ${a&&((t=a[0])==null?void 0:t.academicYear)}`}),e.jsx(j,{children:e.jsx(W,{data:a})})]})};M.propTypes={data:D.array};var m={},K=L;Object.defineProperty(m,"__esModule",{value:!0});var E=m.default=void 0,Y=K(_()),G=e;E=m.default=(0,Y.default)((0,G.jsx)("path",{d:"M21 5c0-1.1-.9-2-2-2h-9v5h11zM3 19c0 1.1.9 2 2 2h3V10H3zM3 5v3h5V3H5c-1.1 0-2 .9-2 2m14.65 4.35-2.79 2.79c-.32.32-.1.86.35.86H17v2c0 1.1-.9 2-2 2h-2v-1.79c0-.45-.54-.67-.85-.35l-2.79 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.31.31.85.09.85-.35V19h2c2.21 0 4-1.79 4-4v-2h1.79c.45 0 .67-.54.35-.85l-2.79-2.79c-.19-.2-.51-.2-.7-.01"}),"PivotTableChartRounded");const J=({females:a,males:t})=>{const{palette:s}=w();return e.jsxs(x,{elevation:1,children:[e.jsx(f,{avatar:e.jsx(E,{}),title:"Males & Females"}),e.jsx(j,{children:e.jsx(z,{datasetIdKey:"id",style:{height:120},data:{labels:["Males","Females"],datasets:[{data:[t,a],backgroundColor:[s.primary.main,s.secondary.main]}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:2},scales:{x:{ticks:{display:!1},grid:{display:!1}},y:{ticks:{display:!1},grid:{display:!1}}},plugins:{legend:{position:"bottom"}}}})})]})};var v={},Q=L;Object.defineProperty(v,"__esModule",{value:!0});var P=v.default=void 0,Z=Q(_()),X=e;P=v.default=(0,Z.default)((0,X.jsx)("path",{d:"M11 3.18v17.64c0 .64-.59 1.12-1.21.98C5.32 20.8 2 16.79 2 12s3.32-8.8 7.79-9.8c.62-.14 1.21.34 1.21.98m2.03 0v6.81c0 .55.45 1 1 1h6.79c.64 0 1.12-.59.98-1.22-.85-3.76-3.8-6.72-7.55-7.57-.63-.14-1.22.34-1.22.98m0 10.83v6.81c0 .64.59 1.12 1.22.98 3.76-.85 6.71-3.82 7.56-7.58.14-.62-.35-1.22-.98-1.22h-6.79c-.56.01-1.01.46-1.01 1.01"}),"PieChartRounded");const ee=({data:a})=>{const[t,s]=d.useState([]),[n,i]=d.useState([]);return d.useEffect(()=>{a&&(s(u.map(a,"level")),i(u.map(a,"students")))},[a]),e.jsxs(x,{elevation:1,children:[e.jsx(f,{avatar:e.jsx(P,{}),title:"Students"}),e.jsx(j,{children:e.jsx(o,{children:e.jsx(k,{datasetIdKey:"id",style:{minWidth:100,height:100},data:{labels:t,datasets:[{label:"Levels",data:n,backgroundColor:["#32D583","#ffc09f","#012E54"]}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:2},scales:{x:{ticks:{display:!1},grid:{display:!1}},y:{ticks:{display:!1},grid:{display:!1}}},plugins:{legend:{}}}})})})]})},ae=()=>e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",backgroundColor:"transparent",gap:3,paddingY:4},children:[e.jsx(l,{variant:"rounded",height:200}),e.jsx(l,{variant:"rounded",height:200}),e.jsx(l,{variant:"rounded",height:200}),e.jsx(l,{variant:"rounded",height:200})]}),oe=()=>{var s,n,i,y,b;const{userState:{session:a}}=d.useContext(q),t=N({queryKey:["student-details",a==null?void 0:a.sessionId,a==null?void 0:a.termId],queryFn:()=>V({sessionId:a.sessionId,termId:a.termId}),enabled:!!a.sessionId&&!!a.termId});return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Student Portal",subtitle:"Track,manage and control student information",img:S,color:"primary.main"}),e.jsx(C,{variant:"h5",py:2,children:"Student Details Summary"}),e.jsx(I,{}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gap:2,pt:2},children:[e.jsx(g,{title:"Students",value:108,icon:e.jsx(h,{sx:{bgcolor:"secondary.lighter"},children:e.jsx(p,{sx:{width:20,height:20,color:"secondary.darker"}})})}),e.jsx(g,{title:"Males",value:60,icon:e.jsx(h,{sx:{bgcolor:"warning.lighter"},children:e.jsx(p,{sx:{width:20,height:20,color:"warning.darker"}})})}),e.jsx(g,{title:"Females",value:48,icon:e.jsx(h,{sx:{bgcolor:"info.lighter"},children:e.jsx(p,{sx:{width:20,height:20,color:"info.darker"}})})})]}),e.jsx(C,{variant:"h5",py:2,children:"Chart History"}),e.jsx(I,{}),t.isLoading&&e.jsx(ae,{}),t.data&&e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gap:2,pt:2},children:[e.jsx(M,{data:(s=t==null?void 0:t.data)==null?void 0:s.noOfStudentsForEachTerm}),e.jsx(ee,{data:(n=t==null?void 0:t.data)==null?void 0:n.noOfStudentsInEachLevel}),e.jsx(J,{...t==null?void 0:t.data})]}),e.jsxs(o,{sx:{display:"flex",width:"100%",flexDirection:{xs:"column",lg:"row"},justifyContent:"space-between",pt:3,gap:2},children:[e.jsx(x,{sx:{borderRadius:"8px",overflow:"hidden",flex:1,minWidth:200},children:e.jsxs(B,{subheader:e.jsx(F,{title:"Number of Students",children:"Number of Students"}),children:[e.jsxs(R,{divider:!0,children:[e.jsx(c,{children:"Students"}),e.jsx(T,{children:e.jsx(c,{children:"Number"})})]}),(y=(i=t==null?void 0:t.data)==null?void 0:i.noOfStudentsInEachLevel)==null?void 0:y.map(r=>e.jsxs(R,{divider:!0,children:[e.jsx(c,{children:r==null?void 0:r.level}),e.jsx(T,{children:e.jsx(c,{children:r==null?void 0:r.students})})]},r==null?void 0:r.level))]})}),e.jsx(H,{title:"Recently Added Students",icon:S,isLoading:t.isLoading,columns:$,options:{paginationPosition:"bottom",pageSize:3,selection:!1},data:((b=t.data)==null?void 0:b.recentStudents)??[],actions:[],handleRefresh:t.refetch,addButtonImg:O.student,addButtonMessage:"ðŸ˜‘ No Students recently added !!!!",style:{border:"none",boxShadow:"0px 1px 5px rgba(0,0,0,0.07)"}})]})]})};export{oe as default};

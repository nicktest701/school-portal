import{r as n,a1 as x,m as h,c as f,_ as s,j as t,e as g,P as j,k as l,l as m,V as p}from"./index-B8PQHtjc.js";import{C as P}from"./CustomizedMaterialTable-BQoTtwVw.js";import{g as C}from"./currentFeeAPI-CpZ1DJJI.js";import{C as F}from"./CustomDatePicker-_ngoDY-2.js";import{c as d}from"./currencyFormatter-DjBDW3hY.js";import{f as c}from"./fee_ico-Dww4ulV8.js";import"./TabPanel-WHfZdNAn.js";import"./useThemeProps-CEPKeDia.js";import"./Toolbar-YM__bEFh.js";import"./Chip-DmEpgF7y.js";import"./Autocomplete-Dw57Ihk7.js";import"./Skeleton-DWRiBFRT.js";import"./ButtonGroup-ZC3qSltg.js";import"./ListItemText-DzMM1D1F.js";import"./InputAdornment-DAOlZ4uj.js";import"./index-BqG4A_N5.js";import"./DialogActions-BmNk8sop.js";import"./ListItem-CQImyTSy.js";import"./ListItemSecondaryAction-DOVMjMKm.js";import"./listItemButtonClasses-DySKLRoc.js";import"./Grid2-B2FVLpOz.js";import"./Link-kLE4_HTq.js";import"./ListItemButton-Di0YOqWQ.js";import"./Check-JB41DPzl.js";import"./DeleteOutline-BlPFLwFk.js";import"./images-B5fNBSni.js";import"./AdapterMoment-BOypM_74.js";import"./generateUtilityClasses-BPC_uuYP.js";import"./createTheme-DxYQS8Dz.js";import"./createStyled-CJd69Mvg.js";function b(){const{userState:{session:r}}=n.useContext(x),[i,u]=n.useState(h()),e=f({queryKey:["fees-for-day",i],queryFn:()=>C({session:r==null?void 0:r.sessionId,term:r==null?void 0:r.termId,date:i}),initialData:[],enabled:!!(r!=null&&r.sessionId)&&!!(r!=null&&r.termId)&&!!i}),y=n.useMemo(()=>{var o;return((o=e==null?void 0:e.data)==null?void 0:o.length)===0?0:s.sumBy(s.flatMap(e==null?void 0:e.data,"payment"),a=>Number(a==null?void 0:a.paid))},[e==null?void 0:e.data]);return t.jsxs(t.Fragment,{children:[t.jsx(g,{title:"Fee Payment History",subtitle:"View fee transactions",color:"primary.main"}),t.jsxs(t.Fragment,{children:[t.jsxs(j,{display:"flex",justifyContent:"space-between",alignItems:"center",my:4,children:[t.jsx(F,{label:"Date Of Payment",date:i,setDate:u,style:{width:300}}),t.jsxs(l,{children:[t.jsx(m,{textAlign:"right",children:"Total Amount"}),t.jsx(m,{textAlign:"right",variant:"h5",children:d(y)})]})]}),t.jsx(P,{isPending:e.isPending,icon:c,title:`Fee Payment on ${i.format("LL")}`,addButtonImg:c,addButtonMessage:"Payment not available",search:!0,handleRefresh:e.refetch,columns:[{title:"Student",field:"student"},{title:"Level",field:"level"},{title:"Amount Paid",field:"payment",render:({payment:o})=>t.jsx(t.Fragment,{children:o.map(a=>t.jsx(l,{direction:"row",columnGap:1,children:t.jsx(m,{variant:"caption",children:d(a.paid)})},a.date))})}],data:e==null?void 0:e.data,actions:[]})]})]})}b.propTypes={open:p.bool,setOpen:p.func};export{b as default};

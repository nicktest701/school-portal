import{j as r,S as s,A as p,a as I,T as e,_ as C,D as T,r as y,a0 as N,u as R,a1 as B,v as w,J as P,B as H,P as v}from"./index-a08c4904.js";import{a as u}from"./currentFeeAPI-8f601baa.js";import{C as S}from"./CustomizedMaterialTable-b0814305.js";import{R as E}from"./index-aa1164af.js";import{b}from"./sessionColumns-7f037633.js";import{C as L}from"./CustomTitle-d0e5d50c.js";import{B as D}from"./Back-26c0fe57.js";import{G}from"./GlobalSpinner-41b13204.js";import{P as M}from"./PrintRounded-a567cc73.js";import"./TabPanel-3210be1c.js";import"./Toolbar-172ad7c3.js";import"./MenuItem-ddd79fe9.js";import"./listItemTextClasses-cdd81f8c.js";import"./Chip-a33d5899.js";import"./Autocomplete-62a3dcdf.js";import"./Skeleton-f52aff28.js";import"./ButtonGroup-ed336fd9.js";import"./ListItemText-de69415f.js";import"./InputAdornment-16e34158.js";import"./CardContent-8cf1caa6.js";import"./ListItemSecondaryAction-33dcc31c.js";import"./Grid-d7986873.js";import"./useMediaQuery-dbbfc5b2.js";import"./ListItem-559aef15.js";import"./listItemButtonClasses-628cfd1a.js";import"./ListItemButton-b9f74f93.js";import"./Check-6932050c.js";import"./DeleteOutline-f3e83ed5.js";import"./images-ee905b8b.js";import"./Delete-ee750b69.js";import"./Add-3c6bb686.js";import"./currencyFormatter-1910a788.js";import"./CircleRounded-fed72031.js";import"./Edit-d3e93a55.js";import"./ArrowBackRounded-b2e199d9.js";const l="/assets/history_ico-167fe80a.svg",o=JSON.parse(localStorage.getItem("@school_info"));function O({student:i}){return r.jsx("div",{children:r.jsxs(s,{spacing:1,sx:{maxWidth:"8.5in",minHeight:"11in",margin:"auto",padding:"8px"},children:[r.jsxs(s,{direction:"row",justifyContent:"flex-start",alignItems:"center",columnGap:2,pb:2,children:[o!=null&&o.badge?r.jsx(p,{alt:"school logo",loading:"lazy",srcSet:`/images/users/${o==null?void 0:o.badge}`,sx:{width:40,height:40}}):r.jsx(I,{sx:{width:40,height:40}}),r.jsxs(s,{justifyContent:"flex-start",alignItems:"flex-start",children:[r.jsx(e,{variant:"h6",children:C.startCase(o==null?void 0:o.name)}),r.jsx(e,{variant:"caption",children:o==null?void 0:o.address}),r.jsx(e,{variant:"caption",children:o==null?void 0:o.location}),r.jsx(e,{variant:"caption",fontStyle:"italic",children:o==null?void 0:o.motto})]})]}),r.jsx(T,{}),r.jsx(e,{paragraph:!0,sx:{textAlign:"center",textDecoration:"underline",color:"primary",width:"100%",padding:"4px"},variant:"h6",children:"Fees Report"}),r.jsxs(s,{justifyContent:"center",alignItems:"center",spacing:1,pt:2,children:[r.jsx(p,{src:(i==null?void 0:i.profile)===""||(i==null?void 0:i.profile)===void 0||(i==null?void 0:i.profile)===null?null:i==null?void 0:i.profile,sx:{width:40,height:40,alignSelf:"center"}}),r.jsx(e,{children:i==null?void 0:i.fullName}),r.jsx(e,{variant:"caption",children:i==null?void 0:i.levelType})]}),r.jsx("div",{style:{flexGrow:1},children:r.jsx(S,{title:"Fees History",icon:l,addButtonImg:l,addButtonMessage:"No Fees History Found",exportFileName:i==null?void 0:i.fullName,columns:b,data:i==null?void 0:i.payment,actions:[],options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})}),r.jsx(e,{style:{fontSize:"10px",fontStyle:"italic"},children:"Powered by FrebbyTech Consults (0543772591)"})]})})}const z=()=>{var c,x,g,d,h,f,j;const{userState:{session:i}}=y.useContext(N),{state:n}=R(),[t]=B(),m=y.useRef(),a=w({queryKey:["student-fee-history",t.get("_id"),t.get("level_id")],queryFn:()=>u({sessionId:i.sessionId,termId:i==null?void 0:i.termId,studentId:t.get("_id"),levelId:t.get("level_id"),feeId:t.get("fid")}),enabled:!!t.get("_id")&&!!t.get("level_id")});return r.jsxs(r.Fragment,{children:[r.jsx(D,{to:n==null?void 0:n.prevPath,color:"primary.main"}),r.jsx(L,{title:((c=a==null?void 0:a.data)==null?void 0:c.fullName)||"",subtitle:(x=a==null?void 0:a.data)==null?void 0:x.levelType,color:"primary.main",icon:r.jsx(p,{srcSet:((g=a==null?void 0:a.data)==null?void 0:g.profile)===void 0||((d=a==null?void 0:a.data)==null?void 0:d.profile)===""?null:(h=a==null?void 0:a.data)==null?void 0:h.profile,sx:{width:70,height:70}})}),r.jsx(P,{children:r.jsx(r.Fragment,{children:r.jsx(S,{title:"Fees History",subtitle:"Showing details of student fees transactions",search:!0,icon:l,addButtonImg:l,addButtonMessage:"No Fees History Found",isLoading:a.isLoading,exportFileName:(f=a==null?void 0:a.data)==null?void 0:f.fullName,columns:b,data:(j=a==null?void 0:a.data)==null?void 0:j.payment,actions:[],handleRefresh:a.refetch,autoCompleteComponent:r.jsx(s,{direction:"row",spacing:1,children:r.jsx(E,{trigger:()=>r.jsx(H,{startIcon:r.jsx(M,{}),variant:"contained",children:"Print Report"}),content:()=>m.current})}),options:{paging:!1,selection:!1,columnsButton:!1},style:{border:"none"}})})}),r.jsx("div",{ref:m,className:"print-container",children:r.jsx(O,{student:a==null?void 0:a.data})}),a.isLoading&&r.jsx(G,{})]})};z.propTypes={open:v.bool,setOpen:v.func};export{z as default};

import{O as Ce,j as e,r as C,U as rt,S as fe,g as tt,a0 as ue,bq as jt,i as Pe,z as ft,l as Ie,m as S,n as R,T as u,t as we,B as G,an as Y,F as be,br as bt,v as $,q as I,b6 as B,aX as Tt,aI as Q,b7 as ge,b8 as Se,bs as St,V as H,bt as nt,bu as Ct,aD as Pt,aE as It,u as st,h as ot,C as lt,Y as wt,_ as je,a as f,w as pt,x as dt,f as mt,bv as ct,bw as zt,bx as vt,by as At,a9 as Wt,bz as Dt,X as Bt,aU as Nt,E as Lt,$ as Rt,aS as Ft,bA as Ot,aq as Et,aB as kt,bB as Mt,bC as Vt,a2 as _t,bD as qt,bE as Gt,G as Ut,J as Ht,K as at,A as Yt}from"./index-c7bc4969.js";import{g as $t}from"./termAPI-d4ccc502.js";import{M as X}from"./MedicalAllergy-bff25681.js";import{p as Xt,a as Kt}from"./studentAPI-6f57e41a.js";import{A as Qt}from"./ArrowForwardRounded-e480e233.js";import{S as Jt}from"./School-3589d5ee.js";import{N as Zt}from"./NoteRounded-7b8c486a.js";import{A as en}from"./AnimatedContainer-e139da34.js";import{I as tn}from"./studentColumns-19658f10.js";const nn=Ce(e.jsx("path",{d:"M20 21v-3h3v-2h-3v-3h-2v3h-3v2h3v3zm-4.97.5H5.66c-.72 0-1.38-.38-1.73-1l-2.36-4.1c-.36-.62-.35-1.38.01-2L7.92 3.49c.36-.61 1.02-.99 1.73-.99h4.7c.71 0 1.37.38 1.73.99l4.48 7.71c-.5-.13-1.02-.2-1.56-.2-.28 0-.56.02-.84.06L14.35 4.5h-4.7L3.31 15.41l2.35 4.09h7.89c.35.77.85 1.45 1.48 2M13.34 15c-.22.63-.34 1.3-.34 2H7.25l-.73-1.27 4.58-7.98h1.8l2.53 4.42c-.56.42-1.05.93-1.44 1.51l-2-3.49L9.25 15z"}),"AddToDrive"),ze=Ce(e.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),an=Ce(e.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0z"}),"CheckRounded");function rn({open:d,setOpen:s}){const{userState:{session:g}}=C.useContext(rt),{schoolSessionDispatch:P}=C.useContext(fe),[t,n]=C.useState({_id:"",levelType:"",students:[]}),[i,r]=C.useState({termId:"",sessionId:"",label:""}),a=tt({queryKey:["terms"],queryFn:()=>$t(),enabled:!!(g!=null&&g.sessionId),select:o=>o.filter(({to:p})=>ue(new Date(g.to))>ue(new Date(p))).map(({termId:p,sessionId:l,academicYear:x,term:w})=>({termId:p,sessionId:l,label:`${x},${w}`}))}),j=tt({queryKey:["previous-levels",i==null?void 0:i.termId],queryFn:()=>jt(i),enabled:!!(i!=null&&i.termId),select:o=>o.map(({_id:h,level:p,students:l})=>({_id:h,levelType:`${p.name}${p.type}`,students:l}))}),m=()=>{var o;((o=t==null?void 0:t.students)==null?void 0:o.length)!==0&&P({type:"openAddStudentFileDialog",payload:{data:t==null?void 0:t.students,type:"previous"}})};return e.jsxs(Pe,{open:d,maxWidth:"xs",fullWidth:!0,children:[e.jsx(ft,{children:" Students from Session"}),e.jsx(Ie,{children:e.jsxs(S,{spacing:2,paddingY:2,children:[e.jsx(R,{size:"small",options:a.data??[],noOptionsText:"No session available",disableClearable:!0,fullWidth:!0,value:i,onChange:(o,h)=>{n({_id:"",levelType:"",students:[]}),r(h)},isOptionEqualToValue:(o,h)=>o.termId===h.termId||h.termId===""||h.termId===null||h.termId===void 0,getOptionLabel:o=>o.label||"",renderInput:o=>e.jsx(u,{...o,label:"Select School Session"})}),e.jsx(R,{size:"small",options:(j==null?void 0:j.data)??[],noOptionsText:"No level available",disableClearable:!0,fullWidth:!0,value:t,onChange:(o,h)=>n(h),isOptionEqualToValue:(o,h)=>o._id===h._id||h._id===""||h._id===null||h._id===void 0,getOptionLabel:o=>o.levelType||"",renderInput:o=>e.jsx(u,{...o,label:"Select Level"})})]})}),e.jsxs(we,{children:[e.jsx(G,{onClick:()=>s(!1),children:"Cancel"}),e.jsx(G,{variant:"contained",onClick:m,disabled:!(t!=null&&t._id),children:"Load Students"})]})]})}const yt=({setMode:d})=>{const{studentState:{newStudent:{personal:s}},studentDispatch:g}=C.useContext(Y),[P,t]=C.useState(ue(s==null?void 0:s.dateofbirth)),n=(i,r)=>{i.dateofbirth=ue(P).format("L"),g({type:"addNewStudent",payload:{personal:{...i,isCompleted:!0}}}),r.setSubmitting(!1),d("photo-info")};return e.jsx(be,{initialValues:s,onSubmit:n,enableReinitialize:!0,validationSchema:bt,children:({values:i,errors:r,touched:a,setFieldValue:j,handleChange:m,handleSubmit:o,isSubmitting:h})=>e.jsxs(S,{py:2,spacing:2,children:[e.jsx(S,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{loading:h,variant:"contained",color:"primary",onClick:o,endIcon:e.jsx(ze,{}),children:"Continue"})}),e.jsx(I,{variant:"h5",color:"primary.main",bgcolor:"whitesmoke",p:1,sx:{fontWeight:"bold"},children:"Personal Details"}),e.jsx(u,{label:"Student ID",type:"text",sx:{maxWidth:300},size:"small",value:i.indexnumber,onChange:m("indexnumber"),error:!!(a.indexnumber&&r.indexnumber),helperText:a.indexnumber&&r.indexnumber}),e.jsxs(B,{children:[e.jsx(u,{label:"Firstname",type:"text",fullWidth:!0,size:"small",value:i.firstname,onChange:m("firstname"),error:!!(a.firstname&&r.firstname),helperText:a.firstname&&r.firstname}),e.jsx(u,{label:"Surname",fullWidth:!0,size:"small",value:i.surname,onChange:m("surname"),error:!!(a.surname&&r.surname),helperText:a.surname&&r.surname}),e.jsx(u,{label:"Othername",fullWidth:!0,size:"small",value:i.othername,onChange:m("othername"),error:!!(a.othername&&r.othername),helperText:a.othername&&r.othername})]}),e.jsxs(B,{children:[e.jsx(Tt,{label:"Date of Birth",date:P,setDate:t,disableFuture:!0,error:!!(a.dateofbirth&&r.dateofbirth),helperText:a.dateofbirth&&r.dateofbirth}),e.jsxs(u,{label:"Gender",select:!0,fullWidth:!0,size:"small",value:i.gender,onChange:m("gender"),error:!!(a.gender&&r.gender),helperText:a.gender&&r.gender,children:[e.jsx(Q,{value:"male",children:"Male"}),e.jsx(Q,{value:"female",children:"Female"})]})]}),e.jsxs(B,{children:[e.jsx(u,{label:"Email",fullWidth:!0,size:"small",row:3,maxRows:3,value:i.email,onChange:m("email"),error:!!(a.email&&r.email),helperText:a.email&&r.email}),e.jsx(u,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:i.phonenumber,onChange:m("phonenumber"),error:!!(a.phonenumber&&r.phonenumber),helperText:a.phonenumber&&r.phonenumber})]}),e.jsx(u,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,value:i.address,onChange:m("address"),error:!!(a.address&&r.address),helperText:a.address&&r.address}),e.jsxs(B,{children:[e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:ge,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:p=>p||"",value:i.residence,onChange:(p,l)=>j("residence",l),renderInput:p=>e.jsx(u,{...p,label:"Residence",fullWidth:!0,size:"small",error:!!(a.residence&&r.residence),helperText:a.residence&&r.residence})}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",loadingText:"Please wait....",options:Se,noOptionsText:"No Nationality available",getOptionLabel:p=>p||"",value:i.nationality,onChange:(p,l)=>j("nationality",l),renderInput:p=>e.jsx(u,{...p,label:"Nationality",fullWidth:!0,size:"small",error:!!(a.nationality&&r.nationality),helperText:a.nationality&&r.nationality})})]})]})})};yt.propTypes={};const sn=({setMode:d})=>{const{studentState:{newStudent:{parent:s}},studentDispatch:g}=C.useContext(Y),P=(t,n)=>{g({type:"addNewStudent",payload:{parent:{...t,isCompleted:!0}}}),n.setSubmitting(!1),d("medical-info")};return e.jsx(be,{initialValues:s,onSubmit:P,enableReinitialize:!0,validationSchema:St,children:({values:t,errors:n,touched:i,setFieldValue:r,handleChange:a,handleSubmit:j,isSubmitting:m})=>{var o,h,p,l,x,w,N,V,_,M,c,y,L,F,q,v,z,O,E,k,J,Z,ee,te,ne,ae,ie,re,se,oe,le,pe,de,me,ce,ye,xe,Te,U,ve,Ae,We,De,Be,Ne,Le,Re,Fe,Oe,Ee,ke,Me,Ve,_e,qe,Ge,Ue,He,Ye,$e,Xe,Ke,Qe,Je,Ze,et;return e.jsxs(S,{py:2,spacing:1,children:[e.jsxs("div",{style:{maxHeight:350,overflowY:"auto"},children:[e.jsxs(S,{py:2,spacing:1,children:[e.jsxs(S,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Parent/Guardian Information"}),e.jsx(H,{sx:{width:30,height:30,bgcolor:"primary.main"},children:"1"})]}),e.jsxs(B,{children:[e.jsx(u,{label:"Firstname",type:"text",fullWidth:!0,size:"small",value:(o=t==null?void 0:t.parent1)==null?void 0:o.firstname,onChange:a("parent1.firstname"),error:!!((h=i.parent1)!=null&&h.firstname&&((p=n.parent1)!=null&&p.firstname)),helperText:((l=i.parent1)==null?void 0:l.firstname)&&((x=n.parent1)==null?void 0:x.firstname)}),e.jsx(u,{label:"Surname",fullWidth:!0,size:"small",value:(w=t==null?void 0:t.parent1)==null?void 0:w.surname,onChange:a("parent1.surname"),error:!!((N=i.parent1)!=null&&N.surname&&((V=n.parent1)!=null&&V.surname)),helperText:((_=i.parent1)==null?void 0:_.surname)&&((M=n.parent1)==null?void 0:M.surname)})]}),e.jsxs(B,{children:[e.jsxs(u,{label:"Gender",select:!0,fullWidth:!0,size:"small",value:(c=t==null?void 0:t.parent1)==null?void 0:c.gender,onChange:a("parent1.gender"),error:!!((y=i.parent1)!=null&&y.gender&&((L=n.parent1)!=null&&L.gender)),helperText:((F=i.parent1)==null?void 0:F.gender)&&((q=n.parent1)==null?void 0:q.gender),children:[e.jsx(Q,{value:"male",children:"Male"}),e.jsx(Q,{value:"female",children:"Female"})]}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:nt,loadingText:"Please wait....",noOptionsText:"No Relationship available",getOptionLabel:b=>b||"",value:(v=t==null?void 0:t.parent1)==null?void 0:v.relationship,onInputChange:(b,T)=>r("parent1.relationship",T),renderInput:b=>{var T,A,W,D;return e.jsx(u,{...b,label:"Relationship",fullWidth:!0,size:"small",error:!!((T=i.parent1)!=null&&T.relationship&&((A=n.parent1)!=null&&A.relationship)),helperText:((W=i.parent1)==null?void 0:W.relationship)&&((D=n.parent1)==null?void 0:D.relationship)})}})]}),e.jsxs(B,{children:[e.jsx(u,{label:"Email",fullWidth:!0,size:"small",row:3,maxRows:3,value:(z=t==null?void 0:t.parent1)==null?void 0:z.email,onChange:a("parent1.email"),error:!!((O=i.parent1)!=null&&O.email&&((E=n.parent1)!=null&&E.email)),helperText:((k=i.parent1)==null?void 0:k.email)&&((J=n.parent1)==null?void 0:J.email)}),e.jsx(u,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:(Z=t==null?void 0:t.parent1)==null?void 0:Z.phonenumber,onChange:a("parent1.phonenumber"),error:!!((ee=i.parent1)!=null&&ee.phonenumber&&((te=n.parent1)!=null&&te.phonenumber)),helperText:((ne=i.parent1)==null?void 0:ne.phonenumber)&&((ae=n.parent1)==null?void 0:ae.phonenumber)})]}),e.jsx(u,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,multiline:!0,value:(ie=t==null?void 0:t.parent1)==null?void 0:ie.address,onChange:a("parent1.address"),error:!!((re=i.parent1)!=null&&re.address&&((se=n.parent1)!=null&&se.address)),helperText:((oe=i.parent1)==null?void 0:oe.address)&&((le=n.parent1)==null?void 0:le.address)}),e.jsxs(B,{children:[e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:ge,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:b=>b||"",value:(pe=t==null?void 0:t.parent1)==null?void 0:pe.residence,onChange:(b,T)=>r("parent1.residence",T),renderInput:b=>{var T,A,W,D;return e.jsx(u,{...b,label:"Residence",fullWidth:!0,size:"small",error:!!((T=i.parent1)!=null&&T.residence&&((A=n.parent1)!=null&&A.residence)),helperText:((W=i.parent1)==null?void 0:W.residence)&&((D=n.parent1)==null?void 0:D.residence)})}}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",loadingText:"Please wait....",options:Se,noOptionsText:"No Nationality available",getOptionLabel:b=>b||"",value:(de=t==null?void 0:t.parent1)==null?void 0:de.nationality,onChange:(b,T)=>r("parent1.nationality",T),renderInput:b=>{var T,A,W,D;return e.jsx(u,{...b,label:"Nationality",fullWidth:!0,size:"small",error:!!((T=i.parent1)!=null&&T.nationality&&((A=n.parent1)!=null&&A.nationality)),helperText:((W=i.parent1)==null?void 0:W.nationality)&&((D=n.parent1)==null?void 0:D.nationality)})}})]})]}),e.jsxs(S,{py:2,spacing:1,children:[e.jsxs(S,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Parent/Guardian Information"}),e.jsx(H,{sx:{width:30,height:30,bgcolor:"primary.main"},children:"2"})]}),e.jsxs(B,{children:[e.jsx(u,{label:"Firstname",type:"text",fullWidth:!0,size:"small",value:(me=t==null?void 0:t.parent2)==null?void 0:me.firstname,onChange:a("parent2.firstname"),error:!!((ce=i.parent2)!=null&&ce.firstname&&((ye=n.parent2)!=null&&ye.firstname)),helperText:((xe=i.parent2)==null?void 0:xe.firstname)&&((Te=n.parent2)==null?void 0:Te.firstname)}),e.jsx(u,{label:"Surname",fullWidth:!0,size:"small",value:(U=t==null?void 0:t.parent2)==null?void 0:U.surname,onChange:a("parent2.surname"),error:!!((ve=i.parent2)!=null&&ve.surname&&((Ae=n.parent2)!=null&&Ae.surname)),helperText:((We=i.parent2)==null?void 0:We.surname)&&((De=n.parent2)==null?void 0:De.surname)})]}),e.jsxs(B,{children:[e.jsxs(u,{label:"Gender",select:!0,fullWidth:!0,size:"small",value:(Be=t==null?void 0:t.parent2)==null?void 0:Be.gender,onChange:a("parent2.gender"),error:!!((Ne=i.parent2)!=null&&Ne.gender&&((Le=n.parent2)!=null&&Le.gender)),helperText:((Re=i.parent2)==null?void 0:Re.gender)&&((Fe=n.parent2)==null?void 0:Fe.gender),children:[e.jsx(Q,{value:"male",children:"Male"}),e.jsx(Q,{value:"female",children:"Female"})]}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:nt,loadingText:"Please wait....",noOptionsText:"No Relationship available",getOptionLabel:b=>b||"",value:(Oe=t==null?void 0:t.parent2)==null?void 0:Oe.relationship,onInputChange:(b,T)=>r("parent2.relationship",T),renderInput:b=>{var T,A,W,D;return e.jsx(u,{...b,label:"Relationship",fullWidth:!0,size:"small",error:!!((T=i.parent2)!=null&&T.relationship&&((A=n.parent2)!=null&&A.relationship)),helperText:((W=i.parent2)==null?void 0:W.relationship)&&((D=n.parent2)==null?void 0:D.relationship)})}})]}),e.jsxs(B,{children:[e.jsx(u,{label:"Email",fullWidth:!0,size:"small",row:3,maxRows:3,value:(Ee=t==null?void 0:t.parent2)==null?void 0:Ee.email,onChange:a("parent2.email"),error:!!((ke=i.parent2)!=null&&ke.email&&((Me=n.parent2)!=null&&Me.email)),helperText:((Ve=i.parent2)==null?void 0:Ve.email)&&((_e=n.parent2)==null?void 0:_e.email)}),e.jsx(u,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:(qe=t==null?void 0:t.parent2)==null?void 0:qe.phonenumber,onChange:a("parent2.phonenumber"),error:!!((Ge=i.parent2)!=null&&Ge.phonenumber&&((Ue=n.parent2)!=null&&Ue.phonenumber)),helperText:((He=i.parent2)==null?void 0:He.phonenumber)&&((Ye=n.parent2)==null?void 0:Ye.phonenumber)})]}),e.jsx(u,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,multiline:!0,value:($e=t==null?void 0:t.parent2)==null?void 0:$e.address,onChange:a("parent2.address"),error:!!((Xe=i.parent2)!=null&&Xe.address&&((Ke=n.parent2)!=null&&Ke.address)),helperText:((Qe=i.parent2)==null?void 0:Qe.address)&&((Je=n.parent2)==null?void 0:Je.address)}),e.jsxs(B,{children:[e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:ge,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:b=>b||"",value:(Ze=t==null?void 0:t.parent2)==null?void 0:Ze.residence,onChange:(b,T)=>r("parent2.residence",T),renderInput:b=>{var T,A,W,D;return e.jsx(u,{...b,label:"Residence",fullWidth:!0,size:"small",error:!!((T=i.parent2)!=null&&T.residence&&((A=n.parent2)!=null&&A.residence)),helperText:((W=i.parent2)==null?void 0:W.residence)&&((D=n.parent2)==null?void 0:D.residence)})}}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",loadingText:"Please wait....",options:Se,noOptionsText:"No Nationality available",getOptionLabel:b=>b||"",value:(et=t==null?void 0:t.parent2)==null?void 0:et.nationality,onChange:(b,T)=>r("parent2.nationality",T),renderInput:b=>{var T,A,W,D;return e.jsx(u,{...b,label:"Nationality",fullWidth:!0,size:"small",error:!!((T=i.parent2)!=null&&T.nationality&&((A=n.parent2)!=null&&A.nationality)),helperText:((W=i.parent2)==null?void 0:W.nationality)&&((D=n.parent2)==null?void 0:D.nationality)})}})]})]})]}),e.jsx(S,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{loading:m,variant:"contained",color:"primary",onClick:j,children:"Save & Continue"})})]})}})},xt=({setMode:d})=>{const{studentState:{newStudent:{medical:s}},studentDispatch:g}=C.useContext(Y),P=(t,n)=>{g({type:"addNewStudent",payload:{medical:{...t,isCompleted:!0}}}),n.setSubmitting(!1),d("academic-info")};return e.jsx(be,{initialValues:s,onSubmit:P,enableReinitialize:!0,validationSchema:Ct,children:({values:t,errors:n,touched:i,handleChange:r,handleSubmit:a,isSubmitting:j})=>{var m,o,h,p,l,x,w,N,V,_,M,c,y,L,F;return e.jsxs(S,{padding:2,spacing:1,children:[e.jsx(S,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{loading:j,variant:"contained",color:"primary",onClick:a,endIcon:e.jsx(ze,{}),children:"Continue"})}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Medical Records"}),e.jsx(I,{variant:"body2",color:"primary.main",children:"(Kindly note that this section, even though required, will not affect your child’s admission into the school)."}),e.jsxs(S,{width:{xs:"100%",md:"80%"},py:5,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(X,{title:"1. Heart Disease",value:t.heartDisease,setValue:r("heartDisease")}),e.jsx(X,{title:"2. Visual Impairment",value:t.visualImpairment,setValue:r("visualImpairment")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(X,{title:"3. Asthma",value:t.asthma,setValue:r("asthma")}),e.jsx(X,{title:"4. Hearing Impairment",value:t.hearingImpairment,setValue:r("hearingImpairment")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(X,{title:"5. Siezures",value:t.siezures,setValue:r("siezures")}),e.jsx(X,{title:"6. Physical Disability",value:t.physicalDisability,setValue:r("physicalDisability")})]})]}),e.jsxs(S,{py:2,spacing:1,children:[e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Emergency Contact"}),e.jsxs(B,{children:[e.jsx(u,{label:"Fullname",type:"text",fullWidth:!0,size:"small",value:(m=t==null?void 0:t.emergencyContact)==null?void 0:m.fullname,onChange:r("emergencyContact.fullname"),error:!!((o=i==null?void 0:i.emergencyContact)!=null&&o.fullname&&((h=n==null?void 0:n.emergencyContact)!=null&&h.fullname)),helperText:((p=i==null?void 0:i.emergencyContact)==null?void 0:p.fullname)&&((l=n==null?void 0:n.emergencyContact)==null?void 0:l.fullname)}),e.jsx(u,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:(x=t==null?void 0:t.emergencyContact)==null?void 0:x.phonenumber,onChange:r("emergencyContact.phonenumber"),error:!!((w=i==null?void 0:i.emergencyContact)!=null&&w.phonenumber&&((N=n==null?void 0:n.emergencyContact)!=null&&N.phonenumber)),helperText:((V=i==null?void 0:i.emergencyContact)==null?void 0:V.phonenumber)&&((_=n==null?void 0:n.emergencyContact)==null?void 0:_.phonenumber)})]}),e.jsx(B,{children:e.jsx(u,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,value:(M=t==null?void 0:t.emergencyContact)==null?void 0:M.address,onChange:r("emergencyContact.address"),error:!!((c=i==null?void 0:i.emergencyContact)!=null&&c.address&&((y=n==null?void 0:n.emergencyContact)!=null&&y.address)),helperText:((L=i==null?void 0:i.emergencyContact)==null?void 0:L.address)&&((F=n==null?void 0:n.emergencyContact)==null?void 0:F.address)})})]})]})}})};xt.propTypes={};function K({title:d,value:s}){return e.jsxs(S,{direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:3,children:[e.jsx(I,{textAlign:"right",fontSize:11,children:d}),e.jsx(Pt,{sx:{fontSize:11},value:s,control:e.jsx(It,{size:"small",checked:!0}),label:s,slotProps:{typography:{sx:{fontSize:11}}}})]})}function on({open:d,setOpen:s,setMode:g}){var F,q,v,z,O,E,k,J,Z,ee,te,ne,ae,ie,re,se,oe,le,pe,de,me,ce,ye,xe;const P=st(),t=JSON.parse(localStorage.getItem("@school_info")),{studentState:{newStudent:{personal:n,photo:i,medical:r,parent:a,academic:j},studentDispatch:m}}=C.useContext(Y),{schoolSessionDispatch:o}=C.useContext(fe),h=C.useRef(),[p,l]=C.useState(""),[x,w]=C.useState(!1),{mutateAsync:N,isLoading:V}=ot({mutationFn:Xt}),_=()=>{n.profile=i==null?void 0:i.profile,N({personal:n,medical:r,parent:a,academic:j},{onSettled:()=>{P.invalidateQueries(["students-by-current-level"]),P.invalidateQueries(["all-students"])},onSuccess:U=>{U&&(o(pt("New Student Added")),w(!0),l(U),localStorage.removeItem("@student"))},onError:U=>{o(dt(U))}})},M=()=>{p?(g("personal-info"),s(!1),m({type:"addNewStudent",payload:{}})):s(!1)},c={fontSize:11,color:"primary"},y={fontSize:10},L={width:"100%",borderBottom:"1px solid black",backgroundColor:"black",color:"#fff",padding:"2px"};return e.jsxs(Pe,{open:d,fullWidth:!0,maxWidth:"md",onClose:()=>s(!1),children:[e.jsx(lt,{title:"Admission Form",onClose:M}),e.jsxs(we,{children:[e.jsx(wt,{trigger:()=>e.jsx(G,{variant:"outlined",children:"Print Form"}),content:()=>h.current,documentTitle:"Admission"}),e.jsx($,{loading:V,variant:"contained",color:"primary",onClick:_,children:"Save Data"})]}),e.jsx(Ie,{children:e.jsxs(S,{className:"admission-form",ref:h,spacing:1,sx:{maxWidth:"8.5in",minHeight:"11in",margin:"auto",padding:"16px",border:"1px solid lightgray",position:"relative",backgroundSize:"contain",backgroundPosition:"center center !important"},children:[p&&e.jsx("small",{style:{position:"absolute",bottom:"0",right:0,paddingRight:"8px",paddingBottom:"8px"},children:p}),e.jsxs(S,{direction:"row",justifyContent:"center",alignItems:"flex-start",columnGap:2,children:[t!=null&&t.badge?e.jsx(H,{alt:"school logo",loading:"lazy",srcSet:`/images/users/${t==null?void 0:t.badge}`,sx:{width:70,height:70}}):e.jsx(e.Fragment,{}),e.jsxs(S,{justifyContent:"center",alignItems:"flex-end",width:"100%",children:[e.jsx(I,{variant:"h6",children:je.startCase(t==null?void 0:t.name)}),e.jsx(I,{variant:"caption",children:t==null?void 0:t.address}),e.jsx(I,{variant:"caption",children:t==null?void 0:t.location}),e.jsx(I,{variant:"caption",fontStyle:"italic",children:t==null?void 0:t.motto}),e.jsx(I,{variant:"h6",sx:{alignSelf:"flex-start"},children:"Admission Form"})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:e.jsx(H,{variant:"square",src:i==null?void 0:i.profile,sx:{alignSelf:"center",width:80,height:80}})}),e.jsxs("div",{style:{paddingBottom:"8px"},children:[e.jsx("legend",{style:L,children:"Personal Data"}),e.jsx(f,{secondary:"Student ID",primary:n==null?void 0:n.indexnumber,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Full Name",primary:`${n==null?void 0:n.surname} ${n==null?void 0:n.firstname} ${n==null?void 0:n.othername}`,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Date of Birth",primary:ue(new Date(n==null?void 0:n.dateofbirth)).format("LL"),primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Gender",primary:n==null?void 0:n.gender,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Email Address",primary:n==null?void 0:n.email,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Phone Number",primary:n==null?void 0:n.phonenumber,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Residence",primary:n==null?void 0:n.residence,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Nationality",primary:n==null?void 0:n.nationality,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Address",primary:n==null?void 0:n.address,primaryTypographyProps:c,secondaryTypographyProps:y})]})]}),e.jsxs("div",{style:{paddingBottom:"8px"},children:[e.jsx("legend",{style:L,children:"Parent/Guardian Information"}),e.jsxs(S,{children:[e.jsx(I,{color:"primary.main",sx:{fontWeight:"bold",fontSize:11},children:"Parent 1 / Guardian 1"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Surname",primary:(F=a==null?void 0:a.parent1)==null?void 0:F.surname,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"First Name",primary:(q=a==null?void 0:a.parent1)==null?void 0:q.firstname,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Relationship",primary:(v=a==null?void 0:a.parent1)==null?void 0:v.relationship,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Gender",primary:(z=a==null?void 0:a.parent1)==null?void 0:z.gender,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Email Address",primary:(O=a==null?void 0:a.parent1)==null?void 0:O.email,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Phone Number",primary:(E=a==null?void 0:a.parent1)==null?void 0:E.phonenumber,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Residence",primary:(k=a==null?void 0:a.parent1)==null?void 0:k.residence,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Nationality",primary:(J=a==null?void 0:a.parent1)==null?void 0:J.nationality,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Address",primary:(Z=a==null?void 0:a.parent1)==null?void 0:Z.address,primaryTypographyProps:c,secondaryTypographyProps:y})]})]}),e.jsxs(S,{children:[e.jsx(I,{color:"primary.main",sx:{fontWeight:"bold",fontSize:11},children:"Parent 2 / Guardian 2"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Surname",primary:(ee=a==null?void 0:a.parent2)==null?void 0:ee.surname,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"First Name",primary:(te=a==null?void 0:a.parent2)==null?void 0:te.firstname,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Relationship",primary:(ne=a==null?void 0:a.parent2)==null?void 0:ne.relationship,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Gender",primary:(ae=a==null?void 0:a.parent2)==null?void 0:ae.gender,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Email Address",primary:(ie=a==null?void 0:a.parent2)==null?void 0:ie.email,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Phone Number",primary:(re=a==null?void 0:a.parent2)==null?void 0:re.phonenumber,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Residence",primary:(se=a==null?void 0:a.parent2)==null?void 0:se.residence,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Nationality",primary:(oe=a==null?void 0:a.parent2)==null?void 0:oe.nationality,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Address",primary:(le=a==null?void 0:a.parent2)==null?void 0:le.address,primaryTypographyProps:c,secondaryTypographyProps:y})]})]})]}),e.jsxs("div",{style:{paddingBottom:"8px"},children:[e.jsx("legend",{style:L,children:"Medical Records"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(K,{title:"1. Heart Disease",value:r.heartDisease}),e.jsx(K,{title:"2. Asthma",value:r.asthma}),e.jsx(K,{title:"3. Siezures",value:r.siezures}),e.jsx(K,{title:"4. Visual Impairment",value:r.visualImpairment}),e.jsx(K,{title:"5. Hearing Impairment",value:r.hearingImpairment}),e.jsx(K,{title:"6. Physical Disability",value:r.physicalDisability})]}),e.jsx(I,{color:"primary.main",sx:{fontWeight:"bold",fontSize:11},children:"Emergency Contact"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Fullname",primary:(pe=r==null?void 0:r.emergencyContact)==null?void 0:pe.fullname,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Phone Number",primary:(de=r==null?void 0:r.emergencyContact)==null?void 0:de.phonenumber,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Address",primary:(me=r==null?void 0:r.emergencyContact)==null?void 0:me.address,primaryTypographyProps:c,secondaryTypographyProps:y})]})]}),e.jsxs("div",{style:{paddingBottom:"8px"},children:[e.jsx("legend",{style:L,children:"Academic Records"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(260px,1fr))"},children:[e.jsx(f,{secondary:"Current Level",primary:(ce=j==null?void 0:j.level)==null?void 0:ce.type,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Previous School Name",primary:(ye=j==null?void 0:j.previousSchool)==null?void 0:ye.name,primaryTypographyProps:c,secondaryTypographyProps:y}),e.jsx(f,{secondary:"Location",primary:(xe=j==null?void 0:j.previousSchool)==null?void 0:xe.location,primaryTypographyProps:c,secondaryTypographyProps:y})]})]})]})})]})}const ht=({setMode:d})=>{var h;const{studentState:{newStudent:{academic:s}},studentDispatch:g}=C.useContext(Y),[P,t]=C.useState(!1),[n,i]=C.useState((h=s==null?void 0:s.previousSchool)==null?void 0:h.report),{levelsOption:r}=mt(),{getRootProps:a,getInputProps:j,open:m}=ct({noClick:!0,noKeyboard:!0,maxFiles:1,accept:{"image/*":[".jpeg",".png",".webp"],"application/pdf":[".pdf"]},multiple:!1,onDrop:p=>{if(!je.isEmpty(p)){const l=new FileReader;l.onload=function(x){const w=x.target.result;i(w)},l.readAsDataURL(p[0])}}}),o=(p,l)=>{p.previousSchool.report=n,g({type:"addNewStudent",payload:{academic:{...p,isCompleted:!0}}}),l.setSubmitting(!1),t(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(be,{initialValues:s,onSubmit:o,enableReinitialize:!0,validationSchema:zt,children:({values:p,errors:l,touched:x,setFieldValue:w,handleChange:N,handleSubmit:V,isSubmitting:_})=>{var M,c,y,L,F,q;return e.jsxs(S,{py:2,spacing:1,children:[e.jsx(S,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{loading:_,variant:"contained",color:"primary",onClick:V,endIcon:e.jsx(ze,{}),children:"Continue"})}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Academic Records"}),e.jsx(B,{children:e.jsx(R,{fullWidth:!0,size:"small",options:r,noOptionsText:"No Level available",getOptionLabel:v=>v.type||"",isOptionEqualToValue:(v,z)=>z._id===void 0||z._id===""||z._id===v._id,value:p.level,onChange:(v,z)=>w("level",z),renderInput:v=>{var z,O,E,k;return e.jsx(u,{...v,label:"Current Level",fullWidth:!0,size:"small",error:!!((z=x==null?void 0:x.level)!=null&&z.type&&((O=l==null?void 0:l.level)!=null&&O.type)),helperText:((E=x==null?void 0:x.level)==null?void 0:E.type)&&((k=l==null?void 0:l.level)==null?void 0:k.type)})}})}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Previous School Records"}),e.jsxs(B,{children:[e.jsx(u,{label:"School Name",type:"text",fullWidth:!0,size:"small",value:(M=p==null?void 0:p.previousSchool)==null?void 0:M.name,onChange:N("previousSchool.name"),error:!!((c=x==null?void 0:x.previousSchool)!=null&&c.name&&((y=l==null?void 0:l.previousSchool)!=null&&y.name)),helperText:((L=x==null?void 0:x.previousSchool)==null?void 0:L.name)&&((F=l==null?void 0:l.previousSchool)==null?void 0:F.name)}),e.jsx(R,{freeSolo:!0,fullWidth:!0,size:"small",options:ge,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:v=>v||"",value:(q=p==null?void 0:p.previousSchool)==null?void 0:q.location,onInputChange:(v,z)=>w("previousSchool.location",z),renderInput:v=>{var z,O,E,k;return e.jsx(u,{...v,label:"Location",fullWidth:!0,size:"small",error:!!((z=x==null?void 0:x.previousSchool)!=null&&z.location&&((O=l==null?void 0:l.previousSchool)!=null&&O.location)),helperText:((E=x==null?void 0:x.previousSchool)==null?void 0:E.location)&&((k=l==null?void 0:l.previousSchool)==null?void 0:k.location)})}})]}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"A copy of the most recent school report"}),e.jsx(S,{padding:2,spacing:1,...a({className:"dropzone"}),style:{border:"1px dashed black"},children:e.jsxs(S,{spacing:2,justifyContent:"center",alignItems:"center",paddingY:1,children:[e.jsx(H,{variant:"square",src:n,sx:{width:120,height:120},children:e.jsx(vt,{})}),e.jsxs(S,{children:[e.jsx("input",{...j()}),e.jsx(I,{textAlign:"center",paragraph:!0,children:"Drag & drop your report here"}),e.jsx(G,{variant:"outlined",onClick:m,startIcon:e.jsx(nn,{}),children:"Upload Report"})]}),!je.isEmpty(n)&&e.jsx("iframe",{style:{width:"100%",height:"5in"},src:n})]})})]})}}),e.jsx(on,{open:P,setOpen:t,setMode:d})]})};ht.propTypes={};const ut=({setMode:d})=>{const{studentState:{newStudent:{photo:s}},studentDispatch:g}=C.useContext(Y),[P,t]=C.useState(s==null?void 0:s.profile),{getRootProps:n,getInputProps:i,open:r}=ct({noClick:!0,noKeyboard:!0,maxFiles:1,accept:{"image/*":[".jpeg",".png"]},maxSize:2e5,multiple:!1,onDrop:j=>{if(!je.isEmpty(j)){const m=new FileReader;m.onload=function(o){const h=o.target.result;t(h)},m.readAsDataURL(j[0])}}});C.useEffect(()=>{var m;const j=JSON.parse(localStorage.getItem("@student"));if(j){t((m=j==null?void 0:j.photo)==null?void 0:m.profile);return}},[]);const a=()=>{g({type:"addNewStudent",payload:{photo:{profile:P,isCompleted:!0}}}),d("parent-info")};return e.jsxs(S,{padding:2,spacing:1,...n({className:"dropzone"}),style:{border:"1px dashed black"},children:[e.jsx(S,{direction:"row",justifyContent:"flex-end",spacing:2,children:e.jsx($,{variant:"contained",size:"small",onClick:a,endIcon:e.jsx(Qt,{}),children:"Continue"})}),e.jsx(I,{variant:"body2",color:"primary.main",sx:{fontWeight:"bold"},children:"Upload Photo"}),e.jsxs(S,{spacing:2,justifyContent:"center",alignItems:"center",paddingY:1,children:[e.jsx(H,{variant:"square",src:P,sx:{width:120,height:120}}),e.jsxs(S,{children:[e.jsx("input",{...i()}),e.jsx(I,{textAlign:"center",paragraph:!0,children:"Drag & drop your photo here"}),e.jsx(G,{variant:"outlined",onClick:r,startIcon:e.jsx(At,{}),children:"Upload Image"})]})]})]})};ut.propTypes={};function he({initValue:d,title:s,isCompleted:g,showProgress:P}){return e.jsxs(e.Fragment,{children:[e.jsxs(S,{justifyContent:"center",alignItems:"çenter",children:[e.jsx(H,{sx:{alignSelf:"center",mb:1,bgcolor:g?"success.main":null},children:g?e.jsx(an,{}):d}),e.jsx("small",{children:s})]}),P&&e.jsx(Wt,{variant:"determinate",sx:{width:80,borderRadius:1,bgcolor:g?"success.main":null},color:g?"success":"primary",value:g?100:0})]})}const ln=()=>{var s,g,P,t,n;const{studentState:{newStudent:d}}=C.useContext(Y);return e.jsxs(Dt,{sx:{width:"100%",display:"flex",justifyContent:"center",py:2},children:[e.jsx(he,{initValue:1,title:"Personal Details",showProgress:!0,isCompleted:(s=d==null?void 0:d.personal)==null?void 0:s.isCompleted}),e.jsx(he,{initValue:2,title:"Upload Photo",showProgress:!0,isCompleted:(g=d==null?void 0:d.photo)==null?void 0:g.isCompleted}),e.jsx(he,{initValue:3,title:"Guardian Information",showProgress:!0,isCompleted:(P=d==null?void 0:d.parent)==null?void 0:P.isCompleted}),e.jsx(he,{initValue:4,title:"Medical Records",showProgress:!0,isCompleted:(t=d==null?void 0:d.medical)==null?void 0:t.isCompleted}),e.jsx(he,{initValue:5,title:"Academic Records",showProgress:!1,isCompleted:(n=d==null?void 0:d.academic)==null?void 0:n.isCompleted})]})},it="text/csv",pn="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",dn="application/vnd.ms-excel",gt=()=>{const{schoolSessionDispatch:d}=C.useContext(fe),[s,g]=C.useState("personal-info"),[P,t]=C.useState(!1),n=Bt(),i=Nt(n.breakpoints.up("md")),r="Are you sure you want to leave this page? Your changes may not be saved.";C.useEffect(()=>{const m=o=>{o.preventDefault(),o.returnValue=r};return window.addEventListener("beforeunload",m),()=>{window.removeEventListener("beforeunload",m)}},[]);function a(m){const o=m.target.files[0];try{const h=new FileReader;o.type===it?h.readAsBinaryString(o):h.readAsArrayBuffer(o),h.onload=function(p){let l=[];(o.type===pn||o.type===dn)&&(l=qt(p.target.result)),o.type===it&&(l=Gt(p.target.result)),l.length!==0&&d({type:"openAddStudentFileDialog",payload:{data:l,type:"file"}})}}catch{}}const j=()=>{let m=s;switch(s){case"photo-info":m="personal-info";break;case"parent-info":m="photo-info";break;case"medical-info":m="parent-info";break;case"academic-info":m="medical-info";break;default:m="photo-info"}return m};return e.jsxs(e.Fragment,{children:[e.jsxs(e.Fragment,{children:[e.jsx(Lt,{title:"New Student",subtitle:"  Track,manage and control academic and class activities",icon:e.jsx(Jt,{sx:{width:30,height:30}}),color:"primary.main"}),i&&e.jsx(ln,{}),e.jsxs(Rt,{children:[s!=="personal-info"&&e.jsx(Ft,{onClick:()=>g(j()),children:e.jsx(Ot,{})}),e.jsxs(Et,{size:"small",sx:{display:"flex",justifyContent:"flex-end",py:2},children:[e.jsx(G,{children:e.jsxs(kt,{htmlFor:"studentFile",title:"Import students",sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,color:"primary.main",fontSize:11,cursor:"pointer"},children:[e.jsx(Zt,{}),e.jsx(I,{variant:"caption",children:"From file"}),e.jsx(Mt,{type:"file",id:"studentFile",name:"studentFile",hidden:!0,inputProps:{accept:".xlsx,.xls,.csv"},onChange:a,onClick:m=>{m.target.value=null,m.currentTarget.value=null}})]})}),e.jsx(G,{startIcon:e.jsx(Vt,{}),onClick:()=>t(!0),children:"From Previous Sessions"})]})]}),e.jsxs(_t,{sx:{py:2,border:"1px solid lightgray"},children:[s==="personal-info"&&e.jsx(yt,{mode:s,setMode:g}),s==="photo-info"&&e.jsx(ut,{mode:s,setMode:g}),s==="parent-info"&&e.jsx(sn,{mode:s,setMode:g}),s==="medical-info"&&e.jsx(xt,{mode:s,setMode:g}),s==="academic-info"&&e.jsx(ht,{setMode:g})]})]}),e.jsx(rn,{open:P,setOpen:t})]})};gt.propTypes={};function mn(){var l;const{userState:{session:d}}=C.useContext(rt),s=st(),[g,P]=C.useState(""),[t,n]=C.useState({_id:"",type:""}),{schoolSessionState:i,schoolSessionDispatch:r}=C.useContext(fe),a=i.addStudentFileData,{levelsOption:j}=mt(),m=()=>{at.fire({title:"Exiting",text:"Do you want to exit?",showCancelButton:!0}).then(({isConfirmed:x})=>{x&&r({type:"closeAddStudentFileDialog"})})},{mutateAsync:o,isLoading:h}=ot({mutationFn:Kt}),p=()=>{if(P(""),t._id===""){P("Please select a level!");return}const x={students:a==null?void 0:a.data,session:{sessionId:d.sessionId,termId:d.termId,levelId:t._id},type:a.type};at.fire({title:"Importing students",text:`Do you want to import students in ${t.type}?`,showCancelButton:!0}).then(({isConfirmed:w})=>{w&&o(x,{onSettled:()=>{s.invalidateQueries(["all-students"])},onSuccess:N=>{r(pt(N)),r({type:"closeAddStudentFileDialog"})},onError:N=>{r(dt(N))}})})};return e.jsxs(Pe,{open:a.open,fullScreen:!0,fullWidth:!0,children:[e.jsx(lt,{title:"Students",subtitle:"import students from file or previous academic year",onClose:m}),e.jsxs(we,{sx:{paddingX:3},children:[e.jsx(G,{onClick:m,children:"Cancel"}),e.jsx($,{variant:"contained",loading:h,onClick:p,children:"Import Students"})]}),e.jsx(R,{size:"small",options:j,noOptionsText:"No Level available",getOptionLabel:x=>x.type||"",isOptionEqualToValue:(x,w)=>w._id===void 0||w._id===""||w._id===x._id,value:t,onChange:(x,w)=>n(w),renderInput:x=>e.jsx(u,{...x,label:"Select Level",size:"small",error:!!g,helperText:g,required:!0,FormHelperTextProps:{sx:{color:"error.main"}}}),sx:{width:250,marginLeft:3}}),e.jsx(Ie,{children:((l=a.data)==null?void 0:l.length)===0?e.jsx(I,{children:"No data available"}):e.jsx(Ut,{title:(t==null?void 0:t.type)||"Students",icon:Ht.student,columns:tn,data:a==null?void 0:a.data,options:{pageSize:10,pageSizeOptions:[10,20,30,50]},actions:[]})})]})}const cn=()=>{const[d,s]=C.useState({severity:"",text:""});return e.jsxs(e.Fragment,{children:[d.text&&e.jsx(Yt,{severity:d.severity,onClose:()=>s({text:""}),children:d.text}),e.jsx(e.Fragment,{children:e.jsx(en,{children:e.jsx(gt,{msg:d,setMsg:s})})}),e.jsx(mn,{})]})};cn.propTypes={};export{cn as default};

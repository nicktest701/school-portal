import{r,U as y,S as C,u as T,h as B,j as o,ae as d,F as w,X as W,bF as I,a8 as E,m as A,T as a,v as F,bJ as N,w as m,x as p,bK as U,G as k,D}from"./index-97ebb758.js";const J="/assets/settings_ico-71e8260e.svg";function L(){const s=JSON.parse(localStorage.getItem("@school_info")),{userDispatch:x}=r.useContext(y),[h,g]=r.useState(`/images/users/${s==null?void 0:s.badge}`),{schoolSessionDispatch:l}=r.useContext(C),c=T(),{mutateAsync:b}=B({mutationFn:N}),S=(e,n)=>{b(e,{onSettled:()=>{n.setSubmitting(!1),c.invalidateQueries(["school"])},onSuccess:t=>{localStorage.setItem("@school_info",JSON.stringify(e)),x({type:"setUserInfo",payload:t}),l(m(t))},onError:t=>{l(p(t))}})},f=async e=>{var t;const n=(t=e.target)==null?void 0:t.files[0];try{const i=await U(n);l(m("School Image Uploaded")),c.invalidateQueries(["school"]),g(`/images/users/${i}`),s.badge=i,localStorage.setItem("@school_info",JSON.stringify(s))}catch{l(p("Error updating school logo"))}};return o.jsx(d,{maxWidth:"md",children:o.jsx(w,{initialValues:s,onSubmit:S,enableReinitialize:!0,children:({values:e,errors:n,touched:t,handleChange:i,handleSubmit:u,isSubmitting:j})=>o.jsxs(o.Fragment,{children:[o.jsx(W,{sx:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginY:2},children:o.jsx(I,{handleImageUpload:f,children:o.jsx(E,{src:h,sx:{width:120,height:120,justifySelf:"center",alignSelf:"center"}})})}),o.jsxs(A,{spacing:3,pt:4,children:[o.jsx(a,{label:"School Name",placeholder:"School Name",type:"text",fullWidth:!0,value:e==null?void 0:e.name,onChange:i("name"),error:!!(t.name&&n.name),helperText:t.name&&n.name}),o.jsx(a,{label:"Address",placeholder:"Address",type:"text",fullWidth:!0,value:e==null?void 0:e.address,onChange:i("address"),error:!!(t.address&&n.address),helperText:t.address&&n.address}),o.jsx(a,{label:"Location",placeholder:"Location",type:"text",fullWidth:!0,value:e==null?void 0:e.location,onChange:i("location"),error:!!(t.location&&n.location),helperText:t.location&&n.location}),o.jsx(a,{label:"Email Address",placeholder:"Email Address",type:"email",inputMode:"email",fullWidth:!0,value:e==null?void 0:e.email,onChange:i("email"),error:!!(t.email&&n.email),helperText:t.email&&n.email}),o.jsx(a,{label:"Website",placeholder:"Website",type:"text",fullWidth:!0,value:e==null?void 0:e.website,onChange:i("website"),error:!!(t.website&&n.website),helperText:t.website&&n.website}),o.jsx(a,{label:"Phone Number",placeholder:"e.g. 0244192831-0233847287",type:"text",fullWidth:!0,value:e==null?void 0:e.phonenumber,onChange:i("phonenumber"),error:!!(t.phonenumber&&n.phonenumber),helperText:t.phonenumber&&n.phonenumber?n.phonenumber:'Separate multiple phone numbers with " - "'}),o.jsx(a,{label:"Motto",placeholder:"Motto",type:"text",fullWidth:!0,value:e==null?void 0:e.motto,onChange:i("motto"),error:!!(t.motto&&n.motto),helperText:t.motto&&n.motto}),o.jsx(F,{loading:j,variant:"contained",color:"primary",onClick:u,children:"Save Settings"})]})]})})})}const M=()=>o.jsxs(d,{children:[o.jsx(k,{title:"Settings",subtitle:"Customize and configure system settings to tailor the platform to your school's specific needs.",img:J,backColor:"#012e54"}),o.jsx(D,{}),o.jsx(L,{})]});M.propTypes={};export{M as default};

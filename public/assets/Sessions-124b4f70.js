import{u as j,a as B,r as h,S as T,b as I,c as _,d as l,j as o,C as F,e as O,f as c,g as d,h as m,_ as R}from"./index-ce442eb1.js";import{s as S}from"./session_ico-19a9b5ce.js";import{S as L}from"./sessionColumns-a7ba1da8.js";import{g as N,d as P,a as Q,b as G}from"./termAPI-177926e4.js";import{C as q}from"./CustomizedMaterialTable-06b57d17.js";import{E as Y}from"./images-ee905b8b.js";import{G as z}from"./GlobalSpinner-9c6fc1be.js";import"./currencyFormatter-1910a788.js";import"./CircleRounded-06f2dceb.js";import"./Edit-009e8578.js";import"./Delete-fb41f478.js";import"./ListItemText-b107adf9.js";import"./Chip-15117b24.js";import"./TabPanel-47a179c1.js";import"./Toolbar-8b116404.js";import"./Autocomplete-87c4b1e1.js";import"./Skeleton-b715010d.js";import"./ButtonGroup-ca857561.js";import"./InputAdornment-92a613d9.js";import"./DialogActions-c9d7df2e.js";import"./ListItemSecondaryAction-660d9daa.js";import"./useMediaQuery-5bcb3f64.js";import"./ListItem-2727fabf.js";import"./listItemButtonClasses-c7063ebe.js";import"./ListItemButton-97ec9750.js";import"./Check-4cc8eef7.js";import"./DeleteOutline-78b9d3f1.js";const we=()=>{const f=j(),[H,y]=B(),{schoolSessionDispatch:n}=h.useContext(T),a=I(),[g,b]=h.useState([]),i=_({queryKey:["terms"],queryFn:()=>N(),initialData:[]}),{mutateAsync:w}=l({mutationFn:P}),u=e=>{c.fire({title:"Removing Session",html:` <div style='text-align:left;display:flex;flex-direction:column;gap:8px;'>
    <p>  You are about to delete an entire academic term. This action is irreversible and will permanently remove all associated data,including:</p>
      <ul style='padding-block:8px;'>
 <li style='font-weight:bold;'>Class schedules</li>
<li style='font-weight:bold;'>Student enrollments</li>
<li style='font-weight:bold;'>Attendance records</li>
<li style='font-weight:bold;'>Grades and assignments</li>
</ul>

         <p>   Please proceed with caution. If you are certain you want to delete
            this academic year, click &apos;Confirm.&apos; Otherwise, click
            &apos;Cancel&apos; to keep the academic year intact.</p>
          <p style='color:var(--secondary);font-weight:bold;'>Are you sure you want to delete this academic term?</p>
        </div>`,showCancelButton:!0,backdrop:"rgba(0,0,0,0.2)"}).then(({isConfirmed:t})=>{t&&w(e,{onSettled:()=>{a.invalidateQueries(["terms"])},onSuccess:s=>{n(d(s))},onError:s=>{n(m(s))}})})},C=e=>{b(e)},{mutateAsync:x,isLoading:v}=l({mutationFn:Q}),E=()=>{c.fire({title:"Removing Session",text:"You are about to remove the selected sessions. Removing session will delete all of its related content.Changes cannot be undone. Do you want to remove?",showCancelButton:!0,backdrop:!1}).then(({isConfirmed:e})=>{const t=R.map(g,"termId");e&&x(t,{onSettled:()=>{a.invalidateQueries(["terms"])},onSuccess:s=>{n(d(s))},onError:s=>{n(m(s))}})})},A=e=>{f(`/session/${e==null?void 0:e.termId}`)},p=e=>{y(t=>(t.set("_id",e==null?void 0:e.termId),t.set("edit_session",!0),t))},D=()=>{n({type:"displayAddSession",payload:!0})},{mutateAsync:M}=l({mutationFn:G}),k=({_id:e,active:t})=>{c.fire({title:t?"Do you want to disable this session":"Do you want to enable this session",text:t?"Disabling Session":"Enabling Session",showCancelButton:!0,backdrop:!1}).then(s=>{s.isConfirmed&&M({_id:e,active:!t},{onSuccess:r=>{a.invalidateQueries(["terms"]),n(d(r))},onError:r=>{n(m(r))}})})};return o.jsxs(o.Fragment,{children:[o.jsxs(F,{children:[o.jsx(O,{title:"School Session",subtitle:"Create, update, and oversee academic sessions to ensure smooth academic operations",img:S,color:"primary.main"}),o.jsx(o.Fragment,{children:o.jsx(q,{title:"Sessions",icon:S,isLoading:i.isLoading,columns:L(k,A,p,u),data:i.data?i.data:[],actions:[],showRowShadow:!1,handleEdit:p,handleDelete:u,addButtonImg:Y.session,addButtonMessage:"ðŸ˜‘ No School Session available!.Create a new one!",showAddButton:!0,addButtonText:"New Session",onAddButtonClicked:D,handleRefresh:i.refetch,onSelectionChange:C,onDeleteClicked:E,options:{search:!0}})})]}),v&&o.jsx(z,{})]})};export{we as default};

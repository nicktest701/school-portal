import{r as m,a0 as x,h,v as f,_ as s,j as t,J as g,S as l,T as n,P as p}from"./index-a08c4904.js";import{C as j}from"./CustomizedMaterialTable-b0814305.js";import{g as C}from"./currentFeeAPI-8f601baa.js";import{C as P}from"./CustomDatePicker-c37da33c.js";import{c as d}from"./currencyFormatter-1910a788.js";import{f as u}from"./fee_ico-578bcc38.js";import{C as F}from"./CustomTitle-d0e5d50c.js";import"./TabPanel-3210be1c.js";import"./Toolbar-172ad7c3.js";import"./MenuItem-ddd79fe9.js";import"./listItemTextClasses-cdd81f8c.js";import"./Chip-a33d5899.js";import"./Autocomplete-62a3dcdf.js";import"./Skeleton-f52aff28.js";import"./ButtonGroup-ed336fd9.js";import"./ListItemText-de69415f.js";import"./InputAdornment-16e34158.js";import"./CardContent-8cf1caa6.js";import"./ListItemSecondaryAction-33dcc31c.js";import"./Grid-d7986873.js";import"./useMediaQuery-dbbfc5b2.js";import"./ListItem-559aef15.js";import"./listItemButtonClasses-628cfd1a.js";import"./ListItemButton-b9f74f93.js";import"./Check-6932050c.js";import"./DeleteOutline-f3e83ed5.js";import"./images-ee905b8b.js";import"./Delete-ee750b69.js";import"./Add-3c6bb686.js";function b(){const{userState:{session:r}}=m.useContext(x),[i,c]=m.useState(h()),e=f({queryKey:["fees-for-day",i],queryFn:()=>C({session:r==null?void 0:r.sessionId,term:r==null?void 0:r.termId,date:i}),initialData:[],enabled:!!(r!=null&&r.sessionId)&&!!(r!=null&&r.termId)&&!!i}),y=m.useMemo(()=>{var o;return((o=e==null?void 0:e.data)==null?void 0:o.length)===0?0:s.sumBy(s.flatMap(e==null?void 0:e.data,"payment"),a=>Number(a==null?void 0:a.paid))},[e==null?void 0:e.data]);return t.jsxs(t.Fragment,{children:[t.jsx(F,{title:"Fee Payment History",subtitle:"View fee transactions",color:"primary.main"}),t.jsxs(t.Fragment,{children:[t.jsxs(g,{display:"flex",justifyContent:"space-between",alignItems:"center",my:4,children:[t.jsx(P,{label:"Date Of Payment",date:i,setDate:c,style:{width:300}}),t.jsxs(l,{children:[t.jsx(n,{textAlign:"right",children:"Total Amount"}),t.jsx(n,{textAlign:"right",variant:"h5",children:d(y)})]})]}),t.jsx(j,{isLoading:e.isLoading,icon:u,title:`Fee Payment on ${i.format("LL")}`,addButtonImg:u,addButtonMessage:"Payment not available",search:!0,handleRefresh:e.refetch,columns:[{title:"Student",field:"student"},{title:"Level",field:"level"},{title:"Amount Paid",field:"payment",render:({payment:o})=>t.jsx(t.Fragment,{children:o.map(a=>t.jsx(l,{direction:"row",columnGap:1,children:t.jsx(n,{variant:"caption",children:d(a.paid)})},a.date))})}],data:e==null?void 0:e.data,actions:[]})]})]})}b.propTypes={open:p.bool,setOpen:p.func};export{b as default};

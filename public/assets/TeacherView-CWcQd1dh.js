import{j as s,k as r,m as I,X as M,b as S,u as A,i as B,r as P,S as w,c as E,d as R,C as N,e as Q,P as u,l as j,B as t,E as Y,A as F,D as $,Y as h,H as q,f as L,g as G,h as V}from"./index-B8PQHtjc.js";import{g as H,d as K}from"./teacherAPI-DE1r2ugK.js";import{P as i,M as O}from"./ProfileItem-D0GorG9a.js";import{B as X}from"./Back-D8wcFeGb.js";import{B as _}from"./ButtonGroup-ZC3qSltg.js";import{P as g}from"./Person-mhly5Vw0.js";function z({teacher:e}){return s.jsxs(r,{children:[s.jsx(i,{label:"Name",text:e==null?void 0:e.fullName}),s.jsx(i,{label:"Date Of Birth",tex:!0,text:I(new Date(e==null?void 0:e.dateofbirth)).format("Do MMMM, YYYY.")}),s.jsx(i,{label:"Gender",text:e==null?void 0:e.gender}),s.jsx(i,{label:"Email Address",text:e==null?void 0:e.email}),s.jsx(i,{label:"Telephone No.",text:e==null?void 0:e.phonenumber}),s.jsx(i,{label:"Address",text:e==null?void 0:e.address}),s.jsx(i,{label:"Residence",text:e==null?void 0:e.residence}),s.jsx(i,{label:"Nationality",text:e==null?void 0:e.nationality})]})}const f=()=>{var m,c,p;const e=S(),d=A(),{id:a}=B(),{schoolSessionDispatch:x}=P.useContext(w),n=E({queryKey:["teacher",a],queryFn:()=>H(a),initialData:(m=e.getQueryData(["teachers",a]))==null?void 0:m.find(o=>(o==null?void 0:o._id)===a),enabled:!!a}),y=()=>{d(`/teacher/${a}/edit`)},{mutateAsync:b,isPending:v}=R({mutationFn:K}),C=()=>{L.fire({title:"Deleting Teacher",text:"Do you want to delete?",showCancelButton:!0,backdrop:!1}).then(o=>{o.isConfirmed&&b(a,{onSuccess:l=>{e.invalidateQueries(["teachers"]),x(G(l))},onError:l=>{x(V(l))}})})},D=()=>{var o,l;x({type:"sendQuickMessage",payload:{open:!0,data:{email:(o=n==null?void 0:n.data)==null?void 0:o.email,phonenumber:(l=n==null?void 0:n.data)==null?void 0:l.phonenumber}}})},T=()=>{d("level")},k=()=>{d("course")};return s.jsxs(s.Fragment,{children:[s.jsxs(N,{children:[s.jsx(X,{to:"/teacher",color:"primary.main"}),s.jsx(Q,{title:"Teacher Information",subtitle:"Manage teachers profile and assigned levels and courses",color:"primary.main"}),s.jsxs(u,{sx:{bgcolor:"#fff",py:4,px:2,my:4},children:[s.jsx(j,{paragraph:!0,variant:"h5",children:"Profile Details"}),s.jsx(r,{children:s.jsx(t,{sx:{alignSelf:"flex-end"},endIcon:s.jsx(Y,{}),onClick:y,children:"Edit"})}),s.jsxs(u,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:{xs:"center",md:"space-evenly"},alignItems:"center",gap:2},children:[s.jsxs(r,{alignItems:"center",spacing:1,children:[s.jsx(u,{sx:{p:1,border:"1px solid lightgray",borderRadius:"50%"},children:s.jsx(F,{src:`/images/users/${(c=n==null?void 0:n.data)==null?void 0:c.profile}`,sx:{width:100,height:100}})}),s.jsx(j,{paragraph:!0,variant:"h5",children:(p=n==null?void 0:n.data)==null?void 0:p.fullName}),s.jsx(t,{startIcon:s.jsx(O,{}),onClick:D,children:"Send Message"}),s.jsxs(_,{variant:"contained",children:[s.jsx(t,{color:"secondary",endIcon:s.jsx(g,{}),onClick:T,children:"Assign Level"}),s.jsx(t,{color:"primary",endIcon:s.jsx(g,{}),onClick:k,children:"Assign Course"})]})]}),s.jsxs(r,{spacing:2,children:[s.jsx(z,{teacher:n==null?void 0:n.data}),s.jsx($,{}),s.jsx(t,{color:"error",variant:"contained",endIcon:s.jsx(h,{}),onClick:C,children:"Remove Account"})]})]})]})]}),v&&s.jsx(q,{value:"Removing Facilitator Information"})]})};f.propTypes={};const ns=M.memo(f);export{ns as default};

import{i as y,c as l,j as r,C as x,e as c,P as h,l as f,L as j,m as i,_ as n,H as u,aB as p}from"./index-B8PQHtjc.js";import{b as g}from"./attendanceAPI-Btk_MENf.js";import{B as P}from"./Back-D8wcFeGb.js";import{L as s}from"./ListItemText-DzMM1D1F.js";import{L as b}from"./ListItem-CQImyTSy.js";import{L as d}from"./ListItemButton-Di0YOqWQ.js";import"./ListItemSecondaryAction-DOVMjMKm.js";import"./listItemButtonClasses-DySKLRoc.js";function L(){var o;const{id:a,type:m}=y(),t=l({queryKey:["attendance-history"],queryFn:()=>g(a),enabled:!!a});return r.jsxs(x,{children:[r.jsx(P,{to:`/level/attendance/${a}/${m}`,color:"primary.main"}),r.jsx(c,{title:"Attendance History",subtitle:"Review past attendance records to analyze trends, identify issues, and ensure comprehensive tracking of student and staff presence.",color:"primary.main"}),r.jsxs(h,{sx:{bgcolor:"#fff",p:2},children:[t.isPending&&r.jsx(f,{children:"Loading...."}),r.jsx(s,{primary:`Attendance - ${(o=t==null?void 0:t.data)==null?void 0:o.length} days`,primaryTypographyProps:{fontSize:20,fontWeight:"bold",textAlign:"right"}}),r.jsxs(j,{sx:{maxHeight:"50svh",overflowY:"auto"},children:[r.jsxs(b,{children:[r.jsx(s,{primary:"Date"}),r.jsx(s,{primary:"Present"}),r.jsx(s,{primary:"Absent"})]}),t.data&&t.data.map(e=>r.jsxs(d,{divider:!0,children:[r.jsx(s,{primary:i(e.date).format("Do MMMM,YYYY"),secondary:i(e.date).format("dddd"),slotProps:{secondary:{color:"primary.main",fontWeight:"bold"}}}),r.jsx(s,{primary:e.present,slotProps:{primary:{width:100}}}),r.jsx(s,{primary:e.absent,slotProps:{primary:{width:100}}})]},e.date)),r.jsxs(d,{divider:!0,children:[r.jsx(s,{primary:"Total",slotProps:{secondary:{color:"primary.main",fontWeight:"bold"},primary:{width:130}}}),r.jsx(s,{primary:n.sumBy(t.data,"present"),slotProps:{primary:{width:100}}}),r.jsx(s,{primary:n.sumBy(t.data,"absent"),slotProps:{primary:{width:100}}})]})]})]}),t.isPending&&r.jsx(u,{value:"Loading Attendance History"})]})}L.propTypes={open:p.PropTypes.bool,setOpen:p.PropTypes.func};export{L as default};

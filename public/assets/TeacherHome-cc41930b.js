import{r as h,S as M,u as O,a0 as C,h as U,j as e,$ as D,E as W,F as G,bE as Y,m as u,V as A,b4 as _,q as m,b5 as b,T as s,aW as $,aI as v,n as S,b6 as q,b7 as H,B as F,v as Q,bF as V,w as J,x as K,a as w,_ as X,bG as Z,M as ee,g as te,a2 as ae,aa as ie,ab as ne,ac as B,bw as le,ad as I,G as se,J as re,bH as oe}from"./index-5b8f5a53.js";import{t as de}from"./initialValues-a069a756.js";import{t as N}from"./teacher_ico-786b69d1.js";import{P as ce}from"./PersonRounded-be88ec6b.js";const E=({setTab:i})=>{const{schoolSessionDispatch:d}=h.useContext(M),g=O(),[r,x]=h.useState(null),[p,f]=h.useState(C()),[c]=h.useState(de),{isLoading:j,mutateAsync:L}=U({mutationFn:V}),P=(n,a)=>{n.dateofbirth=C(p).format("L"),L(n,{onSuccess:t=>{g.invalidateQueries(["teachers"]),d(J(t)),a.resetForm(),x(null),i("1")},onError:t=>{d(K(t))}})};return e.jsx(e.Fragment,{children:e.jsxs(D,{sx:{paddingY:2,backgroundColor:"#fff"},children:[e.jsx(W,{title:"New Facilitator",subtitle:" Simply fill in essential details about the new teacher, including their personal information, qualifications, and contact details, to ensure smooth integration into our educational community.",img:null,color:"primary.main"}),e.jsx(G,{initialValues:c,onSubmit:P,enableReinitialize:!0,validationSchema:Y,children:({values:n,errors:a,touched:t,setFieldValue:T,handleChange:o,handleSubmit:z,handleReset:R})=>{const k=l=>{T("profile",l.target.files[0]),x(URL.createObjectURL(l.target.files[0]))};return e.jsxs(u,{padding:2,spacing:5,children:[e.jsxs(u,{sx:{position:"relative",height:100},children:[e.jsx(A,{srcSet:r,sx:{width:100,height:100,alignSelf:"center"}}),e.jsx(_,{handleImageUpload:k})]}),e.jsxs(u,{spacing:3,children:[e.jsx(m,{variant:"h5",color:"secondary.main",bgcolor:"primary.main",fontWeight:"bold",p:1,paragraph:!0,children:"Personal information"}),e.jsxs(b,{children:[e.jsx(s,{label:"Firstname",type:"text",fullWidth:!0,size:"small",value:n.firstname,onChange:o("firstname"),error:!!(t.firstname&&a.firstname),helperText:t.firstname&&a.firstname}),e.jsx(s,{label:"Surname",fullWidth:!0,size:"small",value:n.surname,onChange:o("surname"),error:!!(t.surname&&a.surname),helperText:t.surname&&a.surname})]}),e.jsx(s,{label:"Username",fullWidth:!0,size:"small",value:n.username,onChange:o("username"),error:!!(t.username&&a.username),helperText:t.username&&a.username}),e.jsxs(b,{children:[e.jsx($,{label:"Date of Birth",date:p,setDate:f,disableFuture:!0,error:!!(t.dateofbirth&&a.dateofbirth),helperText:t.dateofbirth&&a.dateofbirth,value:n.dateofbirth,handleChange:o("dateofbirth")}),e.jsxs(s,{label:"Gender",select:!0,fullWidth:!0,size:"small",value:n.gender,onChange:o("gender"),error:!!(t.gender&&a.gender),helperText:t.gender&&a.gender,children:[e.jsx(v,{value:"male",children:"Male"}),e.jsx(v,{value:"female",children:"Female"})]})]})]}),e.jsxs(u,{spacing:3,children:[e.jsx(m,{variant:"h5",color:"secondary.main",bgcolor:"primary.main",fontWeight:"bold",p:1,paragraph:!0,children:"Contact Details"}),e.jsxs(b,{children:[e.jsx(s,{label:"Email",fullWidth:!0,size:"small",row:3,maxRows:3,value:n.email,onChange:o("email"),error:!!(t.email&&a.email),helperText:t.email&&a.email}),e.jsx(s,{label:"Telephone No.",inputMode:"tel",type:"tel",fullWidth:!0,size:"small",value:n.phonenumber,onChange:o("phonenumber"),error:!!(t.phonenumber&&a.phonenumber),helperText:t.phonenumber&&a.phonenumber})]}),e.jsx(s,{label:"Address",fullWidth:!0,size:"small",row:3,maxRows:3,value:n.address,onChange:o("address"),error:!!(t.address&&a.address),helperText:t.address&&a.address}),e.jsxs(b,{children:[e.jsx(S,{freeSolo:!0,fullWidth:!0,size:"small",options:q,loadingText:"Please wait....",noOptionsText:"No Town available",getOptionLabel:l=>l||"",value:n.residence,onChange:(l,y)=>T("residence",y),renderInput:l=>e.jsx(s,{...l,label:"Residence",fullWidth:!0,size:"small",error:!!(t.residence&&a.residence),helperText:t.residence&&a.residence})}),e.jsx(S,{freeSolo:!0,fullWidth:!0,size:"small",loadingText:"Please wait....",options:H,noOptionsText:"No Nationality available",getOptionLabel:l=>l||"",value:n.nationality,onChange:(l,y)=>T("nationality",y),renderInput:l=>e.jsx(s,{...l,label:"Nationality",fullWidth:!0,size:"small",error:!!(t.nationality&&a.nationality),helperText:t.nationality&&a.nationality})})]})]}),e.jsxs(u,{direction:"row",justifyContent:"flex-end",spacing:2,paddingY:4,children:[e.jsx(F,{sx:{minWidth:{xs:100,sm:150}},onClick:R,children:"Cancel"}),e.jsx(Q,{loading:j,variant:"contained",color:"primary",sx:{minWidth:{xs:100,sm:150}},onClick:z,children:"Save"})]})]})}})]})})};E.propTypes={};const ue=[{field:"_id",title:"ID",hidden:!0},{field:"fullName",title:"FullName",hidden:!0,export:!0},{title:"Profile",field:"profile",export:!1,width:400,render:i=>e.jsxs(u,{direction:"row",columnGap:1,justifyContent:"center",alignItems:"center",children:[e.jsx(A,{src:i.profile===void 0||i.profile===""?null:`/images/users/${i.profile}`}),e.jsx(w,{primary:e.jsx(m,{variant:"body2",sx:{whiteSpace:"nowrap",fontWeight:"bold"},children:i.fullName}),secondary:e.jsx(m,{variant:"caption",children:`${X.startCase(i.gender)},${new Date().getFullYear()-new Date(i.dateofbirth).getUTCFullYear()}yrs`})})]})},{field:"username",title:"Username"},{field:"active",title:"Status",export:!1,render:({active:i})=>e.jsx(F,{startIcon:e.jsx(Z,{sx:{color:i?"green":"red",width:10,height:10}}),children:i?"Active":"Disabled"})},{field:"dateofbirth",title:"Date Of Birth",hidden:!0,export:!0},{field:"gender",title:"Gender",hidden:!0,export:!0},{field:null,title:"Contact Info",render:i=>e.jsx(w,{primary:e.jsx(m,{variant:"body2",children:i.email}),secondary:e.jsx(m,{variant:"caption",color:"primary",fontWeight:"bold",children:i.phonenumber})})},{field:"email",title:"Email",export:!0,hidden:!0},{field:"phonenumber",title:"Telephone No.",export:!0,hidden:!0},{field:"address",title:"Address",export:!0,hidden:!0},{field:"residence",title:"Residence"},{field:"nationality",title:"Nationality"}],fe=()=>{var f;const[i,d]=h.useState("1"),g=ee(),r=te(["teachers"],()=>oe()),x=((f=r==null?void 0:r.data)==null?void 0:f.length)===0,p=c=>{g(`/teacher/${c==null?void 0:c._id}`)};return e.jsxs(ae,{children:[e.jsx(W,{title:"Facilitator Portal",subtitle:"Explore Our Faculty: Meet the Dedicated Educators Shaping Tomorrow's Leaders",img:N,color:"primary.main"}),e.jsxs(ie,{value:i,children:[e.jsxs(ne,{onChange:(c,j)=>d(j),sx:{bgcolor:"whitesmoke"},children:[e.jsx(B,{value:"1",label:"Facilitator",icon:e.jsx(ce,{}),iconPosition:"start"}),x&&e.jsx(B,{value:"2",label:"New ",icon:e.jsx(le,{}),iconPosition:"start"})]}),e.jsx(I,{value:"1",sx:{px:0},children:e.jsx(se,{title:"Teachers",icon:N,isLoading:r.isLoading,columns:ue,data:r.data?r.data:[],actions:[],onRowClick:p,showAddButton:!0,addButtonImg:re.teacher,addButtonText:"New Teacher",addButtonMessage:"ðŸ˜‘ Add your first teacher by clicking on the button below !",onAddButtonClicked:()=>d("2"),options:{search:!0}})}),e.jsx(I,{value:"2",sx:{px:0},children:e.jsx(E,{setTab:d})})]})]})};export{fe as default};

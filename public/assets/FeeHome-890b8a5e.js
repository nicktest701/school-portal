import{j as e,m,q as x,b,r as F,U as v,O as C,g as u,G as T,a1 as P,J as M,a as A,a2 as p,M as k,bX as B,bY as I}from"./index-e0c0d8c9.js";import{d as L}from"./BarChartRounded-d57fde45.js";import{t as y}from"./teacher_ico-786b69d1.js";const n=({text:a,value:s})=>e.jsxs(m,{spacing:1,sx:{backgroundColor:"#fff",padding:2,borderRadius:"8px",boxShadow:"0px 1px 20px 10px rgba(84,84,84,0.10)"},children:[e.jsxs(m,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(x,{children:a}),e.jsx(L,{color:"secondary"})]}),e.jsx(x,{variant:"h5",children:b(s??0)})]}),E=()=>{var r,d,i,l;const{userState:{session:{sessionId:a,termId:s,from:g,to:h}}}=F.useContext(v),f=C(),t=u({queryKey:["current-fees-summary"],queryFn:()=>B({session:a,term:s,from:g,to:h}),enabled:!!a&&!!s}),o=u({queryKey:["recent-fees"],queryFn:()=>I({session:a,term:s}),enabled:!!a&&!!s}),j=()=>{f("/fee/payment")};return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Fees Payment",subtitle:"Access,manage and control payment of school fees",img:y,color:"primary.main"}),e.jsxs(P,{sx:{display:{xs:"none",md:"grid"},gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gap:2,py:3},children:[e.jsx(n,{text:"Today",value:(r=t==null?void 0:t.data)==null?void 0:r.today}),e.jsx(n,{text:"Month",value:(d=t==null?void 0:t.data)==null?void 0:d.month}),e.jsx(n,{text:"Term",value:(i=t==null?void 0:t.data)==null?void 0:i.term}),e.jsx(n,{text:"Year",value:(l=t==null?void 0:t.data)==null?void 0:l.year})]}),e.jsx(M,{isLoading:o.isLoading,title:"Recent Fee Payment",icon:y,columns:[{title:"Date of Payment",field:"date",type:"date",render:({date:c})=>e.jsx(A,{primary:p(c).format("ddd,LL"),secondary:p(c).format("hh:mm a"),secondaryTypographyProps:{color:"secondary.main"}})},{title:"Student",field:"student"},{title:"Level",field:"level"},{title:"Amount Paid",field:"paid"},{title:"Outstanding",field:"outstanding"}],data:o.data,actions:[],showAddButton:!0,addButtonImg:k.level,addButtonMessage:" No recent fee payment !",addButtonText:"Make New Payment",onAddButtonClicked:j,handleRefresh:o.refetch})]})};export{E as default};

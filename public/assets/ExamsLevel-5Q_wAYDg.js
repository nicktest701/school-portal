import{K as i,j as s,U as h,k as T,A as V,l as x,ai as A,u as F,r as _,a0 as U,i as G,c as q,C as K,e as Q,aE as X,D as Y,M as J,B as S}from"./index-DrgqF6h7.js";import{u as p,w as W,C as Z,c as D}from"./CustomizedMaterialTable-sErZg5Gy.js";import{S as ss}from"./studentColumns-Dev_8qkQ.js";import{c as es}from"./ExaminationAPI-CMjpI3MV.js";import{s as ts}from"./student_ico-BGUw5C9J.js";import{E as os}from"./images-B5fNBSni.js";import{B as ns}from"./Back-CADpxW16.js";import{u as is}from"./index-_n9xtSlI.js";import{B as as}from"./ButtonGroup-DQMwsk7A.js";import"./TabPanel-Bl8roboH.js";import"./useThemeProps-DLRF2U3R.js";import"./Toolbar-Bzx_LBRC.js";import"./Chip-BcLQNplL.js";import"./Autocomplete-D4vPEd6T.js";import"./Skeleton-BUD-o5ar.js";import"./ListItemText-Bwh_rzOL.js";import"./InputAdornment-EcTjtcuD.js";import"./DialogActions-Cx2GHHEW.js";import"./ListItem-yCsexoBs.js";import"./ListItemSecondaryAction-mmiMbVqP.js";import"./listItemButtonClasses-CLhmtlXH.js";import"./ListItemButton-BUsfko6u.js";import"./Check-CEGAxChF.js";import"./DeleteOutline-DM92K-00.js";import"./gradeColor-B1MTvGsq.js";import"./CircleRounded-Bh8WmZqU.js";const rs=i(s.jsx("path",{d:"M20 2H4v20h16zM6 4h5v8l-2.5-1.5L6 12z"}),"BookSharp"),cs=i(s.jsx("path",{d:"M15 7v12.97l-4.21-1.81-.79-.34-.79.34L5 19.97V7zm4-6H8.99C7.89 1 7 1.9 7 3h10c1.1 0 2 .9 2 2v13l2 1V3c0-1.1-.9-2-2-2m-4 4H5c-1.1 0-2 .9-2 2v16l7-3 7 3V7c0-1.1-.9-2-2-2"}),"BookmarksOutlined"),ls=i(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined"),ds=i(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-3.3 0-6 2.7-6 6s2.7 6 6 6 6-2.7 6-6-2.6-6-6-6m3 7H9v-2h6z"}),"DoNotDisturbOnTotalSilenceOutlined"),ms=i(s.jsx("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOffOutlined"),us=i(s.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}),"List"),hs=i(s.jsx("path",{d:"M16 4H4c-1.1 0-2 .9-2 2v12.01c0 1.1.9 1.99 2 1.99h16c1.1 0 2-.9 2-2v-8zM4 18.01V6h11v5h5v7.01z"}),"NoteOutlined"),ps=i(s.jsx("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutlineOutlined");function c({title:m,value:v,icon:l,color:r}){return s.jsxs(T,{direction:"row",spacing:2,sx:{bgcolor:"white",px:2,py:4,borderRadius:2,boxShadow:"20px 20px 60px #d9d9d9,-20px -20px 60px #ffffff"},children:[s.jsx(V,{sx:{width:50,height:50,color:`${r}.dark`,bgcolor:`${r}.lighter`},children:l}),s.jsxs(T,{spacing:1,children:[s.jsx(x,{variant:"body2",children:m}),s.jsx(x,{variant:"h5",children:v})]})]})}c.propTypes={title:h.string,value:h.number,icon:h.node,color:h.string};const As=({type:m})=>{var f,C,k,M,b,I,y;const v=A(),l=is(v.breakpoints.up("md")),r=F(),{userState:{session:u}}=_.useContext(U),{levelId:o,level:a}=G(),e=q({queryKey:["exams-details",o],queryFn:()=>es({sessionId:u.sessionId,termId:u.termId,levelId:o}),enabled:!!o&&!!u.sessionId&&!!u.termId}),$=t=>{r(`/examination/level/${o}/student?eid=${t==null?void 0:t._id}&sid=${t==null?void 0:t.studentId}`,{state:{prevPath:`/examination/level/${o}/${a}`}})},B=[...ss,{field:null,title:"",width:"30%",render:()=>s.jsx(D,{sx:{width:30,height:30}})}],d={width:28,height:28},L=()=>{r(`/examination/level/${o}/${a}/upload`,{state:{prevPath:`/examination/level/${o}/${a}`}})},N=()=>{r(`/${m}/reports/${o}`)},P=_.useCallback(()=>{var z,E;const t=["Index Number","Student","Class  Score","Exams  Score","Total  Score"],O=(E=(z=e==null?void 0:e.data)==null?void 0:z.students)==null?void 0:E.map(n=>({indexnumber:n==null?void 0:n.indexnumber,student:n==null?void 0:n.fullName})),j=p.json_to_sheet(O),w=p.book_new();p.book_append_sheet(w,j,a||"Subject"),p.sheet_add_aoa(j,[t],{origin:"A1"});const R=O.reduce((n,g)=>{var H;return Math.max(n,(H=g==null?void 0:g.student)==null?void 0:H.length)},10);j["!cols"]=[{wch:R}],W(w,`${a||"Subject"}.xlsx`,{compression:!0})},[(f=e==null?void 0:e.data)==null?void 0:f.students]);return s.jsxs(s.Fragment,{children:[s.jsx(ns,{to:m==="course"?"/course/level":"/examination",color:"primary.main"}),s.jsxs(K,{sx:{display:"flex",flexDirection:{xs:"column-reverse",sm:"row"},justifyContent:"space-between",alignItems:"center",gap:2,bgcolor:"#fff",my:2},children:[s.jsx(Q,{title:"Examination Portal",subtitle:"Track,manage and control academic and class activities",img:X,backColor:"#012e54"}),s.jsx(x,{sx:{display:{xs:"none",md:"inline-flex"}},variant:"h5",paragraph:!0,whiteSpace:"nowrap",children:a})]}),s.jsx(x,{variant:"h5",py:2,children:"Exams Summary"}),s.jsx(Y,{}),s.jsxs(J,{sx:{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gap:2,py:6},children:[s.jsx(c,{title:"Students",value:(C=e.data)==null?void 0:C.noOfStudents,icon:s.jsx(ps,{sx:d}),color:"info"}),s.jsx(c,{title:"Highest Marks",value:(k=e.data)==null?void 0:k.highestMarks,icon:s.jsx(cs,{sx:d}),color:"success"}),s.jsx(c,{title:"Lowest Marks",value:(M=e.data)==null?void 0:M.lowestMarks,icon:s.jsx(ds,{sx:d}),color:"warning"}),s.jsx(c,{title:"Pass Students",value:(b=e.data)==null?void 0:b.passStudents,icon:s.jsx(ls,{sx:d}),color:"success"}),s.jsx(c,{title:"Failed Students",value:(I=e.data)==null?void 0:I.failStudents,icon:s.jsx(ms,{sx:d}),color:"error"})]}),s.jsx(Z,{title:a??"Students",icon:ts,isLoading:e.isLoading,columns:B,search:!0,data:(y=e==null?void 0:e.data)==null?void 0:y.students,autoCompleteComponent:s.jsxs(as,{children:[s.jsx(S,{startIcon:s.jsx(hs,{}),onClick:P,children:l?" Download Assessment Sheet":""}),s.jsx(S,{startIcon:s.jsx(rs,{}),onClick:L,children:l?"Import Results":""}),s.jsx(S,{startIcon:s.jsx(us,{}),onClick:N,children:l?" View Students Report":""})]}),actions:[],handleRefresh:e.refetch,addButtonImg:os.student,addButtonMessage:"ðŸ˜‘ No Students results available !!!!",onRowClick:t=>$(t)})]})};export{As as default};

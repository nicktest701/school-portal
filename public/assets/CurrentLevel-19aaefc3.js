import{ad as D,ae as A,j as t,C as L,S as T,T as x,B as f,r,a0 as k,u as E,af as N,g as _,f as M,_ as B,i as F,k as O,aw as q,p as z,q as H,m as P,x as j,s as $,t as R,G as C,H as G,O as U,J as Q}from"./index-bb65b4bf.js";import{d as Y}from"./School-70756989.js";import{a as J}from"./studentColumns-c5a50072.js";import{M as V,t as W,C as X}from"./CustomizedMaterialTable-266061d1.js";import{E as S}from"./images-0c291668.js";import{b as K}from"./studentAPI-ce3a75c6.js";import{u as Z}from"./useLevelById-2106d452.js";import{s as tt}from"./student_ico-5882123b.js";import et from"./AttendanceHistory-01b87b67.js";import{A as at}from"./Add-66663708.js";import{B as st}from"./Back-0ebcc4f3.js";import{C as ot}from"./CustomTitle-ed47c53b.js";import"./gradeColor-6983157e.js";import"./ListItemText-33ae0292.js";import"./listItemTextClasses-35ff90f6.js";import"./CircleRounded-3db5a545.js";import"./TabPanel-175e39ff.js";import"./Toolbar-36d77a55.js";import"./MenuItem-1edcf8db.js";import"./Chip-fa36c3a1.js";import"./Autocomplete-95da27f3.js";import"./Skeleton-6cff8ea8.js";import"./ButtonGroup-83f2640f.js";import"./InputAdornment-321f8206.js";import"./CardContent-25ef3451.js";import"./ListItemSecondaryAction-c66bb893.js";import"./Grid-6a14669c.js";import"./useMediaQuery-5f0ec7e9.js";import"./ListItem-befde9c4.js";import"./listItemButtonClasses-9702db06.js";import"./ListItemButton-bf3e0355.js";import"./Check-7b95876f.js";import"./DeleteOutline-80e9f63f.js";import"./Delete-97505065.js";import"./score_ico-e1082ac1.js";import"./attendanceAPI-564bcc1b.js";import"./ArrowBackRounded-54858719.js";var g={},nt=A;Object.defineProperty(g,"__esModule",{value:!0});var y=g.default=void 0,it=nt(D()),rt=t;y=g.default=(0,it.default)((0,rt.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");const lt=({onClick:a,buttonText:s,img:n,message:l,showAddButton:c})=>t.jsx(L,{className:"hide-on-pint",sx:{backgroundColor:"#fff",height:"70svh",display:"grid",placeItems:"center"},children:t.jsxs(T,{justifyContent:"center",alignItems:"center",spacing:3,paddingY:4,children:[t.jsx("img",{loading:"lazy",src:n||S.student,alt:"empty_image",style:{width:250,height:250,objectFit:"contain"}}),t.jsx(x,{variant:"body2",color:"primary",textAlign:"center",children:l||"No data available !"}),c&&t.jsx(f,{variant:"contained",startIcon:t.jsx(y,{}),onClick:a,children:s})]})});function ct(){var v;const{userState:{session:a}}=r.useContext(k),{state:s}=E();N();const n=_(),[l,c]=r.useState([]),[o,i]=r.useState(!0),{schoolSessionState:m,schoolSessionDispatch:d}=r.useContext(M),e=m.fileData;r.useEffect(()=>{if(e.data.length>0){const u=e.columns.map(p=>({title:B.upperCase(p),field:p}));c(u)}i(!1)},[e]);const b=()=>{j.fire({title:"Exiting",text:"Do you want to exit?",showCancelButton:!0,backdrop:!1}).then(({isConfirmed:u})=>{u&&d({type:"closeFileDialog"})})},{mutateAsync:I}=F({mutationFn:K}),w=()=>{i(!0);const u={students:e.data,session:{sessionId:a.sessionId,termId:a.termId,levelId:s.levelId},type:e.type};j.fire({title:"Importing students",text:"Do you want to import ?",showCancelButton:!0,backdrop:!1}).then(({isConfirmed:p})=>{p&&I(u,{onSettled:()=>{n.invalidateQueries(["current-students"]),i(!1)},onSuccess:h=>{d($(h))},onError:h=>{d(R(h))}}),i(!1)})};return t.jsxs(O,{open:e.open,fullScreen:!0,fullWidth:!0,children:[t.jsx(q,{children:"Preview"}),t.jsxs(z,{sx:{paddingX:3},children:[t.jsx(f,{onClick:b,children:"Cancel"}),t.jsx(H,{variant:"contained",loading:o,onClick:w,children:"Save"})]}),t.jsx(P,{children:((v=e.data)==null?void 0:v.length)===0?t.jsx(x,{children:"No data available"}):t.jsx(V,{title:"Students",isLoading:o,icons:W,columns:l,data:e.data,options:{pageSize:10,pageSizeOptions:[10,20,30,50]}})})]})}const dt=()=>{const{id:a,type:s}=C(),n=G(),[l,c]=r.useState(!1),{students:o,rollNumber:i,levelLoading:m}=Z(a),d=()=>{n("/student/new")},e=()=>{n(`/level/attendance/${a}/${s}`)};return m?t.jsx(U,{value:"Loading Student Information"}):t.jsxs(t.Fragment,{children:[(o==null?void 0:o.length)===0?t.jsx(lt,{img:S.student,message:"ðŸ˜‘ No Student available.Add your first student to this level",buttonText:"New Student",onClick:d,showAddButton:!0}):t.jsx(X,{search:!0,isLoading:m,title:s,subtitle:`${i} Students`,exportFileName:s||"",columns:J,data:o,actions:[],autoCompleteComponent:t.jsx(f,{variant:"contained",startIcon:t.jsx(at,{}),onClick:e,children:"Make New Attendance"}),icon:tt}),t.jsx(et,{open:l,setOpen:c}),t.jsx(ct,{})]})},Jt=()=>{const{type:a}=C();return t.jsxs(t.Fragment,{children:[t.jsx(st,{to:"/level",color:"primary.main"}),t.jsxs(Q,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:{xs:"space-around",md:"space-between"},alignItems:"center",bgcolor:"#fff",mb:4,p:1},children:[t.jsx(ot,{title:"Current Level",subtitle:"Track,manage and control academic and class activities",icon:t.jsx(Y,{color:"inherit",sx:{width:50,height:50}}),color:"primary.main"}),t.jsx(x,{variant:"h5",paragraph:!0,whiteSpace:"nowrap",children:a})]}),t.jsx(dt,{})]})};export{Jt as default};

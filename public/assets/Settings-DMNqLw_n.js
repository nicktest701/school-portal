import{r,a0 as j,S as w,b as C,d as B,fq as M,j as o,C as d,w as T,M as z,A as L,k as W,T as n,y as I,g as m,h as p,fr as A,e as E,D as k}from"./index-DrgqF6h7.js";import{C as F}from"./CustomImageChooser-B_xkuEqQ.js";const N="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%3e%3cpath%20fill='%23455A64'%20d='M40,21l-7.938-2.168l4.08-7.146l-2.829-2.829l-6.835,3.902L24,5h-4l-2.375,7.437l-6.938-3.579l-2.829,2.829l3.579,6.938L4,21v4l7.437,2.375l-3.579,6.938l2.829,2.829l6.938-3.579L20,41h4l2.375-7.437l6.938,3.579l2.829-2.829l-3.734-7.239L40,25V21z%20M22,31c-4.418,0-8-3.582-8-8s3.582-8,8-8c4.418,0,8,3.582,8,8S26.418,31,22,31z'/%3e%3cpath%20fill='%2378909C'%20d='M22,10c-7.18,0-13,5.82-13,13s5.82,13,13,13s13-5.82,13-13S29.18,10,22,10z%20M22,30c-3.865,0-7-3.133-7-7s3.135-7,7-7c3.865,0,7,3.133,7,7S25.865,30,22,30z'/%3e%3cpath%20fill='%23BBDEFB'%20d='M23%2027H44V44H23z'/%3e%3cpath%20fill='%233F51B5'%20d='M33.071%2029L29.535%2032.535%2027.414%2030.414%2026%2031.828%2029.535%2035.363%2034.485%2030.414zM33.071%2035.637L29.535%2039.172%2027.414%2037.051%2026%2038.465%2029.535%2042%2034.485%2037.051zM44%2027v-3c0-.553-.447-1-1-1H24c-.552%200-1%20.447-1%201v3H44z'/%3e%3c/svg%3e";function D(){const a=JSON.parse(localStorage.getItem("@school_info")),{userDispatch:h}=r.useContext(j),[x,g]=r.useState(`/images/users/${a==null?void 0:a.badge}`),{schoolSessionDispatch:s}=r.useContext(w),c=C(),{mutateAsync:b}=B({mutationFn:M}),f=(e,l)=>{b(e,{onSettled:()=>{l.setSubmitting(!1),c.invalidateQueries(["school"])},onSuccess:t=>{localStorage.setItem("@school_info",JSON.stringify(e)),h({type:"setUserInfo",payload:t}),s(m(t))},onError:t=>{s(p(t))}})},S=async e=>{var t;const l=(t=e.target)==null?void 0:t.files[0];try{const i=await A(l);s(m("School Image Uploaded")),c.invalidateQueries(["school"]),g(`/images/users/${i}`),a.badge=i,localStorage.setItem("@school_info",JSON.stringify(a))}catch{s(p("Error updating school logo"))}};return o.jsx(d,{maxWidth:"md",children:o.jsx(T,{initialValues:a,onSubmit:f,enableReinitialize:!0,children:({values:e,errors:l,touched:t,handleChange:i,handleSubmit:u,isSubmitting:y})=>o.jsxs(o.Fragment,{children:[o.jsx(z,{sx:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginY:2},children:o.jsx(F,{handleImageUpload:S,children:o.jsx(L,{src:x,sx:{width:120,height:120,justifySelf:"center",alignSelf:"center"}})})}),o.jsxs(W,{spacing:3,pt:4,children:[o.jsx(n,{label:"School Name",placeholder:"School Name",type:"text",fullWidth:!0,value:e==null?void 0:e.name,onChange:i("name"),error:!!(t.name&&l.name),helperText:t.name&&l.name}),o.jsx(n,{label:"Address",placeholder:"Address",type:"text",fullWidth:!0,value:e==null?void 0:e.address,onChange:i("address"),error:!!(t.address&&l.address),helperText:t.address&&l.address}),o.jsx(n,{label:"Location",placeholder:"Location",type:"text",fullWidth:!0,value:e==null?void 0:e.location,onChange:i("location"),error:!!(t.location&&l.location),helperText:t.location&&l.location}),o.jsx(n,{label:"Email Address",placeholder:"Email Address",type:"email",inputMode:"email",fullWidth:!0,value:e==null?void 0:e.email,onChange:i("email"),error:!!(t.email&&l.email),helperText:t.email&&l.email}),o.jsx(n,{label:"Website",placeholder:"Website",type:"text",fullWidth:!0,value:e==null?void 0:e.website,onChange:i("website"),error:!!(t.website&&l.website),helperText:t.website&&l.website}),o.jsx(n,{label:"Phone Number",placeholder:"e.g. 0244192831-0233847287",type:"text",fullWidth:!0,value:e==null?void 0:e.phonenumber,onChange:i("phonenumber"),error:!!(t.phonenumber&&l.phonenumber),helperText:t.phonenumber&&l.phonenumber?l.phonenumber:'Separate multiple phone numbers with " - "'}),o.jsx(n,{label:"Motto",placeholder:"Motto",type:"text",fullWidth:!0,value:e==null?void 0:e.motto,onChange:i("motto"),error:!!(t.motto&&l.motto),helperText:t.motto&&l.motto}),o.jsx(I,{loading:y,variant:"contained",color:"primary",onClick:u,children:"Save Settings"})]})]})})})}const H=()=>o.jsxs(d,{children:[o.jsx(E,{title:"Settings",subtitle:"Customize and configure system settings to tailor the platform to your school's specific needs.",img:N,backColor:"#012e54"}),o.jsx(k,{}),o.jsx(D,{})]});H.propTypes={};export{H as default};

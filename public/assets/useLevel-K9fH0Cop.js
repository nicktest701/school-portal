import{r as c,a1 as I,c as l,eN as L,_ as s}from"./index-B8PQHtjc.js";function q(){const{userState:{session:t}}=c.useContext(I),{isPending:d,isFetching:f,refetch:m,data:e}=l({queryKey:["levels",t.sessionId,t.termId],queryFn:()=>L(t.sessionId,t.termId),enabled:!!t.sessionId&&!!(t!=null&&t.termId),initialData:[]}),u=c.useMemo(()=>{if((e==null?void 0:e.length)!==0){const h=e==null?void 0:e.map(({_id:O,level:n,students:o,subjects:r,teacher:S})=>({_id:O,level:n,type:`${n==null?void 0:n.name}${n==null?void 0:n.type}`,noOfStudents:o==null?void 0:o.length,noOfSubjects:r==null?void 0:r.length,teacher:S})),g=e.length,i=s.flatMap(e,"subjects"),p=s.isEmpty(i)?0:s.uniq(i).length,a=s.filter(e,"teacher"),y=s.isEmpty(a)?0:a.length;return{students:e,levelsOption:h,levelSummary:{noOfLevels:g,noOfSubjects:p,noOfAssignedTeachers:y}}}else return{students:[],levelsOption:[],levelSummary:{noOfLevels:0,noOfSubjects:0,noOfAssignedTeachers:0}}},[e==null?void 0:e.data]);return{levelLoading:d,levelIsFetching:f,levelRefetch:m,...u}}export{q as u};
